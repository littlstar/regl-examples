var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var e=0;return{next:function(){return e==a.length?{done:!0}:{done:!1,value:a[e++]}}}};
$jscomp.arrayFromIterator=function(a){for(var e,g=[];!(e=a.next()).done;)g.push(e.value);return g};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,e){function g(){}g.prototype=e.prototype;a.prototype=new g;a.prototype.constructor=a;for(var q in e)if($jscomp.global.Object.defineProperties){var l=$jscomp.global.Object.getOwnPropertyDescriptor(e,q);l&&$jscomp.global.Object.defineProperty(a,q,l)}else a[q]=e[q]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,e){a instanceof String&&(a=String(a));var g=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var q={},l=(q.next=function(){if(g<a.length){var d=g++;return{value:e(d,a[d]),done:!1}}l.next=$jscomp.array.done_;return $jscomp.array.done_()},q[Symbol.iterator]=function(){return l},q);return l};
$jscomp.array.findInternal_=function(a,e,g){a instanceof String&&(a=String(a));for(var q=a.length,l=0;l<q;l++){var d=a[l];if(e.call(g,d,l,a))return{i:l,v:d}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,e,g){e=void 0===e?function(d){return d}:e;var q=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var l;!(l=a.next()).done;)q.push(e.call(g,l.value))}else{l=a.length;for(var d=0;d<l;d++)q.push(e.call(g,a[d]))}return q};$jscomp.array.of=function(a){for(var e=[],g=0;g<arguments.length;++g)e[g-0]=arguments[g];return $jscomp.array.from(e)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,e){return[a,e]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,e){return e})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(a,e,g){var q=this.length;a=Number(a);e=Number(e);g=Number(null!=g?g:q);if(a<e)for(g=Math.min(g,q);e<g;)e in this?this[a++]=this[e++]:(delete this[a++],e++);else for(g=Math.min(g,q+e-a),a+=g-e;g>e;)--g in this?this[--a]=this[g]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,e,g){null!=g&&a.length||(g=this.length||0);g=Number(g);for(e=Number((void 0===e?0:e)||0);e<g;e++)this[e]=a;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(a,e){return $jscomp.array.findInternal_(this,a,e).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(a,e){return $jscomp.array.findInternal_(this,a,e).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next())e=e.value,this.set(e[0],e[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var e=Object.seal({x:4}),g=new a($jscomp.makeIterator([[e,"s"]]));if("s"!=g.get(e)||1!=g.size||g.get({x:4})||g.set({x:4},"t")!=g||2!=g.size)return!1;var q=g.entries(),l=q.next();if(l.done||l.value[0]!=e||"s"!=l.value[1])return!1;l=q.next();return l.done||4!=l.value[0].x||"t"!=l.value[1]||!q.next().done?!1:!0}catch(d){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,e){var g=this.maybeGetEntry_(a),q=g.id,l=g.list,g=g.entry;l||(l=this.data_[q]=[]);g?g.value=e:(g={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:e},l.push(g),this.head_.previous.next=g,this.head_.previous=g,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var e=this.maybeGetEntry_(a);a=e.id;var g=e.list,q=e.index;return(e=e.entry)&&g?(g.splice(q,1),g.length||delete this.data_[a],e.previous.next=e.next,e.next.previous=e.previous,e.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var e=$jscomp.Map.getId_(a),g=this.data_[e];if(g)for(var q=0;q<g.length;q++){var l=g[q];if(a!==a&&l.key!==l.key||a===l.key)return{id:e,list:g,index:q,entry:l}}return{id:e,list:g,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,e){for(var g=$jscomp.makeIterator(this.entries()),q=g.next();!q.done;q=g.next())q=q.value,a.call(e,q[1],q[0],this)};
$jscomp.Map.prototype.iter_=function(a){var e=this,g=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var q={};return q.next=function(){if(g){for(;g.head!=e.head_;)g=g.previous;for(;g.next!=g.head;)return g=g.next,{done:!1,value:a(g)};g=null}return{done:!0,value:void 0}},q[Symbol.iterator]=function(){return this},q};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,e,g){Object.defineProperty(a,e,{value:String(g)})}:function(a,e,g){a[e]=String(g)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var e=0;0===(a&4294901760)&&(a<<=16,e+=16);0===(a&4278190080)&&(a<<=8,e+=8);0===(a&4026531840)&&(a<<=4,e+=4);0===(a&3221225472)&&(a<<=2,e+=2);0===(a&2147483648)&&e++;return e};$jscomp.math.imul=function(a,e){a=Number(a);e=Number(e);var g=a&65535,q=e&65535;return g*q+((a>>>16&65535)*q+g*(e>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var e=a,g=1,q=a,l=0,d=1;l!=q;)e*=a,d*=-1,q=(l=q)+d*e/++g;return q}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var e=a,g=1,q=a,l=0;l!=q;)e*=a/++g,q=(l=q)+e;return q}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var e=Math.exp(2*-Math.abs(a)),e=(1-e)/(1+e);return 0>a?-e:e};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var e=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-e:e};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,e,g){for(var q=[],l=2;l<arguments.length;++l)q[l-2]=arguments[l];a=Number(a);e=Number(e);for(var d=Math.max(Math.abs(a),Math.abs(e)),b=$jscomp.makeIterator(q),l=b.next();!l.done;l=b.next())d=Math.max(d,Math.abs(l.value));if(1E100<d||1E-100>d){a/=d;e/=d;b=a*a+e*e;q=$jscomp.makeIterator(q);for(l=q.next();!l.done;l=q.next())l=l.value,l=Number(l)/d,b+=l*l;return Math.sqrt(b)*d}d=a*a+e*e;q=$jscomp.makeIterator(q);for(l=q.next();!l.done;l=q.next())l=l.value,l=Number(l),d+=
l*l;return Math.sqrt(d)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var e=Math.floor(Math.abs(a));return 0>a?-e:e};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var e=Math.pow(Math.abs(a),1/3);return 0>a?-e:e};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,e){for(var g=[],q=1;q<arguments.length;++q)g[q-1]=arguments[q];g=$jscomp.makeIterator(g);for(q=g.next();!q.done;q=g.next())if(q=q.value)for(var l in q)Object.prototype.hasOwnProperty.call(q,l)&&(a[l]=q[l]);return a};$jscomp.object.is=function(a,e){return a===e?0!==a||1/a===1/e:a!==a&&e!==e};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next())this.add(e.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var e=Object.seal({x:4}),a=new a($jscomp.makeIterator([e]));if(a.has(e)||1!=a.size||a.add(e)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),g=a.next();if(g.done||g.value[0]!=e||g.value[1]!=e)return!1;g=a.next();return g.done||g.value[0]==e||4!=g.value[0].x||g.value[1]!=g.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,e){var g=this;this.map_.forEach(function(q){return a.call(e,q,q,g)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(a,e){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var e=[],g=0;g<arguments.length;++g)e[g-0]=arguments[g];for(var g="",e=$jscomp.makeIterator(e),q=e.next();!q.done;q=e.next()){q=q.value;q=+q;if(0>q||1114111<q||q!==Math.floor(q))throw new RangeError("invalid_code_point "+q);65535>=q?g+=String.fromCharCode(q):(q-=65536,g+=String.fromCharCode(q>>>10&1023|55296),g+=String.fromCharCode(q&1023|56320))}return g};
$jscomp.string.repeat=function(a){var e=this.toString();if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var g="";a;)if(a&1&&(g+=e),a>>>=1)e+=e;return g};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){var e=this.toString(),g=e.length;a=Number(a)||0;if(0<=a&&a<g){a|=0;var q=e.charCodeAt(a);if(55296>q||56319<q||a+1===g)return q;a=e.charCodeAt(a+1);return 56320>a||57343<a?q:1024*(q-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,e){e=void 0===e?0:e;$jscomp.string.noRegExp_(a,"includes");return-1!==this.toString().indexOf(a,e)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,e){e=void 0===e?0:e;$jscomp.string.noRegExp_(a,"startsWith");var g=this.toString();a+="";for(var q=g.length,l=a.length,d=Math.max(0,Math.min(e|0,g.length)),b=0;b<l&&d<q;)if(g[d++]!=a[b++])return!1;return b>=l};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,e){$jscomp.string.noRegExp_(a,"endsWith");var g=this.toString();a+="";void 0===e&&(e=g.length);for(var q=Math.max(0,Math.min(e|0,g.length)),l=a.length;0<l&&0<q;)if(g[--q]!=a[--l])return!1;return 0>=l};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(e,g,q){function l(b,p){if(!g[b]){if(!e[b]){var w="function"==typeof require&&require;if(!p&&w)return w(b,!0);if(d)return d(b,!0);w=Error("Cannot find module '"+b+"'");throw w.code="MODULE_NOT_FOUND",w;}w=g[b]={exports:{}};e[b][0].call(w.exports,function(d){var p=e[b][1][d];return l(p?p:d)},w,w.exports,e$$0,e,g,q)}return g[b].exports}for(var d="function"==typeof require&&require,b=0;b<q.length;b++)l(q[b]);return l})({1:[function(a,e,g){function q(d){var b=d.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");
return"="===d[b-2]?2:"="===d[b-1]?1:0}function l(b,a,t){for(var l=[],n=a;n<t;n+=3)a=(b[n]<<16)+(b[n+1]<<8)+b[n+2],l.push(d[a>>18&63]+d[a>>12&63]+d[a>>6&63]+d[a&63]);return l.join("")}g.byteLength=function(d){return 3*d.length/4-q(d)};g.toByteArray=function(d){var a,l,u,n,h;a=d.length;n=q(d);h=new t(3*a/4-n);l=0<n?a-4:a;var k=0;for(a=0;a<l;a+=4)u=b[d.charCodeAt(a)]<<18|b[d.charCodeAt(a+1)]<<12|b[d.charCodeAt(a+2)]<<6|b[d.charCodeAt(a+3)],h[k++]=u>>16&255,h[k++]=u>>8&255,h[k++]=u&255;2===n?(u=b[d.charCodeAt(a)]<<
2|b[d.charCodeAt(a+1)]>>4,h[k++]=u&255):1===n&&(u=b[d.charCodeAt(a)]<<10|b[d.charCodeAt(a+1)]<<4|b[d.charCodeAt(a+2)]>>2,h[k++]=u>>8&255,h[k++]=u&255);return h};g.fromByteArray=function(b){for(var a=b.length,t=a%3,u="",n=[],h=0,k=a-t;h<k;h+=16383)n.push(l(b,h,h+16383>k?k:h+16383));1===t?(b=b[a-1],u+=d[b>>2],u+=d[b<<4&63],u+="=="):2===t&&(b=(b[a-2]<<8)+b[a-1],u+=d[b>>10],u+=d[b>>4&63],u+=d[b<<2&63],u+="=");n.push(u);return n.join("")};var d=[],b=[],t="undefined"!==typeof Uint8Array?Uint8Array:Array;
for(a=0;64>a;++a)d[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;b[45]=62;b[95]=63},{}],2:[function(a,e,g){var q=a("./lib/rationalize");e.exports=function(a,d){return q(a[0].mul(d[1]).add(d[0].mul(a[1])),a[1].mul(d[1]))}},{"./lib/rationalize":12}],3:[function(a,e,g){e.exports=function(a,l){return a[0].mul(l[1]).cmp(l[0].mul(a[1]))}},{}],4:[function(a,e,g){var q=a("./lib/rationalize");e.exports=
function(a,d){return q(a[0].mul(d[1]),a[1].mul(d[0]))}},{"./lib/rationalize":12}],5:[function(a,e,g){function q(a,u){if(l(a))return u?w(a,q(u)):[a[0].clone(),a[1].clone()];var n=0,h,k;if(d(a))h=a.clone();else if("string"===typeof a)h=t(a);else{if(0===a)return[b(0),b(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=Math.pow(2,256),n-=256;h=b(a)}if(l(u))h.mul(u[1]),k=u[0].clone();else if(d(u))k=u.clone();else if("string"===typeof u)k=t(u);else if(u){if(u!==Math.floor(u))for(;u!==Math.floor(u);)u*=
Math.pow(2,256),n+=256;k=b(u)}else k=b(1);0<n?h=h.shln(n):0>n&&(k=k.shln(-n));return p(h,k)}var l=a("./is-rat"),d=a("./lib/is-bn"),b=a("./lib/num-to-bn"),t=a("./lib/str-to-bn"),p=a("./lib/rationalize"),w=a("./div");e.exports=q},{"./div":4,"./is-rat":6,"./lib/is-bn":10,"./lib/num-to-bn":11,"./lib/rationalize":12,"./lib/str-to-bn":13}],6:[function(a,e,g){var q=a("./lib/is-bn");e.exports=function(a){return Array.isArray(a)&&2===a.length&&q(a[0])&&q(a[1])}},{"./lib/is-bn":10}],7:[function(a,e,g){var q=
a("bn.js");e.exports=function(a){return a.cmp(new q(0))}},{"bn.js":20}],8:[function(a,e,g){e.exports=function(a){var l=a.length,d=a.words,b=0;if(1===l)b=d[0];else if(2===l)b=d[0]+67108864*d[1];else for(var t=b=0;t<l;t++)b+=d[t]*Math.pow(67108864,t);return a.sign?-b:b}},{}],9:[function(a,e,g){var q=a("double-bits"),l=a("bit-twiddle").countTrailingZeros;e.exports=function(d){var b=l(q.lo(d));if(32>b)return b;d=l(q.hi(d));return 20<d?52:d+32}},{"bit-twiddle":19,"double-bits":42}],10:[function(a,e,g){a("bn.js");
e.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":20}],11:[function(a,e,g){var q=a("bn.js"),l=a("double-bits");e.exports=function(d){var b=l.exponent(d);return 52>b?new q(d):(new q(d*Math.pow(2,52-b))).shln(b-52)}},{"bn.js":20,"double-bits":42}],12:[function(a,e,g){var q=a("./num-to-bn"),l=a("./bn-sign");e.exports=function(d,b){var a=l(d),p=l(b);if(0===a)return[q(0),q(1)];if(0===p)return[q(0),q(0)];0>p&&(d=d.neg(),b=b.neg());a=d.gcd(b);return a.cmpn(1)?[d.div(a),b.div(a)]:
[d,b]}},{"./bn-sign":7,"./num-to-bn":11}],13:[function(a,e,g){var q=a("bn.js");e.exports=function(a){return new q(a)}},{"bn.js":20}],14:[function(a,e,g){var q=a("./lib/rationalize");e.exports=function(a,d){return q(a[0].mul(d[0]),a[1].mul(d[1]))}},{"./lib/rationalize":12}],15:[function(a,e,g){var q=a("./lib/bn-sign");e.exports=function(a){return q(a[0])*q(a[1])}},{"./lib/bn-sign":7}],16:[function(a,e,g){var q=a("./lib/rationalize");e.exports=function(a,d){return q(a[0].mul(d[1]).sub(a[1].mul(d[0])),
a[1].mul(d[1]))}},{"./lib/rationalize":12}],17:[function(a,e,g){var q=a("./lib/bn-to-num"),l=a("./lib/ctz");e.exports=function(d){var b=d[0];d=d[1];if(0===b.cmpn(0))return 0;var a=b.divmod(d),b=q(a.div),a=a.mod;if(0===a.cmpn(0))return b;if(b){var p=l(b)+4;d=q(a.shln(p).divRound(d));0>b&&(d=-d);return b+d*Math.pow(2,-p)}b=d.bitLength()-a.bitLength()+53;d=q(a.shln(b).divRound(d));if(1023>b)return d*Math.pow(2,-b);d*=Math.pow(2,-1023);return d*Math.pow(2,1023-b)}},{"./lib/bn-to-num":8,"./lib/ctz":9}],
18:[function(a,e,g){function q(d,b,a,p,l){d=["function ",d,"(a,l,h,",p.join(","),"){",l?"":"var i=",a?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];l?0>b.indexOf("c")?d.push(";if(x===y){return m}else if(x<=y){"):d.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):d.push(";if(",b,"){i=m;");a?d.push("l=m+1}else{h=m-1}"):d.push("h=m-1}else{l=m+1}");d.push("}");l?d.push("return -1};"):d.push("return i};");return d.join("")}function l(d,b,a,p){return(new Function([q("A","x"+d+"y",b,["y"],p),
q("P","c(x,y)"+d+"0",b,["y","c"],p),"function dispatchBsearch",a,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",a].join("")))()}e.exports={ge:l(">=",!1,"GE"),gt:l(">",!1,"GT"),lt:l("<",!0,"LT"),le:l("<=",!0,"LE"),eq:l("-",!0,"EQ",!0)}},{}],19:[function(a,e,g){function q(d){var b=32;(d&=-d)&&b--;d&65535&&(b-=16);d&16711935&&(b-=8);d&252645135&&(b-=4);d&
858993459&&(b-=2);d&1431655765&&--b;return b}"use restrict";g.INT_BITS=32;g.INT_MAX=2147483647;g.INT_MIN=-2147483648;g.sign=function(d){return(0<d)-(0>d)};g.abs=function(d){var b=d>>31;return(d^b)-b};g.min=function(d,b){return b^(d^b)&-(d<b)};g.max=function(d,b){return d^(d^b)&-(d<b)};g.isPow2=function(d){return!(d&d-1)&&!!d};g.log2=function(d){var b,a;b=(65535<d)<<4;d>>>=b;a=(255<d)<<3;d>>>=a;b|=a;a=(15<d)<<2;d>>>=a;b|=a;a=(3<d)<<1;return b|a|d>>>a>>1};g.log10=function(d){return 1E9<=d?9:1E8<=d?
8:1E7<=d?7:1E6<=d?6:1E5<=d?5:1E4<=d?4:1E3<=d?3:100<=d?2:10<=d?1:0};g.popCount=function(d){d-=d>>>1&1431655765;d=(d&858993459)+(d>>>2&858993459);return 16843009*(d+(d>>>4)&252645135)>>>24};g.countTrailingZeros=q;g.nextPow2=function(d){d+=0===d;--d;d|=d>>>1;d|=d>>>2;d|=d>>>4;d|=d>>>8;return(d|d>>>16)+1};g.prevPow2=function(d){d|=d>>>1;d|=d>>>2;d|=d>>>4;d|=d>>>8;d|=d>>>16;return d-(d>>>1)};g.parity=function(d){d^=d>>>16;d^=d>>>8;d=(d^d>>>4)&15;return 27030>>>d&1};var l=Array(256);(function(d){for(var b=
0;256>b;++b){for(var a=b,p=b,l=7,a=a>>>1;a;a>>>=1)p<<=1,p|=a&1,--l;d[b]=p<<l&255}})(l);g.reverse=function(d){return l[d&255]<<24|l[d>>>8&255]<<16|l[d>>>16&255]<<8|l[d>>>24&255]};g.interleave2=function(d,b){d&=65535;d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;b&=65535;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(d|d<<1)&1431655765|((b|b<<1)&1431655765)<<1};g.deinterleave2=function(d,b){d=d>>>b&1431655765;d=(d|d>>>1)&858993459;d=(d|d>>>2)&252645135;d=(d|d>>>
4)&16711935;return((d|d>>>16)&65535)<<16>>16};g.interleave3=function(d,b,a){d&=1023;d=(d|d<<16)&4278190335;d=(d|d<<8)&251719695;d=(d|d<<4)&3272356035;b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;d=(d|d<<2)&1227133513|((b|b<<2)&1227133513)<<1;a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;return d|((a|a<<2)&1227133513)<<2};g.deinterleave3=function(d,b){d=d>>>b&1227133513;d=(d|d>>>2)&3272356035;d=(d|d>>>4)&251719695;d=(d|d>>>8)&4278190335;return((d|
d>>>16)&1023)<<22>>22};g.nextCombination=function(d){var b=d|d-1;return b+1|(~b&-~b)-1>>>q(d)+1}},{}],20:[function(a,e,g){(function(a,l){function d(v,d){if(!v)throw Error(d||"Assertion failed");}function b(v,d){v.super_=d;var c=function(){};c.prototype=d.prototype;v.prototype=new c;v.prototype.constructor=v}function t(v,d,c){if(null!==v&&"object"===typeof v&&Array.isArray(v.words))return v;this.sign=!1;this.words=null;this.length=0;this.red=null;if("le"===d||"be"===d)c=d,d=10;null!==v&&this._init(v||
0,d||10,c||"be")}function p(v,d,c){var f=0;for(c=Math.min(v.length,c);d<c;d++)var b=v.charCodeAt(d)-48,f=f<<4,f=49<=b&&54>=b?f|b-49+10:17<=b&&22>=b?f|b-17+10:f|b&15;return f}function w(v,d,c,f){var b=0;for(c=Math.min(v.length,c);d<c;d++)var a=v.charCodeAt(d)-48,b=b*f,b=49<=a?b+(a-49+10):17<=a?b+(a-17+10):b+a;return b}function x(v,d){this.name=v;this.p=new t(d,16);this.n=this.p.bitLength();this.k=(new t(1)).ishln(this.n).isub(this.p);this.tmp=this._tmp()}function u(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}
function n(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function h(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function c(v){"string"===typeof v?(v=t._prime(v),this.m=v.p,this.prime=v):(this.m=v,this.prime=null)}function f(v){c.call(this,v);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);
this.r=(new t(1)).ishln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"===typeof a?a.exports=t:l.BN=t;t.BN=t;t.wordSize=26;t.prototype._init=function(v,b,c){if("number"===typeof v)return this._initNumber(v,b,c);if("object"===typeof v)return this._initArray(v,b,c);"hex"===b&&(b=16);d(b===(b|0)&&2<=b&&36>=b);v=v.toString().replace(/\s+/g,"");var f=0;"-"===v[0]&&
f++;16===b?this._parseHex(v,f):this._parseBase(v,b,f);"-"===v[0]&&(this.sign=!0);this.strip();"le"===c&&this._initArray(this.toArray(),b,c)};t.prototype._initNumber=function(v,b,c){0>v&&(this.sign=!0,v=-v);67108864>v?(this.words=[v&67108863],this.length=1):4503599627370496>v?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(d(9007199254740992>v),this.words=[v&67108863,v/67108864&67108863,1],this.length=3);"le"===c&&this._initArray(this.toArray(),b,c)};t.prototype._initArray=function(v,
b,c){d("number"===typeof v.length);if(0>=v.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3);this.words=Array(this.length);for(b=0;b<this.length;b++)this.words[b]=0;var f=0;if("be"===c)for(b=v.length-1,c=0;0<=b;b-=3){var a=v[b]|v[b-1]<<8|v[b-2]<<16;this.words[c]|=a<<f&67108863;this.words[c+1]=a>>>26-f&67108863;f+=24;26<=f&&(f-=26,c++)}else if("le"===c)for(c=b=0;b<v.length;b+=3)a=v[b]|v[b+1]<<8|v[b+2]<<16,this.words[c]|=a<<f&67108863,this.words[c+1]=a>>>26-f&67108863,
f+=24,26<=f&&(f-=26,c++);return this.strip()};t.prototype._parseHex=function(v,b){this.length=Math.ceil((v.length-b)/6);this.words=Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;for(var d=0,c=v.length-6,f=0;c>=b;c-=6){var a=p(v,c,c+6);this.words[f]|=a<<d&67108863;this.words[f+1]|=a>>>26-d&4194303;d+=24;26<=d&&(d-=26,f++)}c+6!==b&&(a=p(v,b,c+6),this.words[f]|=a<<d&67108863,this.words[f+1]|=a>>>26-d&4194303);this.strip()};t.prototype._parseBase=function(v,b,c){this.words=[0];this.length=
1;for(var d=0,f=1;67108863>=f;f*=b)d++;d--;for(var f=f/b|0,a=v.length-c,m=a%d,k=Math.min(a,a-m)+c,a=0;c<k;c+=d)a=w(v,c,c+d,b),this.imuln(f),67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a);if(0!==m){d=1;a=w(v,c,v.length,b);for(c=0;c<m;c++)d*=b;this.imuln(d);67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a)}};t.prototype.copy=function(v){v.words=Array(this.length);for(var c=0;c<this.length;c++)v.words[c]=this.words[c];v.length=this.length;v.sign=this.sign;v.red=this.red};t.prototype.clone=
function(){var v=new t(null);this.copy(v);return v};t.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};t.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.sign=!1);return this};t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
r=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];t.prototype.toString=function(v,c){v=v||10;if(16===v||"hex"===v){var b="",f=0;c=c|0||1;for(var a=0,k=0;k<this.length;k++){var h=
this.words[k],p=((h<<f|a)&16777215).toString(16),a=h>>>24-f&16777215,b=0!==a||k!==this.length-1?m[6-p.length]+p+b:p+b,f=f+2;26<=f&&(f-=26,k--)}for(0!==a&&(b=a.toString(16)+b);0!==b.length%c;)b="0"+b;this.sign&&(b="-"+b);return b}if(v===(v|0)&&2<=v&&36>=v){f=r[v];a=z[v];b="";k=this.clone();for(k.sign=!1;0!==k.cmpn(0);)h=k.modn(a).toString(v),k=k.idivn(a),b=0!==k.cmpn(0)?m[f-h.length]+h+b:h+b;0===this.cmpn(0)&&(b="0"+b);this.sign&&(b="-"+b);return b}d(!1,"Base should be between 2 and 36")};t.prototype.toJSON=
function(){return this.toString(16)};t.prototype.toArray=function(v){this.strip();var b=Array(this.byteLength());b[0]=0;var c=this.clone();if("le"!==v)for(v=0;0!==c.cmpn(0);v++){var f=c.andln(255);c.ishrn(8);b[b.length-v-1]=f}else for(v=0;0!==c.cmpn(0);v++)f=c.andln(255),c.ishrn(8),b[v]=f;return b};t.prototype._countBits=Math.clz32?function(v){return 32-Math.clz32(v)}:function(v){var b=0;4096<=v&&(b+=13,v>>>=13);64<=v&&(b+=7,v>>>=7);8<=v&&(b+=4,v>>>=4);2<=v&&(b+=2,v>>>=2);return b+v};t.prototype._zeroBits=
function(v){if(0===v)return 26;var b=0;0===(v&8191)&&(b+=13,v>>>=13);0===(v&127)&&(b+=7,v>>>=7);0===(v&15)&&(b+=4,v>>>=4);0===(v&3)&&(b+=2,v>>>=2);0===(v&1)&&b++;return b};t.prototype.bitLength=function(){var v=0,v=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+v};t.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var v=0,b=0;b<this.length;b++){var c=this._zeroBits(this.words[b]),v=v+c;if(26!==c)break}return v};t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/
8)};t.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var v=this.clone();v.sign=!this.sign;return v};t.prototype.ior=function(v){for(this.sign=this.sign||v.sign;this.length<v.length;)this.words[this.length++]=0;for(var b=0;b<v.length;b++)this.words[b]|=v.words[b];return this.strip()};t.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)};t.prototype.iand=function(v){this.sign=this.sign&&v.sign;var b;b=this.length>v.length?v:this;for(var c=
0;c<b.length;c++)this.words[c]&=v.words[c];this.length=b.length;return this.strip()};t.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)};t.prototype.ixor=function(v){this.sign=this.sign||v.sign;var b;this.length>v.length?b=this:(b=v,v=this);for(var c=0;c<v.length;c++)this.words[c]=b.words[c]^v.words[c];if(this!==b)for(;c<b.length;c++)this.words[c]=b.words[c];this.length=b.length;return this.strip()};t.prototype.xor=function(v){return this.length>v.length?
this.clone().ixor(v):v.clone().ixor(this)};t.prototype.setn=function(v,b){d("number"===typeof v&&0<=v);for(var c=v/26|0,f=v%26;this.length<=c;)this.words[this.length++]=0;this.words[c]=b?this.words[c]|1<<f:this.words[c]&~(1<<f);return this.strip()};t.prototype.iadd=function(v){if(this.sign&&!v.sign){this.sign=!1;var b=this.isub(v);this.sign=!this.sign;return this._normSign()}if(!this.sign&&v.sign)return v.sign=!1,b=this.isub(v),v.sign=!0,b._normSign();var c;this.length>v.length?c=this:(c=v,v=this);
for(var f=b=0;f<v.length;f++)b=c.words[f]+v.words[f]+b,this.words[f]=b&67108863,b>>>=26;for(;0!==b&&f<c.length;f++)b=c.words[f]+b,this.words[f]=b&67108863,b>>>=26;this.length=c.length;if(0!==b)this.words[this.length]=b,this.length++;else if(c!==this)for(;f<c.length;f++)this.words[f]=c.words[f];return this};t.prototype.add=function(v){if(v.sign&&!this.sign){v.sign=!1;var b=this.sub(v);v.sign=!0;return b}return!v.sign&&this.sign?(this.sign=!1,b=v.sub(this),this.sign=!0,b):this.length>v.length?this.clone().iadd(v):
v.clone().iadd(this)};t.prototype.isub=function(v){if(v.sign){v.sign=!1;var b=this.iadd(v);v.sign=!0;return b._normSign()}if(this.sign)return this.sign=!1,this.iadd(v),this.sign=!0,this._normSign();b=this.cmp(v);if(0===b)return this.sign=!1,this.length=1,this.words[0]=0,this;var c;0<b?c=this:(c=v,v=this);for(var f=0,d=0;d<v.length;d++)b=c.words[d]-v.words[d]+f,f=b>>26,this.words[d]=b&67108863;for(;0!==f&&d<c.length;d++)b=c.words[d]+f,f=b>>26,this.words[d]=b&67108863;if(0===f&&d<c.length&&c!==this)for(;d<
c.length;d++)this.words[d]=c.words[d];this.length=Math.max(this.length,d);c!==this&&(this.sign=!0);return this.strip()};t.prototype.sub=function(v){return this.clone().isub(v)};t.prototype._smallMulTo=function(v,b){b.sign=v.sign!==this.sign;b.length=this.length+v.length;for(var c=0,f=0;f<b.length-1;f++){for(var d=c>>>26,c=c&67108863,a=Math.min(f,v.length-1),m=Math.max(0,f-this.length+1);m<=a;m++)var k=(this.words[f-m]|0)*(v.words[m]|0),r=k&67108863,d=d+(k/67108864|0)|0,r=r+c|0,c=r&67108863,d=d+(r>>>
26)|0;b.words[f]=c;c=d}0!==c?b.words[f]=c:b.length--;return b.strip()};t.prototype._bigMulTo=function(v,b){b.sign=v.sign!==this.sign;b.length=this.length+v.length;for(var c=0,f=0,d=0;d<b.length-1;d++){for(var a=f,f=0,c=c&67108863,m=Math.min(d,v.length-1),k=Math.max(0,d-this.length+1);k<=m;k++)var r=(this.words[d-k]|0)*(v.words[k]|0),h=r&67108863,a=a+(r/67108864|0)|0,h=h+c|0,c=h&67108863,a=a+(h>>>26)|0,f=f+(a>>>26),a=a&67108863;b.words[d]=c;c=a}0!==c?b.words[d]=c:b.length--;return b.strip()};t.prototype.mulTo=
function(b,c){return 63>this.length+b.length?this._smallMulTo(b,c):this._bigMulTo(b,c)};t.prototype.mul=function(b){var c=new t(null);c.words=Array(this.length+b.length);return this.mulTo(b,c)};t.prototype.imul=function(b){if(0===this.cmpn(0)||0===b.cmpn(0))return this.words[0]=0,this.length=1,this;var c=this.length,f=b.length;this.sign=b.sign!==this.sign;this.length+=b.length;this.words[this.length-1]=0;for(var d=this.length-2;0<=d;d--){for(var a=0,m=0,k=Math.min(d,f-1),r=Math.max(0,d-c+1);r<=k;r++)var h=
d-r,h=this.words[h]*b.words[r],p=h&67108863,a=a+(h/67108864|0),p=p+m,m=p&67108863,a=a+(p>>>26);this.words[d]=m;this.words[d+1]+=a}a=0;for(h=1;h<this.length;h++)b=this.words[h]+a,this.words[h]=b&67108863,a=b>>>26;return this.strip()};t.prototype.imuln=function(b){d("number"===typeof b);for(var c=0,f=0;f<this.length;f++){var a=this.words[f]*b,m=(a&67108863)+(c&67108863),c=c>>26,c=c+(a/67108864|0),c=c+(m>>>26);this.words[f]=m&67108863}0!==c&&(this.words[f]=c,this.length++);return this};t.prototype.muln=
function(b){return this.clone().imuln(b)};t.prototype.sqr=function(){return this.mul(this)};t.prototype.isqr=function(){return this.mul(this)};t.prototype.ishln=function(b){d("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;var f=67108863>>>26-c<<26-c;if(0!==c){for(var a=0,m=0;m<this.length;m++){var k=this.words[m]&f;this.words[m]=this.words[m]-k<<c|a;a=k>>>26-c}a&&(this.words[m]=a,this.length++)}if(0!==b){for(m=this.length-1;0<=m;m--)this.words[m+b]=this.words[m];for(m=0;m<b;m++)this.words[m]=0;
this.length+=b}return this.strip()};t.prototype.ishrn=function(b,c,f){d("number"===typeof b&&0<=b);var a=b%26,m=Math.min((b-a)/26,this.length);b=67108863^67108863>>>a<<a;c=(c?(c-c%26)/26:0)-m;c=Math.max(0,c);if(f){for(var k=0;k<m;k++)f.words[k]=this.words[k];f.length=m}if(0!==m)if(this.length>m)for(this.length-=m,k=0;k<this.length;k++)this.words[k]=this.words[k+m];else this.words[0]=0,this.length=1;m=0;for(k=this.length-1;0<=k&&(0!==m||k>=c);k--){var r=this.words[k];this.words[k]=m<<26-a|r>>>a;m=
r&b}f&&0!==m&&(f.words[f.length++]=m);0===this.length&&(this.words[0]=0,this.length=1);this.strip();return this};t.prototype.shln=function(b){return this.clone().ishln(b)};t.prototype.shrn=function(b){return this.clone().ishrn(b)};t.prototype.testn=function(b){d("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;return this.length<=b?!1:!!(this.words[b]&1<<c)};t.prototype.imaskn=function(b){d("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;d(!this.sign,"imaskn works only with positive numbers");0!==
c&&b++;this.length=Math.min(b,this.length);0!==c&&(this.words[this.length-1]&=67108863^67108863>>>c<<c);return this.strip()};t.prototype.maskn=function(b){return this.clone().imaskn(b)};t.prototype.iaddn=function(b){d("number"===typeof b);if(0>b)return this.isubn(-b);if(this.sign){if(1===this.length&&this.words[0]<b)return this.words[0]=b-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(b);this.sign=!0;return this}return this._iaddn(b)};t.prototype._iaddn=function(b){this.words[0]+=b;for(b=
0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;this.length=Math.max(this.length,b+1);return this};t.prototype.isubn=function(b){d("number"===typeof b);if(0>b)return this.iaddn(-b);if(this.sign)return this.sign=!1,this.iaddn(b),this.sign=!0,this;this.words[0]-=b;for(b=0;b<this.length&&0>this.words[b];b++)this.words[b]+=67108864,--this.words[b+1];return this.strip()};t.prototype.addn=function(b){return this.clone().iaddn(b)};
t.prototype.subn=function(b){return this.clone().isubn(b)};t.prototype.iabs=function(){this.sign=!1;return this};t.prototype.abs=function(){return this.clone().iabs()};t.prototype._ishlnsubmul=function(b,c,f){var a=b.length+f,m;if(this.words.length<a){var k=Array(a);for(m=0;m<this.length;m++)k[m]=this.words[m];this.words=k}else m=this.length;for(this.length=Math.max(this.length,a);m<this.length;m++)this.words[m]=0;for(m=k=0;m<b.length;m++)a=this.words[m+f]+k,k=b.words[m]*c,a-=k&67108863,k=(a>>26)-
(k/67108864|0),this.words[m+f]=a&67108863;for(;m<this.length-f;m++)a=this.words[m+f]+k,k=a>>26,this.words[m+f]=a&67108863;if(0===k)return this.strip();d(-1===k);for(m=k=0;m<this.length;m++)a=-this.words[m]+k,k=a>>26,this.words[m]=a&67108863;this.sign=!0;return this.strip()};t.prototype._wordDiv=function(b,c){var f=this.length-b.length,d=this.clone(),a=b,m=a.words[a.length-1],f=26-this._countBits(m);0!==f&&(a=a.shln(f),d.ishln(f),m=a.words[a.length-1]);var k=d.length-a.length,r;if("mod"!==c){r=new t(null);
r.length=k+1;r.words=Array(r.length);for(var h=0;h<r.length;h++)r.words[h]=0}h=d.clone()._ishlnsubmul(a,1,k);h.sign||(d=h,r&&(r.words[k]=1));for(--k;0<=k;k--){h=67108864*d.words[a.length+k]+d.words[a.length+k-1];h=Math.min(h/m|0,67108863);for(d._ishlnsubmul(a,h,k);d.sign;)h--,d.sign=!1,d._ishlnsubmul(a,1,k),0!==d.cmpn(0)&&(d.sign=!d.sign);r&&(r.words[k]=h)}r&&r.strip();d.strip();"div"!==c&&0!==f&&d.ishrn(f);return{div:r?r:null,mod:d}};t.prototype.divmod=function(b,c){d(0!==b.cmpn(0));if(this.sign&&
!b.sign){var f=this.neg().divmod(b,c),a,m;"mod"!==c&&(a=f.div.neg());"div"!==c&&(m=0===f.mod.cmpn(0)?f.mod:b.sub(f.mod));return{div:a,mod:m}}return!this.sign&&b.sign?(f=this.divmod(b.neg(),c),"mod"!==c&&(a=f.div.neg()),{div:a,mod:f.mod}):this.sign&&b.sign?this.neg().divmod(b.neg(),c):b.length>this.length||0>this.cmp(b)?{div:new t(0),mod:this}:1===b.length?"div"===c?{div:this.divn(b.words[0]),mod:null}:"mod"===c?{div:null,mod:new t(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new t(this.modn(b.words[0]))}:
this._wordDiv(b,c)};t.prototype.div=function(b){return this.divmod(b,"div").div};t.prototype.mod=function(b){return this.divmod(b,"mod").mod};t.prototype.divRound=function(b){var c=this.divmod(b);if(0===c.mod.cmpn(0))return c.div;var f=c.div.sign?c.mod.isub(b):c.mod,d=b.shrn(1);b=b.andln(1);f=f.cmp(d);return 0>f||1===b&&0===f?c.div:c.div.sign?c.div.isubn(1):c.div.iaddn(1)};t.prototype.modn=function(b){d(67108863>=b);for(var c=67108864%b,f=0,a=this.length-1;0<=a;a--)f=(c*f+this.words[a])%b;return f};
t.prototype.idivn=function(b){d(67108863>=b);for(var c=0,f=this.length-1;0<=f;f--)c=this.words[f]+67108864*c,this.words[f]=c/b|0,c%=b;return this.strip()};t.prototype.divn=function(b){return this.clone().idivn(b)};t.prototype.egcd=function(b){d(!b.sign);d(0!==b.cmpn(0));var c=this,f=b.clone(),c=c.sign?c.mod(b):c.clone();b=new t(1);for(var a=new t(0),m=new t(0),k=new t(1),r=0;c.isEven()&&f.isEven();)c.ishrn(1),f.ishrn(1),++r;for(var h=f.clone(),p=c.clone();0!==c.cmpn(0);){for(;c.isEven();)c.ishrn(1),
b.isEven()&&a.isEven()?(b.ishrn(1),a.ishrn(1)):(b.iadd(h).ishrn(1),a.isub(p).ishrn(1));for(;f.isEven();)f.ishrn(1),m.isEven()&&k.isEven()?(m.ishrn(1),k.ishrn(1)):(m.iadd(h).ishrn(1),k.isub(p).ishrn(1));0<=c.cmp(f)?(c.isub(f),b.isub(m),a.isub(k)):(f.isub(c),m.isub(b),k.isub(a))}return{a:m,b:k,gcd:f.ishln(r)}};t.prototype._invmp=function(b){d(!b.sign);d(0!==b.cmpn(0));var c=this,f=b.clone(),c=c.sign?c.mod(b):c.clone();b=new t(1);for(var a=new t(0),m=f.clone();0<c.cmpn(1)&&0<f.cmpn(1);){for(;c.isEven();)c.ishrn(1),
b.isEven()?b.ishrn(1):b.iadd(m).ishrn(1);for(;f.isEven();)f.ishrn(1),a.isEven()?a.ishrn(1):a.iadd(m).ishrn(1);0<=c.cmp(f)?(c.isub(f),b.isub(a)):(f.isub(c),a.isub(b))}return 0===c.cmpn(1)?b:a};t.prototype.gcd=function(b){if(0===this.cmpn(0))return b.clone();if(0===b.cmpn(0))return this.clone();var c=this.clone();b=b.clone();c.sign=!1;b.sign=!1;for(var f=0;c.isEven()&&b.isEven();f++)c.ishrn(1),b.ishrn(1);do{for(;c.isEven();)c.ishrn(1);for(;b.isEven();)b.ishrn(1);var d=c.cmp(b);if(0>d)d=c,c=b,b=d;else if(0===
d||0===b.cmpn(1))break;c.isub(b)}while(1);return b.ishln(f)};t.prototype.invm=function(b){return this.egcd(b).a.mod(b)};t.prototype.isEven=function(){return 0===(this.words[0]&1)};t.prototype.isOdd=function(){return 1===(this.words[0]&1)};t.prototype.andln=function(b){return this.words[0]&b};t.prototype.bincn=function(b){d("number"===typeof b);var c=b%26;b=(b-c)/26;var f=1<<c;if(this.length<=b){for(c=this.length;c<b+1;c++)this.words[c]=0;this.words[b]|=f;this.length=b+1;return this}for(c=b;0!==f&&
c<this.length;c++)b=this.words[c],b+=f,f=b>>>26,b&=67108863,this.words[c]=b;0!==f&&(this.words[c]=f,this.length++);return this};t.prototype.cmpn=function(b){var c=0>b;c&&(b=-b);if(this.sign&&!c)return-1;if(!this.sign&&c)return 1;b&=67108863;this.strip();1<this.length?b=1:(c=this.words[0],b=c===b?0:c<b?-1:1);this.sign&&(b=-b);return b};t.prototype.cmp=function(b){if(this.sign&&!b.sign)return-1;if(!this.sign&&b.sign)return 1;b=this.ucmp(b);return this.sign?-b:b};t.prototype.ucmp=function(b){if(this.length>
b.length)return 1;if(this.length<b.length)return-1;for(var c=0,f=this.length-1;0<=f;f--){var d=this.words[f],a=b.words[f];if(d!==a){d<a?c=-1:d>a&&(c=1);break}}return c};t.red=function(b){return new c(b)};t.prototype.toRed=function(b){d(!this.red,"Already a number in reduction context");d(!this.sign,"red works only with positives");return b.convertTo(this)._forceRed(b)};t.prototype.fromRed=function(){d(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
t.prototype._forceRed=function(b){this.red=b;return this};t.prototype.forceRed=function(b){d(!this.red,"Already a number in reduction context");return this._forceRed(b)};t.prototype.redAdd=function(b){d(this.red,"redAdd works only with red numbers");return this.red.add(this,b)};t.prototype.redIAdd=function(b){d(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,b)};t.prototype.redSub=function(b){d(this.red,"redSub works only with red numbers");return this.red.sub(this,b)};t.prototype.redISub=
function(b){d(this.red,"redISub works only with red numbers");return this.red.isub(this,b)};t.prototype.redShl=function(b){d(this.red,"redShl works only with red numbers");return this.red.shl(this,b)};t.prototype.redMul=function(b){d(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.mul(this,b)};t.prototype.redIMul=function(b){d(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.imul(this,b)};t.prototype.redSqr=function(){d(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};t.prototype.redISqr=function(){d(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};t.prototype.redSqrt=function(){d(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};t.prototype.redInvm=function(){d(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};t.prototype.redNeg=
function(){d(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};t.prototype.redPow=function(b){d(this.red&&!b.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,b)};var D={k256:null,p224:null,p192:null,p25519:null};x.prototype._tmp=function(){var b=new t(null);b.words=Array(Math.ceil(this.n/13));return b};x.prototype.ireduce=function(b){var c;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),c=b.bitLength();while(c>this.n);
c=c<this.n?-1:b.ucmp(this.p);0===c?(b.words[0]=0,b.length=1):0<c?b.isub(this.p):b.strip();return b};x.prototype.split=function(b,c){b.ishrn(this.n,0,c)};x.prototype.imulK=function(b){return b.imul(this.k)};b(u,x);u.prototype.split=function(b,c){for(var f=Math.min(b.length,9),d=0;d<f;d++)c.words[d]=b.words[d];c.length=f;if(9>=b.length)b.words[0]=0,b.length=1;else{f=b.words[9];c.words[c.length++]=f&4194303;for(d=10;d<b.length;d++){var a=b.words[d];b.words[d-10]=(a&4194303)<<4|f>>>22;f=a}b.words[d-10]=
f>>>22;b.length-=9}};u.prototype.imulK=function(b){b.words[b.length]=0;b.words[b.length+1]=0;b.length+=2;for(var c,f=0,d=0;d<b.length;d++){var a=b.words[d];c=64*a;f+=977*a;c+=f/67108864|0;f&=67108863;b.words[d]=f;f=c}0===b.words[b.length-1]&&(b.length--,0===b.words[b.length-1]&&b.length--);return b};b(n,x);b(h,x);b(k,x);k.prototype.imulK=function(b){for(var c=0,f=0;f<b.length;f++){var c=19*b.words[f]+c,d=c&67108863,c=c>>>26;b.words[f]=d}0!==c&&(b.words[b.length++]=c);return b};t._prime=function(b){if(D[b])return D[b];
var c;if("k256"===b)c=new u;else if("p224"===b)c=new n;else if("p192"===b)c=new h;else if("p25519"===b)c=new k;else throw Error("Unknown prime "+b);return D[b]=c};c.prototype._verify1=function(b){d(!b.sign,"red works only with positives");d(b.red,"red works only with red numbers")};c.prototype._verify2=function(b,c){d(!b.sign&&!c.sign,"red works only with positives");d(b.red&&b.red===c.red,"red works only with red numbers")};c.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):
b.mod(this.m)._forceRed(this)};c.prototype.neg=function(b){b=b.clone();b.sign=!b.sign;return b.iadd(this.m)._forceRed(this)};c.prototype.add=function(b,c){this._verify2(b,c);var f=b.add(c);0<=f.cmp(this.m)&&f.isub(this.m);return f._forceRed(this)};c.prototype.iadd=function(b,c){this._verify2(b,c);var f=b.iadd(c);0<=f.cmp(this.m)&&f.isub(this.m);return f};c.prototype.sub=function(b,c){this._verify2(b,c);var f=b.sub(c);0>f.cmpn(0)&&f.iadd(this.m);return f._forceRed(this)};c.prototype.isub=function(b,
c){this._verify2(b,c);var f=b.isub(c);0>f.cmpn(0)&&f.iadd(this.m);return f};c.prototype.shl=function(b,c){this._verify1(b);return this.imod(b.shln(c))};c.prototype.imul=function(b,c){this._verify2(b,c);return this.imod(b.imul(c))};c.prototype.mul=function(b,c){this._verify2(b,c);return this.imod(b.mul(c))};c.prototype.isqr=function(b){return this.imul(b,b)};c.prototype.sqr=function(b){return this.mul(b,b)};c.prototype.sqrt=function(b){if(0===b.cmpn(0))return b.clone();var c=this.m.andln(3);d(1===
c%2);if(3===c){var c=this.m.add(new t(1)).ishrn(2),f=this.pow(b,c);return f}for(var a=this.m.subn(1),m=0;0!==a.cmpn(0)&&0===a.andln(1);)m++,a.ishrn(1);d(0!==a.cmpn(0));for(var c=(new t(1)).toRed(this),f=c.redNeg(),k=this.m.subn(1).ishrn(1),r=this.m.bitLength(),r=(new t(2*r*r)).toRed(this);0!==this.pow(r,k).cmp(f);)r.redIAdd(f);k=this.pow(r,a);f=this.pow(b,a.addn(1).ishrn(1));b=this.pow(b,a);for(a=m;0!==b.cmp(c);){r=b;for(m=0;0!==r.cmp(c);m++)r=r.redSqr();d(m<a);k=this.pow(k,(new t(1)).ishln(a-m-1));
f=f.redMul(k);k=k.redSqr();b=b.redMul(k);a=m}return f};c.prototype.invm=function(b){b=b._invmp(this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)};c.prototype.pow=function(b,c){var f=[];if(0===c.cmpn(0))return new t(1);for(var d=c.clone();0!==d.cmpn(0);)f.push(d.andln(1)),d.ishrn(1);for(var a=b,m=0;m<f.length&&0===f[m];m++,a=this.sqr(a));if(++m<f.length)for(d=this.sqr(a);m<f.length;m++,d=this.sqr(d))0!==f[m]&&(a=this.mul(a,d));return a};c.prototype.convertTo=function(b){var c=b.mod(this.m);
return c===b?c.clone():c};c.prototype.convertFrom=function(b){b=b.clone();b.red=null;return b};t.mont=function(b){return new f(b)};b(f,c);f.prototype.convertTo=function(b){return this.imod(b.shln(this.shift))};f.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));b.red=null;return b};f.prototype.imul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return b.words[0]=0,b.length=1,b;var f=b.imul(c),d=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=f=f.isub(d).ishrn(this.shift);
0<=f.cmp(this.m)?d=f.isub(this.m):0>f.cmpn(0)&&(d=f.iadd(this.m));return d._forceRed(this)};f.prototype.mul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return(new t(0))._forceRed(this);var f=b.mul(c),d=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=f=f.isub(d).ishrn(this.shift);0<=f.cmp(this.m)?d=f.isub(this.m):0>f.cmpn(0)&&(d=f.iadd(this.m));return d._forceRed(this)};f.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof e||e,this)},{}],21:[function(a,e,g){function q(b,d,a,h){for(var k=0,c=0,f=0,m=b.length;f<m;++f){var r=b[f],p;a:{for(p=0;p<d;++p)if(!(r[p]<=r[p+d])){p=!0;break a}p=!1}if(!p){for(p=0;p<2*d;++p)a[k++]=r[p];h[c++]=f}}return c}function l(d,a,n,h){var k=d.length,c=a.length;if(!(0>=k||0>=c)){var f=d[0].length>>>1;if(!(0>=f)){var m,r=b.mallocDouble(2*f*k),l=b.mallocInt32(k),k=q(d,f,r,l);if(0<k){if(1===f&&h)t.init(k),m=t.sweepComplete(f,n,0,k,r,l,0,k,r,l);else{d=b.mallocDouble(2*f*c);var w=b.mallocInt32(c),
c=q(a,f,d,w);0<c&&(t.init(k+c),m=1===f?t.sweepBipartite(f,n,0,k,r,l,0,c,d,w):p(f,n,h,k,r,l,c,d,w),b.free(d),b.free(w))}b.free(r);b.free(l)}return m}}}function d(b,d){w.push([b,d])}e.exports=function(b,a,p){switch(arguments.length){case 1:return w=[],l(b,b,d,!0),w;case 2:if("function"===typeof a)return l(b,b,a,!0);w=[];l(b,a,d,!1);return w;case 3:return l(b,a,p,!1);default:throw Error("box-intersect: Invalid arguments");}};var b=a("typedarray-pool"),t=a("./lib/sweep"),p=a("./lib/intersect"),w},{"./lib/intersect":23,
"./lib/sweep":27,"typedarray-pool":90}],22:[function(a,e,g){function q(d){function b(b,a){var h,k="bruteForce"+(b?"Red":"Blue")+(a?"Flip":"")+(d?"Full":"");h=["function ",k,"(",l.join(),"){","var ","es","=2*","d",";"];var c="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(d?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";b?h.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",c):h.push(c,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");
d?h.push("if(y1<x0||x1<y0)continue;"):a?h.push("if(y0<=x0||x1<y0)continue;"):h.push("if(y0<x0||x1<y0)continue;");h.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");a?h.push("yi,xi"):h.push("xi,yi");h.push(");if(rv!==void 0)return rv;}}}");h=h.join("");p.push(h);x.push("return "+k+"("+l.join()+");")}var a="bruteForce"+(d?"Full":"Partial"),p=[],w=l.slice();d||w.splice(3,0,"fp");var x=["function "+a+"("+w.join()+"){"];x.push("if(re-rs>be-bs){");
d?(b(!0,!1),x.push("}else{"),b(!1,!1)):(x.push("if(fp){"),b(!0,!0),x.push("}else{"),b(!0,!1),x.push("}}else{if(fp){"),b(!1,!0),x.push("}else{"),b(!1,!1),x.push("}"));x.push("}}return "+a);a=p.join("")+x.join("");return(new Function(a))()}var l="d ax vv rs re rb ri bs be bb bi".split(" ");g.partial=q(!1);g.full=q(!0)},{}],23:[function(a,e,g){function q(b,c,f,d,a,m,k,r,h){var p=z*b;v[p]=c;v[p+1]=f;v[p+2]=d;v[p+3]=a;v[p+4]=m;v[p+5]=k;b*=D;C[b]=r;C[b+1]=h}e.exports=function(a,e,g,B,K,F,E,R,J){var I=8*
d.log2(B+E+1)*(a+1)|0,P=d.nextPow2(z*I);v.length<P&&(l.free(v),v=l.mallocInt32(P));I=d.nextPow2(D*I);C<I&&(l.free(C),C=l.mallocDouble(I));var I=0,P=2*a,L;q(I++,0,0,B,0,E,g?16:0,-Infinity,Infinity);for(g||q(I++,0,0,E,0,B,1,-Infinity,Infinity);0<I;){--I;g=I*z;var M=v[g];E=v[g+1];var O=v[g+2],Q=v[g+3],W=v[g+4];g=v[g+5];B=I*D;var ga=C[B],ia=C[B+1],Z=g&1,aa=!!(g&16),U=K,N=F,X=R;B=J;Z&&(U=R,N=J,X=K,B=F);if(g&2&&(O=c(a,M,E,O,U,N,ia),E>=O))continue;if(g&4&&(E=f(a,M,E,O,U,N,ga),E>=O))continue;g=O-E;var S=
W-Q;if(aa){if(a*g*(g+S)<n){L=p.scanComplete(a,M,e,E,O,U,N,Q,W,X,B);if(void 0!==L)return L;continue}}else if(a*Math.min(g,S)<x){L=b(a,M,e,Z,E,O,U,N,Q,W,X,B);if(void 0!==L)return L;continue}else if(a*g*S<u){L=p.scanBipartite(a,M,e,Z,E,O,U,N,Q,W,X,B);if(void 0!==L)return L;continue}g=h(a,M,E,O,U,N,ga,ia);if(E<g)if(a*(g-E)<x){if(L=t(a,M+1,e,E,g,U,N,Q,W,X,B),void 0!==L)return L}else if(M===a-2){if(L=Z?p.sweepBipartite(a,e,Q,W,X,B,E,g,U,N):p.sweepBipartite(a,e,E,g,U,N,Q,W,X,B),void 0!==L)return L}else q(I++,
M+1,E,g,Q,W,Z,-Infinity,Infinity),q(I++,M+1,Q,W,E,g,Z^1,-Infinity,Infinity);if(g<O)if(E=w(a,M,Q,W,X,B),L=X[P*E+M],S=k(a,M,E,W,X,B,L),S<W&&q(I++,M,g,O,S,W,(Z|4)+(aa?16:0),L,ia),Q<E&&q(I++,M,g,O,Q,E,(Z|2)+(aa?16:0),ga,L),E+1===S){if(aa)a:{Q=a;W=e;B=B[E];Z=2*Q;E*=Z;ga=X[E+M];ia=g;g*=Z;b:for(;ia<O;++ia,g+=Z)if(aa=N[ia],aa!==B&&(S=U[g+M],L=U[g+M+Q],!(ga<S||L<ga))){for(var ea=M+1;ea<Q;++ea){S=U[g+ea];L=U[g+ea+Q];var la=X[E+ea+Q];if(L<X[E+ea]||la<S)continue b}aa=W(aa,B);if(void 0!==aa){L=aa;break a}}L=void 0}else a:{Q=
a;W=e;B=B[E];ga=2*Q;E*=ga;ia=X[E+M];aa=g;g*=ga;b:for(;aa<O;++aa,g+=ga)if(S=U[g+M],L=U[g+M+Q],!(ia<S||L<ia||Z&&ia===S)){ea=N[aa];for(la=M+1;la<Q;++la){S=U[g+la];L=U[g+la+Q];var Ma=X[E+la+Q];if(L<X[E+la]||Ma<S)continue b}S=Z?W(B,ea):W(ea,B);if(void 0!==S){L=S;break a}}L=void 0}if(void 0!==L)return L}else if(E<S)if(aa){if(O=m(a,M,g,O,U,N,L),g<O)if(Q=k(a,M,g,O,U,N,L),M===a-2){if(g<Q&&(L=p.sweepComplete(a,e,g,Q,U,N,E,S,X,B),void 0!==L)||Q<O&&(L=p.sweepBipartite(a,e,Q,O,U,N,E,S,X,B),void 0!==L))return L}else g<
Q&&q(I++,M+1,g,Q,E,S,16,-Infinity,Infinity),Q<O&&(q(I++,M+1,Q,O,E,S,0,-Infinity,Infinity),q(I++,M+1,E,S,Q,O,1,-Infinity,Infinity))}else O=Z?r(a,M,g,O,U,N,L):m(a,M,g,O,U,N,L),g<O&&(M===a-2?Z?p.sweepBipartite(a,e,E,S,X,B,g,O,U,N):p.sweepBipartite(a,e,g,O,U,N,E,S,X,B):(q(I++,M+1,g,O,E,S,Z,-Infinity,Infinity),q(I++,M+1,E,S,g,O,Z^1,-Infinity,Infinity)))}};var l=a("typedarray-pool"),d=a("bit-twiddle");e=a("./brute");var b=e.partial,t=e.full,p=a("./sweep"),w=a("./median");a=a("./partition");var x=128,u=
4194304,n=4194304,h=a("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),k=a("lo===p0",["p0"]),c=a("lo<p0",["p0"]),f=a("hi<=p0",["p0"]),m=a("lo<=p0&&p0<=hi",["p0"]),r=a("lo<p0&&p0<=hi",["p0"]),z=6,D=2,v=l.mallocInt32(1024),C=l.mallocDouble(1024)},{"./brute":22,"./median":24,"./partition":25,"./sweep":27,"bit-twiddle":19,"typedarray-pool":90}],24:[function(a,e,g){e.exports=function(d,b,a,p,w,x){if(p<=a+1)return a;var u=a,n=p;p=p+a>>>1;for(var h=2*d,k=p,c=w[h*p+b];u<n;){if(n-u<l){for(var k=b,c=w,f=x,m=2*d,r=m*(u+
1)+k,z=u+1;z<n;++z,r+=m)for(var D=c[r],v=z,e=m*(z-1);v>u&&c[e+k]>D;--v,e-=m){for(var g=e,H=e+m,A=0;A<m;++A,++g,++H){var B=c[g];c[g]=c[H];c[H]=B}g=f[v];f[v]=f[v-1];f[v-1]=g}break}r=n-u;k=Math.random()*r+u|0;c=w[h*k+b];m=Math.random()*r+u|0;f=w[h*m+b];z=Math.random()*r+u|0;r=w[h*z+b];c<=f?r>=f?(k=m,c=f):c>=r||(k=z,c=r):f>=r?(k=m,c=f):r>=c||(k=z,c=r);f=h*(n-1);m=h*k;for(r=0;r<h;++r,++f,++m)z=w[f],w[f]=w[m],w[m]=z;f=x[n-1];x[n-1]=x[k];x[k]=f;k=q(d,b,u,n-1,w,x,c);f=h*(n-1);m=h*k;for(r=0;r<h;++r,++f,++m)z=
w[f],w[f]=w[m],w[m]=z;f=x[n-1];x[n-1]=x[k];x[k]=f;if(p<k){for(n=k-1;u<n&&w[h*(n-1)+b]===c;)--n;n+=1}else if(k<p)for(u=k+1;u<n&&w[h*u+b]===c;)u+=1;else break}return q(d,b,a,p,w,x,w[h*p+b])};var q=a("./partition")("lo<p0",["p0"]),l=8},{"./partition":25}],25:[function(a,e,g){e.exports=function(a,d){var b="abcdef".split("").concat(d),t=[];0<=a.indexOf("lo")&&t.push("lo=e[k+n]");0<=a.indexOf("hi")&&t.push("hi=e[k+o]");b.push(q.replace("_",t.join()).replace("$",a));return Function.apply(void 0,b)};var q=
"for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],26:[function(a,e,g){function q(b,d,a){for(var k=2*(b+1),c=b+1;c<=d;++c){for(var f=a[k++],m=a[k++],r=c,p=k-2;r-- >b;){var t=a[p-2],v=a[p-1];if(t<f)break;else if(t===f&&v<m)break;a[p]=t;a[p+1]=v;p-=2}a[p]=f;a[p+1]=m}}function l(b,a,d){b*=2;a*=2;var k=d[b],c=d[b+1];d[b]=d[a];d[b+1]=d[a+1];d[a]=k;d[a+1]=c}function d(b,
a,d){b*=2;a*=2;d[b]=d[a];d[b+1]=d[a+1]}function b(b,a,d,k,c){b*=2;a*=2;c[b]=c[a];c[a]=d;c[b+1]=c[a+1];c[a+1]=k}function t(b,a,d){b*=2;a*=2;var k=d[b],c=d[a];return k<c?!1:k===c?d[b+1]>d[a+1]:!0}function p(b,a,d,k){b*=2;var c=k[b];return c<a?!0:c===a?k[b+1]<d:!1}function w(a,n,h){var k=(n-a+1)/6|0,c=a+k,f=n-k,m=a+n>>1,r=m-k,z=m+k,D=c,v=r,e=m,g=z,H=f,k=a+1,A=n-1,B=0;t(D,v,h)&&(B=D,D=v,v=B);t(g,H,h)&&(B=g,g=H,H=B);t(D,e,h)&&(B=D,D=e,e=B);t(v,e,h)&&(B=v,v=e,e=B);t(D,g,h)&&(B=D,D=g,g=B);t(e,g,h)&&(B=e,
e=g,g=B);t(v,H,h)&&(B=v,v=H,H=B);t(v,e,h)&&(B=v,v=e,e=B);t(g,H,h)&&(B=g,g=H,H=B);for(var B=h[2*v],v=h[2*v+1],K=h[2*g],g=h[2*g+1],D=2*D,e=2*e,H=2*H,c=2*c,m=2*m,f=2*f,F=0;2>F;++F){var E=h[e+F],R=h[H+F];h[c+F]=h[D+F];h[m+F]=E;h[f+F]=R}d(r,a,h);d(z,n,h);for(r=k;r<=A;++r)if(p(r,B,v,h))r!==k&&l(r,k,h),++k;else if(!p(r,K,g,h))for(;;)if(p(A,K,g,h)){p(A,B,v,h)?(z=r,f=k,m=A,D=h,z*=2,f*=2,m*=2,c=D[z],e=D[z+1],D[z]=D[f],D[z+1]=D[f+1],D[f]=D[m],D[f+1]=D[m+1],D[m]=c,D[m+1]=e,++k):l(r,A,h);--A;break}else if(--A<
r)break;b(a,k-1,B,v,h);b(n,A+1,K,g,h);k-2-a<=x?q(a,k-2,h):w(a,k-2,h);n-(A+2)<=x?q(A+2,n,h):w(A+2,n,h);A-k<=x?q(k,A,h):w(k,A,h)}e.exports=function(b,a){a<=4*x?q(0,a-1,b):w(0,a-1,b)};var x=32},{}],27:[function(a,e,g){function q(b,f,a,d){d=f[d];a=b[a-1];b[d]=a;f[a]=d}e.exports={init:function(b){b=d.nextPow2(b);p.length<b&&(l.free(p),p=l.mallocInt32(b));w.length<b&&(l.free(w),w=l.mallocInt32(b));x.length<b&&(l.free(x),x=l.mallocInt32(b));u.length<b&&(l.free(u),u=l.mallocInt32(b));n.length<b&&(l.free(n),
n=l.mallocInt32(b));h.length<b&&(l.free(h),h=l.mallocInt32(b));b*=8;k.length<b&&(l.free(k),k=l.mallocDouble(b))},sweepBipartite:function(c,f,a,d,h,l,v,n,e,g){var A=0,B=2*c;--c;for(var K=B-1;a<d;++a){var F=l[a],E=B*a;k[A++]=h[E+c];k[A++]=-(F+1);k[A++]=h[E+K];k[A++]=F}for(a=v;a<n;++a)F=g[a]+t,d=B*a,k[A++]=e[d+c],k[A++]=-F,k[A++]=e[d+K],k[A++]=F;n=A>>>1;b(k,n);for(a=g=e=0;a<n;++a)if(A=k[2*a+1]|0,A>=t)A=A-t|0,q(x,u,g--,A);else if(0<=A)q(p,w,e--,A);else{if(A<=-t){A=-A-t|0;for(B=0;B<e;++B)if(d=f(p[B],A),
void 0!==d)return d;B=u;d=g++;x[d]=A}else{A=-A-1|0;for(B=0;B<g;++B)if(d=f(A,x[B]),void 0!==d)return d;B=w;d=e++;p[d]=A}B[A]=d}},sweepComplete:function(c,f,a,d,t,l,v,e,g,H){var A=0,B=2*c;--c;for(var K=B-1;a<d;++a){var F=l[a]+1<<1,E=B*a;k[A++]=t[E+c];k[A++]=-F;k[A++]=t[E+K];k[A++]=F}for(a=v;a<e;++a)F=H[a]+1<<1,d=B*a,k[A++]=g[d+c],k[A++]=-F|1,k[A++]=g[d+K],k[A++]=F|1;e=A>>>1;b(k,e);for(a=A=H=g=0;a<e;++a)if(B=k[2*a+1]|0,d=B&1,a<e-1&&B>>1===k[2*a+3]>>1&&(d=2,a+=1),0>B){B=-(B>>1)-1;for(t=0;t<A;++t)if(l=
f(n[t],B),void 0!==l)return l;if(0!==d)for(t=0;t<g;++t)if(l=f(p[t],B),void 0!==l)return l;if(1!==d)for(t=0;t<H;++t)if(l=f(x[t],B),void 0!==l)return l;0===d?(d=w,t=g++,p[t]=B,d[B]=t):1===d?(d=u,t=H++,x[t]=B,d[B]=t):2===d&&(d=h,t=A++,n[t]=B,d[B]=t)}else B=(B>>1)-1,0===d?q(p,w,g--,B):1===d?q(x,u,H--,B):2===d&&q(n,h,A--,B)},scanBipartite:function(c,a,d,r,h,l,v,n,u,x,e,g){var K=0,F=2*c,E=a+c,R=1,J=1;for(r?J=t:R=t;h<l;++h){var I=h+R,P=F*h;k[K++]=v[P+a];k[K++]=-I;k[K++]=v[P+E];k[K++]=I}for(h=u;h<x;++h)I=
h+J,l=F*h,k[K++]=e[l+a],k[K++]=-I;x=K>>>1;b(k,x);for(h=K=0;h<x;++h)if(I=k[2*h+1]|0,0>I)if(I=-I,J=!1,I>=t?(J=!r,I-=t):(J=!!r,--I),J)J=w,l=K++,p[l]=I,J[I]=l;else a:for(J=g[I],I*=F,l=e[I+a+1],u=e[I+a+1+c],E=0;E<K;++E){var P=p[E],L=F*P;if(!(u<v[L+a+1]||v[L+a+1+c]<l)){for(var M=a+2;M<c;++M)if(e[I+M+c]<v[L+M]||v[L+M+c]<e[I+M])continue a;P=n[P];P=r?d(J,P):d(P,J);if(void 0!==P)return P}}else q(p,w,K--,I-R)},scanComplete:function(c,a,d,r,h,l,v,n,u,w,x){for(var q=0,e=2*c,g=a+c;r<h;++r){var E=r+t,R=e*r;k[q++]=
l[R+a];k[q++]=-E;k[q++]=l[R+g];k[q++]=E}for(r=n;r<u;++r)E=r+1,h=e*r,k[q++]=w[h+a],k[q++]=-E;u=q>>>1;b(k,u);for(r=q=0;r<u;++r)if(h=k[2*r+1]|0,0>h)if(E=-h,E>=t)p[q++]=E-t;else a:for(--E,h=x[E],E*=e,g=w[E+a+1],R=w[E+a+1+c],n=0;n<q;++n){var J=p[n],I=v[J];if(I===h)break;J*=e;if(!(R<l[J+a+1]||l[J+a+1+c]<g)){for(var P=a+2;P<c;++P)if(w[E+P+c]<l[J+P]||l[J+P+c]<w[E+P])continue a;I=d(I,h);if(void 0!==I)return I}}else{E=h-t;for(n=q-1;0<=n;--n)if(p[n]===E){for(P=n+1;P<q;++P)p[P-1]=p[P];break}--q}}};var l=a("typedarray-pool"),
d=a("bit-twiddle"),b=a("./sort"),t=268435456,p=l.mallocInt32(1024),w=l.mallocInt32(1024),x=l.mallocInt32(1024),u=l.mallocInt32(1024),n=l.mallocInt32(1024),h=l.mallocInt32(1024),k=l.mallocDouble(8192)},{"./sort":26,"bit-twiddle":19,"typedarray-pool":90}],28:[function(a,e,g){(function(q){function l(){try{var b=new Uint8Array(1);b.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===b.foo()&&"function"===typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}
function d(c,a){if((b.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<a)throw new RangeError("Invalid typed array length");b.TYPED_ARRAY_SUPPORT?(c=new Uint8Array(a),c.__proto__=b.prototype):(null===c&&(c=new b(a)),c.length=a);return c}function b(c,a,d){if(!(b.TYPED_ARRAY_SUPPORT||this instanceof b))return new b(c,a,d);if("number"===typeof c){if("string"===typeof a)throw Error("If encoding is specified then the first argument must be a string");return w(this,c)}return t(this,c,a,d)}function t(c,a,f,k){if("number"===
typeof a)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&a instanceof ArrayBuffer){a.byteLength;if(0>f||a.byteLength<f)throw new RangeError("'offset' is out of bounds");if(a.byteLength<f+(k||0))throw new RangeError("'length' is out of bounds");a=void 0===f&&void 0===k?new Uint8Array(a):void 0===k?new Uint8Array(a,f):new Uint8Array(a,f,k);b.TYPED_ARRAY_SUPPORT?(c=a,c.__proto__=b.prototype):c=x(c,a);return c}if("string"===typeof a){k=c;c=f;if("string"!==
typeof c||""===c)c="utf8";if(!b.isEncoding(c))throw new TypeError('"encoding" must be a valid string encoding');f=h(a,c)|0;k=d(k,f);a=k.write(a,c);a!==f&&(k=k.slice(0,a));return k}return u(c,a)}function p(b){if("number"!==typeof b)throw new TypeError('"size" argument must be a number');if(0>b)throw new RangeError('"size" argument must not be negative');}function w(c,a){p(a);c=d(c,0>a?0:n(a)|0);if(!b.TYPED_ARRAY_SUPPORT)for(var f=0;f<a;++f)c[f]=0;return c}function x(b,c){var a=0>c.length?0:n(c.length)|
0;b=d(b,a);for(var f=0;f<a;f+=1)b[f]=c[f]&255;return b}function u(c,a){if(b.isBuffer(a)){var f=n(a.length)|0;c=d(c,f);if(0===c.length)return c;a.copy(c,0,0,f);return c}if(a){if("undefined"!==typeof ArrayBuffer&&a.buffer instanceof ArrayBuffer||"length"in a)return(f="number"!==typeof a.length)||(f=a.length,f=f!==f),f?d(c,0):x(c,a);if("Buffer"===a.type&&I(a.data))return x(c,a.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function n(c){if(c>=
(b.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(b.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return c|0}function h(c,a){if(b.isBuffer(c))return c.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(c)||c instanceof ArrayBuffer))return c.byteLength;"string"!==typeof c&&(c=""+c);var f=c.length;if(0===f)return 0;for(var d=!1;;)switch(a){case "ascii":case "latin1":case "binary":return f;
case "utf8":case "utf-8":case void 0:return K(c).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*f;case "hex":return f>>>1;case "base64":return R.toByteArray(B(c)).length;default:if(d)return K(c).length;a=(""+a).toLowerCase();d=!0}}function k(b,c,a){var f=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===a||a>this.length)a=this.length;if(0>=a)return"";a>>>=0;c>>>=0;if(a<=c)return"";for(b||(b="utf8");;)switch(b){case "hex":b=c;c=a;a=this.length;if(!b||0>b)b=0;
if(!c||0>c||c>a)c=a;f="";for(a=b;a<c;++a)b=f,f=this[a],f=16>f?"0"+f.toString(16):f.toString(16),f=b+f;return f;case "utf8":case "utf-8":return r(this,c,a);case "ascii":b="";for(a=Math.min(this.length,a);c<a;++c)b+=String.fromCharCode(this[c]&127);return b;case "latin1":case "binary":b="";for(a=Math.min(this.length,a);c<a;++c)b+=String.fromCharCode(this[c]);return b;case "base64":return c=0===c&&a===this.length?R.fromByteArray(this):R.fromByteArray(this.slice(c,a)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=
this.slice(c,a);a="";for(b=0;b<c.length;b+=2)a+=String.fromCharCode(c[b]+256*c[b+1]);return a;default:if(f)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();f=!0}}function c(b,c,a){var f=b[c];b[c]=b[a];b[a]=f}function f(c,a,f,d,k){if(0===c.length)return-1;"string"===typeof f?(d=f,f=0):2147483647<f?f=2147483647:-2147483648>f&&(f=-2147483648);f=+f;isNaN(f)&&(f=k?0:c.length-1);0>f&&(f=c.length+f);if(f>=c.length){if(k)return-1;f=c.length-1}else if(0>f)if(k)f=0;else return-1;"string"===
typeof a&&(a=b.from(a,d));if(b.isBuffer(a))return 0===a.length?-1:m(c,a,f,d,k);if("number"===typeof a)return a&=255,b.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?k?Uint8Array.prototype.indexOf.call(c,a,f):Uint8Array.prototype.lastIndexOf.call(c,a,f):m(c,[a],f,d,k);throw new TypeError("val must be string, number or Buffer");}function m(b,c,a,f,d){function k(b,c){return 1===m?b[c]:b.readUInt16BE(c*m)}var m=1,r=b.length,h=c.length;if(void 0!==f&&(f=String(f).toLowerCase(),"ucs2"===
f||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>b.length||2>c.length)return-1;m=2;r/=2;h/=2;a/=2}if(d)for(f=-1;a<r;a++)if(k(b,a)===k(c,-1===f?0:a-f)){if(-1===f&&(f=a),a-f+1===h)return f*m}else-1!==f&&(a-=a-f),f=-1;else for(a+h>r&&(a=r-h);0<=a;a--){r=!0;for(f=0;f<h;f++)if(k(b,a+f)!==k(c,f)){r=!1;break}if(r)return a}return-1}function r(b,c,a){a=Math.min(b.length,a);for(var f=[];c<a;){var d=b[c],k=null,m=239<d?4:223<d?3:191<d?2:1;if(c+m<=a){var r,h,p;switch(m){case 1:128>d&&(k=d);break;case 2:r=
b[c+1];128===(r&192)&&(d=(d&31)<<6|r&63,127<d&&(k=d));break;case 3:r=b[c+1];h=b[c+2];128===(r&192)&&128===(h&192)&&(d=(d&15)<<12|(r&63)<<6|h&63,2047<d&&(55296>d||57343<d)&&(k=d));break;case 4:r=b[c+1],h=b[c+2],p=b[c+3],128===(r&192)&&128===(h&192)&&128===(p&192)&&(d=(d&15)<<18|(r&63)<<12|(h&63)<<6|p&63,65535<d&&1114112>d&&(k=d))}}null===k?(k=65533,m=1):65535<k&&(k-=65536,f.push(k>>>10&1023|55296),k=56320|k&1023);f.push(k);c+=m}b=f.length;if(b<=P)f=String.fromCharCode.apply(String,f);else{a="";for(c=
0;c<b;)a+=String.fromCharCode.apply(String,f.slice(c,c+=P));f=a}return f}function z(b,c,a){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+c>a)throw new RangeError("Trying to access beyond buffer length");}function e(c,a,f,d,k,m){if(!b.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>k||a<m)throw new RangeError('"value" argument is out of bounds');if(f+d>c.length)throw new RangeError("Index out of range");}function v(b,c,a,f){0>c&&(c=65535+c+1);for(var d=
0,k=Math.min(b.length-a,2);d<k;++d)b[a+d]=(c&255<<8*(f?d:1-d))>>>8*(f?d:1-d)}function C(b,c,a,f){0>c&&(c=4294967295+c+1);for(var d=0,k=Math.min(b.length-a,4);d<k;++d)b[a+d]=c>>>8*(f?d:3-d)&255}function G(b,c,a,f,d,k){if(a+f>b.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range");}function H(b,c,a,f,d){d||G(b,c,a,4,3.4028234663852886E38,-3.4028234663852886E38);J.write(b,c,a,f,23,4);return a+4}function A(b,c,a,f,d){d||G(b,c,a,8,1.7976931348623157E308,-1.7976931348623157E308);
J.write(b,c,a,f,52,8);return a+8}function B(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");b=b.replace(L,"");if(2>b.length)return"";for(;0!==b.length%4;)b+="=";return b}function K(b,c){c=c||Infinity;for(var a,f=b.length,d=null,k=[],m=0;m<f;++m){a=b.charCodeAt(m);if(55295<a&&57344>a){if(!d){if(56319<a){-1<(c-=3)&&k.push(239,191,189);continue}else if(m+1===f){-1<(c-=3)&&k.push(239,191,189);continue}d=a;continue}if(56320>a){-1<(c-=3)&&k.push(239,191,189);d=a;continue}a=(d-55296<<10|a-56320)+65536}else d&&
-1<(c-=3)&&k.push(239,191,189);d=null;if(128>a){if(0>--c)break;k.push(a)}else if(2048>a){if(0>(c-=2))break;k.push(a>>6|192,a&63|128)}else if(65536>a){if(0>(c-=3))break;k.push(a>>12|224,a>>6&63|128,a&63|128)}else if(1114112>a){if(0>(c-=4))break;k.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw Error("Invalid code point");}return k}function F(b){for(var c=[],a=0;a<b.length;++a)c.push(b.charCodeAt(a)&255);return c}function E(b,c,a,f){for(var d=0;d<f&&!(d+a>=c.length||d>=b.length);++d)c[d+
a]=b[d];return d}var R=a("base64-js"),J=a("ieee754"),I=a("isarray");g.Buffer=b;g.SlowBuffer=function(c){+c!=c&&(c=0);return b.alloc(+c)};g.INSPECT_MAX_BYTES=50;b.TYPED_ARRAY_SUPPORT=void 0!==q.TYPED_ARRAY_SUPPORT?q.TYPED_ARRAY_SUPPORT:l();g.kMaxLength=b.TYPED_ARRAY_SUPPORT?2147483647:1073741823;b.poolSize=8192;b._augment=function(c){c.__proto__=b.prototype;return c};b.from=function(b,c,a){return t(null,b,c,a)};b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array,
$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&b[Symbol.species]===b&&($jscomp.initSymbol(),Object.defineProperty(b,Symbol.species,{value:null,configurable:!0})));b.alloc=function(b,c,a){p(b);b=0>=b?d(null,b):void 0!==c?"string"===typeof a?d(null,b).fill(c,a):d(null,b).fill(c):d(null,b);return b};b.allocUnsafe=function(b){return w(null,b)};b.allocUnsafeSlow=function(b){return w(null,b)};b.isBuffer=function(b){return!(null==b||!b._isBuffer)};
b.compare=function(c,a){if(!b.isBuffer(c)||!b.isBuffer(a))throw new TypeError("Arguments must be Buffers");if(c===a)return 0;for(var f=c.length,d=a.length,k=0,m=Math.min(f,d);k<m;++k)if(c[k]!==a[k]){f=c[k];d=a[k];break}return f<d?-1:d<f?1:0};b.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};b.concat=function(c,a){if(!I(c))throw new TypeError('"list" argument must be an Array of Buffers');
if(0===c.length)return b.alloc(0);var f;if(void 0===a)for(f=a=0;f<c.length;++f)a+=c[f].length;var d=b.allocUnsafe(a),k=0;for(f=0;f<c.length;++f){var m=c[f];if(!b.isBuffer(m))throw new TypeError('"list" argument must be an Array of Buffers');m.copy(d,k);k+=m.length}return d};b.byteLength=h;b.prototype._isBuffer=!0;b.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<b;a+=2)c(this,a,a+1);return this};b.prototype.swap32=
function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<b;a+=4)c(this,a,a+3),c(this,a+1,a+2);return this};b.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<b;a+=8)c(this,a,a+7),c(this,a+1,a+6),c(this,a+2,a+5),c(this,a+3,a+4);return this};b.prototype.toString=function(){var b=this.length|0;return 0===b?"":0===arguments.length?r(this,0,b):k.apply(this,
arguments)};b.prototype.equals=function(c){if(!b.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:0===b.compare(this,c)};b.prototype.inspect=function(){var b="",c=g.INSPECT_MAX_BYTES;0<this.length&&(b=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(b+=" ... "));return"<Buffer "+b+">"};b.prototype.compare=function(c,a,f,d,k){if(!b.isBuffer(c))throw new TypeError("Argument must be a Buffer");void 0===a&&(a=0);void 0===f&&(f=c?c.length:0);void 0===d&&
(d=0);void 0===k&&(k=this.length);if(0>a||f>c.length||0>d||k>this.length)throw new RangeError("out of range index");if(d>=k&&a>=f)return 0;if(d>=k)return-1;if(a>=f)return 1;a>>>=0;f>>>=0;d>>>=0;k>>>=0;if(this===c)return 0;var m=k-d,r=f-a,h=Math.min(m,r);d=this.slice(d,k);c=c.slice(a,f);for(a=0;a<h;++a)if(d[a]!==c[a]){m=d[a];r=c[a];break}return m<r?-1:r<m?1:0};b.prototype.includes=function(b,c,a){return-1!==this.indexOf(b,c,a)};b.prototype.indexOf=function(b,c,a){return f(this,b,c,a,!0)};b.prototype.lastIndexOf=
function(b,c,a){return f(this,b,c,a,!1)};b.prototype.write=function(b,c,a,f){if(void 0===c)f="utf8",a=this.length,c=0;else if(void 0===a&&"string"===typeof c)f=c,a=this.length,c=0;else if(isFinite(c))c|=0,isFinite(a)?(a|=0,void 0===f&&(f="utf8")):(f=a,a=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var d=this.length-c;if(void 0===a||a>d)a=d;if(0<b.length&&(0>a||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");
f||(f="utf8");for(d=!1;;)switch(f){case "hex":a:{c=Number(c)||0;f=this.length-c;a?(a=Number(a),a>f&&(a=f)):a=f;f=b.length;if(0!==f%2)throw new TypeError("Invalid hex string");a>f/2&&(a=f/2);for(f=0;f<a;++f){d=parseInt(b.substr(2*f,2),16);if(isNaN(d)){b=f;break a}this[c+f]=d}b=f}return b;case "utf8":case "utf-8":return E(K(b,this.length-c),this,c,a);case "ascii":return E(F(b),this,c,a);case "latin1":case "binary":return E(F(b),this,c,a);case "base64":return E(R.toByteArray(B(b)),this,c,a);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":f=
this.length-c;for(var k=void 0,k=d=void 0,m=[],r=0;r<b.length&&!(0>(f-=2));++r)k=b.charCodeAt(r),d=k>>8,k%=256,m.push(k),m.push(d);return E(m,this,c,a);default:if(d)throw new TypeError("Unknown encoding: "+f);f=(""+f).toLowerCase();d=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;b.prototype.slice=function(c,a){var f=this.length;c=~~c;a=void 0===a?f:~~a;0>c?(c+=f,0>c&&(c=0)):c>f&&(c=f);0>a?(a+=f,0>a&&(a=0)):a>f&&(a=f);a<c&&(a=
c);if(b.TYPED_ARRAY_SUPPORT)f=this.subarray(c,a),f.__proto__=b.prototype;else for(var d=a-c,f=new b(d,void 0),k=0;k<d;++k)f[k]=this[k+c];return f};b.prototype.readUIntLE=function(b,c,a){b|=0;c|=0;a||z(b,c,this.length);a=this[b];for(var f=1,d=0;++d<c&&(f*=256);)a+=this[b+d]*f;return a};b.prototype.readUIntBE=function(b,c,a){b|=0;c|=0;a||z(b,c,this.length);a=this[b+--c];for(var f=1;0<c&&(f*=256);)a+=this[b+--c]*f;return a};b.prototype.readUInt8=function(b,c){c||z(b,1,this.length);return this[b]};b.prototype.readUInt16LE=
function(b,c){c||z(b,2,this.length);return this[b]|this[b+1]<<8};b.prototype.readUInt16BE=function(b,c){c||z(b,2,this.length);return this[b]<<8|this[b+1]};b.prototype.readUInt32LE=function(b,c){c||z(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};b.prototype.readUInt32BE=function(b,c){c||z(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};b.prototype.readIntLE=function(b,c,a){b|=0;c|=0;a||z(b,c,this.length);a=this[b];for(var f=1,d=0;++d<
c&&(f*=256);)a+=this[b+d]*f;a>=128*f&&(a-=Math.pow(2,8*c));return a};b.prototype.readIntBE=function(b,c,a){b|=0;c|=0;a||z(b,c,this.length);a=c;for(var f=1,d=this[b+--a];0<a&&(f*=256);)d+=this[b+--a]*f;d>=128*f&&(d-=Math.pow(2,8*c));return d};b.prototype.readInt8=function(b,c){c||z(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};b.prototype.readInt16LE=function(b,c){c||z(b,2,this.length);var a=this[b]|this[b+1]<<8;return a&32768?a|4294901760:a};b.prototype.readInt16BE=function(b,c){c||
z(b,2,this.length);var a=this[b+1]|this[b]<<8;return a&32768?a|4294901760:a};b.prototype.readInt32LE=function(b,c){c||z(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};b.prototype.readInt32BE=function(b,c){c||z(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};b.prototype.readFloatLE=function(b,c){c||z(b,4,this.length);return J.read(this,b,!0,23,4)};b.prototype.readFloatBE=function(b,c){c||z(b,4,this.length);return J.read(this,b,!1,23,4)};b.prototype.readDoubleLE=
function(b,c){c||z(b,8,this.length);return J.read(this,b,!0,52,8)};b.prototype.readDoubleBE=function(b,c){c||z(b,8,this.length);return J.read(this,b,!1,52,8)};b.prototype.writeUIntLE=function(b,c,a,f){b=+b;c|=0;a|=0;f||e(this,b,c,a,Math.pow(2,8*a)-1,0);f=1;var d=0;for(this[c]=b&255;++d<a&&(f*=256);)this[c+d]=b/f&255;return c+a};b.prototype.writeUIntBE=function(b,c,a,f){b=+b;c|=0;a|=0;f||e(this,b,c,a,Math.pow(2,8*a)-1,0);f=a-1;var d=1;for(this[c+f]=b&255;0<=--f&&(d*=256);)this[c+f]=b/d&255;return c+
a};b.prototype.writeUInt8=function(c,a,f){c=+c;a|=0;f||e(this,c,a,1,255,0);b.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));this[a]=c&255;return a+1};b.prototype.writeUInt16LE=function(c,a,f){c=+c;a|=0;f||e(this,c,a,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[a]=c&255,this[a+1]=c>>>8):v(this,c,a,!0);return a+2};b.prototype.writeUInt16BE=function(c,a,f){c=+c;a|=0;f||e(this,c,a,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[a]=c>>>8,this[a+1]=c&255):v(this,c,a,!1);return a+2};b.prototype.writeUInt32LE=function(c,a,f){c=
+c;a|=0;f||e(this,c,a,4,4294967295,0);b.TYPED_ARRAY_SUPPORT?(this[a+3]=c>>>24,this[a+2]=c>>>16,this[a+1]=c>>>8,this[a]=c&255):C(this,c,a,!0);return a+4};b.prototype.writeUInt32BE=function(c,a,f){c=+c;a|=0;f||e(this,c,a,4,4294967295,0);b.TYPED_ARRAY_SUPPORT?(this[a]=c>>>24,this[a+1]=c>>>16,this[a+2]=c>>>8,this[a+3]=c&255):C(this,c,a,!1);return a+4};b.prototype.writeIntLE=function(b,c,a,f){b=+b;c|=0;f||(f=Math.pow(2,8*a-1),e(this,b,c,a,f-1,-f));f=0;var d=1,k=0;for(this[c]=b&255;++f<a&&(d*=256);)0>b&&
0===k&&0!==this[c+f-1]&&(k=1),this[c+f]=(b/d>>0)-k&255;return c+a};b.prototype.writeIntBE=function(b,c,a,f){b=+b;c|=0;f||(f=Math.pow(2,8*a-1),e(this,b,c,a,f-1,-f));f=a-1;var d=1,k=0;for(this[c+f]=b&255;0<=--f&&(d*=256);)0>b&&0===k&&0!==this[c+f+1]&&(k=1),this[c+f]=(b/d>>0)-k&255;return c+a};b.prototype.writeInt8=function(c,a,f){c=+c;a|=0;f||e(this,c,a,1,127,-128);b.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));0>c&&(c=255+c+1);this[a]=c&255;return a+1};b.prototype.writeInt16LE=function(c,a,f){c=+c;a|=0;
f||e(this,c,a,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?(this[a]=c&255,this[a+1]=c>>>8):v(this,c,a,!0);return a+2};b.prototype.writeInt16BE=function(c,a,f){c=+c;a|=0;f||e(this,c,a,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?(this[a]=c>>>8,this[a+1]=c&255):v(this,c,a,!1);return a+2};b.prototype.writeInt32LE=function(c,a,f){c=+c;a|=0;f||e(this,c,a,4,2147483647,-2147483648);b.TYPED_ARRAY_SUPPORT?(this[a]=c&255,this[a+1]=c>>>8,this[a+2]=c>>>16,this[a+3]=c>>>24):C(this,c,a,!0);return a+4};b.prototype.writeInt32BE=
function(c,a,f){c=+c;a|=0;f||e(this,c,a,4,2147483647,-2147483648);0>c&&(c=4294967295+c+1);b.TYPED_ARRAY_SUPPORT?(this[a]=c>>>24,this[a+1]=c>>>16,this[a+2]=c>>>8,this[a+3]=c&255):C(this,c,a,!1);return a+4};b.prototype.writeFloatLE=function(b,c,a){return H(this,b,c,!0,a)};b.prototype.writeFloatBE=function(b,c,a){return H(this,b,c,!1,a)};b.prototype.writeDoubleLE=function(b,c,a){return A(this,b,c,!0,a)};b.prototype.writeDoubleBE=function(b,c,a){return A(this,b,c,!1,a)};b.prototype.copy=function(c,a,
f,d){f||(f=0);d||0===d||(d=this.length);a>=c.length&&(a=c.length);a||(a=0);0<d&&d<f&&(d=f);if(d===f||0===c.length||0===this.length)return 0;if(0>a)throw new RangeError("targetStart out of bounds");if(0>f||f>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);c.length-a<d-f&&(d=c.length-a+f);var k=d-f;if(this===c&&f<a&&a<d)for(d=k-1;0<=d;--d)c[d+a]=this[d+f];else if(1E3>k||!b.TYPED_ARRAY_SUPPORT)for(d=
0;d<k;++d)c[d+a]=this[d+f];else Uint8Array.prototype.set.call(c,this.subarray(f,f+k),a);return k};b.prototype.fill=function(c,a,f,d){if("string"===typeof c){"string"===typeof a?(d=a,a=0,f=this.length):"string"===typeof f&&(d=f,f=this.length);if(1===c.length){var k=c.charCodeAt(0);256>k&&(c=k)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!b.isEncoding(d))throw new TypeError("Unknown encoding: "+d);}else"number"===typeof c&&(c&=255);if(0>
a||this.length<a||this.length<f)throw new RangeError("Out of range index");if(f<=a)return this;a>>>=0;f=void 0===f?this.length:f>>>0;c||(c=0);if("number"===typeof c)for(d=a;d<f;++d)this[d]=c;else for(c=b.isBuffer(c)?c:K((new b(c,d)).toString()),k=c.length,d=0;d<f-a;++d)this[d+a]=c[d%k];return this};var L=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":1,ieee754:50,isarray:56}],29:[function(a,e,
g){function q(b){return[Math.min(b[0],b[1]),Math.max(b[0],b[1])]}function l(b,a){return b[0]-a[0]||b[1]-a[1]}function d(b,a,d){return a in b?b[a]:d}var b=a("./lib/monotone"),t=a("./lib/triangulation"),p=a("./lib/delaunay"),w=a("./lib/filter");e.exports=function(a,u,n){Array.isArray(u)?(n=n||{},u=u||[]):(n=u||{},u=[]);var h=!!d(n,"delaunay",!0),k=!!d(n,"interior",!0),c=!!d(n,"exterior",!0);n=!!d(n,"infinity",!1);if(!k&&!c||0===a.length)return[];var f=b(a,u);if(h||k!==c||n){u=t(a.length,u.map(q).sort(l));
for(var m=0;m<f.length;++m){var r=f[m];u.addTriangle(r[0],r[1],r[2])}h&&p(a,u);return c?k?n?w(u,0,n):u.cells():w(u,1,n):w(u,-1)}return f}},{"./lib/delaunay":30,"./lib/filter":31,"./lib/monotone":32,"./lib/triangulation":33}],30:[function(a,e,g){function q(a,b,t,p,w,q){var u=b.opposite(p,w);if(!(0>u)){if(w<p){var n=p;p=w;w=n;n=q;q=u;u=n}b.isConstraint(p,w)||0>l(a[p],a[w],a[q],a[u])&&t.push(p,w)}}var l=a("robust-in-sphere")[4];a("binary-search-bounds");e.exports=function(a,b){for(var t=[],p=a.length,
w=b.stars,e=0;e<p;++e)for(var u=w[e],n=1;n<u.length;n+=2){var h=u[n];if(!(h<e||b.isConstraint(e,h))){for(var k=u[n-1],c=-1,f=1;f<u.length;f+=2)if(u[f-1]===h){c=u[f];break}0>c||0>l(a[e],a[h],a[k],a[c])&&t.push(e,h)}}for(;0<t.length;){h=t.pop();e=t.pop();c=k=-1;u=w[e];for(p=1;p<u.length;p+=2)n=u[p-1],f=u[p],n===h?c=f:f===h&&(k=n);0>k||0>c||0<=l(a[e],a[h],a[k],a[c])||(b.flip(e,h),q(a,b,t,k,e,c),q(a,b,t,e,c,k),q(a,b,t,c,h,k),q(a,b,t,h,k,c))}}},{"binary-search-bounds":18,"robust-in-sphere":72}],31:[function(a,
e,g){function q(b,a,d,l,e,u,n){this.cells=b;this.neighbor=a;this.flags=l;this.constraint=d;this.active=e;this.next=u;this.boundary=n}function l(b,a){return b[0]-a[0]||b[1]-a[1]||b[2]-a[2]}var d=a("binary-search-bounds");e.exports=function(b,a,d){for(var w=b.cells(),e=w.length,u=0;u<e;++u){var n=w[u],h=n[0],k=n[1],c=n[2];k<c?k<h&&(n[0]=k,n[1]=c,n[2]=h):c<h&&(n[0]=c,n[1]=h,n[2]=k)}w.sort(l);for(var f=Array(e),u=0;u<f.length;++u)f[u]=0;var m=[],r=[],z=Array(3*e),g=Array(3*e),v=null;d&&(v=[]);c=new q(w,
z,g,f,m,r,v);for(u=0;u<e;++u)for(var n=w[u],C=0;3>C;++C){var h=n[C],k=n[(C+1)%3],G=z[3*u+C]=c.locate(k,h,b.opposite(k,h)),H=g[3*u+C]=b.isConstraint(h,k);0>G&&(H?r.push(u):(m.push(u),f[u]=1),d&&v.push([k,h,-1]))}if(0===a)return d?c.cells.concat(c.boundary):c.cells;e=1;u=c.active;n=c.next;b=c.flags;w=c.cells;h=c.constraint;for(k=c.neighbor;0<u.length||0<n.length;){for(;0<u.length;)if(f=u.pop(),b[f]!==-e)for(b[f]=e,m=0;3>m;++m)r=k[3*f+m],0<=r&&0===b[r]&&(h[3*f+m]?n.push(r):(u.push(r),b[r]=e));f=n;n=
u;u=f;n.length=0;e=-e}for(u=e=0;u<w.length;++u)b[u]===a&&(w[e++]=w[u]);w.length=e;return d?w.concat(c.boundary):w};q.prototype.locate=function(){var b=[0,0,0];return function(a,p,e){var q=a,u=p,n=e;p<e?p<a&&(q=p,u=e,n=a):e<a&&(q=e,u=a,n=p);if(0>q)return-1;b[0]=q;b[1]=u;b[2]=n;return d.eq(this.cells,b,l)}}()},{"binary-search-bounds":18}],32:[function(a,e,g){function q(b,a,d,h,k){this.a=b;this.b=a;this.idx=d;this.lowerIds=h;this.upperIds=k}function l(b,a,d,h){this.a=b;this.b=a;this.type=d;this.idx=
h}function d(b,a){var d=b.a[0]-a.a[0]||b.a[1]-a.a[1]||b.type-a.type;return d||0!==b.type&&(d=w(b.a,b.b,a.b))?d:b.idx-a.idx}function b(b,a){return w(b.a,b.b,a)}function t(b,a){var d;return(d=b.a[0]<a.a[0]?w(b.a,b.b,a.a):w(a.b,a.a,b.a))?d:(d=a.b[0]<b.b[0]?w(b.a,b.b,a.b):w(a.b,a.a,b.b))||b.idx-a.idx}var p=a("binary-search-bounds"),w=a("robust-orientation")[3];e.exports=function(a,e){for(var n=a.length,h=e.length,k=[],c=0;c<n;++c)k.push(new l(a[c],null,0,c));for(c=0;c<h;++c){var f=e[c],n=a[f[0]],f=a[f[1]];
n[0]<f[0]?k.push(new l(n,f,2,c),new l(f,n,1,c)):n[0]>f[0]&&k.push(new l(f,n,2,c),new l(n,f,1,c))}k.sort(d);c=k[0].a[0]-(1+Math.abs(k[0].a[0]))*Math.pow(2,-52);h=[new q([c,1],[c,0],-1,[],[],[],[])];n=[];c=0;for(f=k.length;c<f;++c){var m=k[c],r=m.type;if(0===r)for(var r=n,z=h,g=a,v=m.a,m=m.idx,C=p.lt(z,v,b),G=p.gt(z,v,b);C<G;++C){for(var H=z[C],A=H.lowerIds,B=A.length;1<B&&0<w(g[A[B-2]],g[A[B-1]],v);)r.push([A[B-1],A[B-2],m]),--B;A.length=B;A.push(m);H=H.upperIds;for(B=H.length;1<B&&0>w(g[H[B-2]],g[H[B-
1]],v);)r.push([H[B-2],H[B-1],m]),--B;H.length=B;H.push(m)}else 2===r?(r=h,z=m,g=p.le(r,z,t),v=r[g],m=v.upperIds,G=m[m.length-1],v.upperIds=[G],r.splice(g+1,0,new q(z.a,z.b,z.idx,[G],m))):(r=h,z=m,g=z.a,z.a=z.b,z.b=g,z=p.eq(r,z,t),r[z-1].upperIds=r[z].upperIds,r.splice(z,1))}return n}},{"binary-search-bounds":18,"robust-orientation":73}],33:[function(a,e,g){function q(b,a){this.stars=b;this.edges=a}function l(b,a,d){for(var l=1,e=b.length;l<e;l+=2)if(b[l-1]===a&&b[l]===d){b[l-1]=b[e-2];b[l]=b[e-1];
b.length=e-2;break}}var d=a("binary-search-bounds");e.exports=function(b,a){for(var d=Array(b),l=0;l<b;++l)d[l]=[];return new q(d,a)};a=q.prototype;a.isConstraint=function(){function b(b,a){return b[0]-a[0]||b[1]-a[1]}var a=[0,0];return function(p,l){a[0]=Math.min(p,l);a[1]=Math.max(p,l);return 0<=d.eq(this.edges,a,b)}}();a.removeTriangle=function(b,a,d){var e=this.stars;l(e[b],a,d);l(e[a],d,b);l(e[d],b,a)};a.addTriangle=function(b,a,d){var l=this.stars;l[b].push(a,d);l[a].push(d,b);l[d].push(b,a)};
a.opposite=function(b,a){for(var d=this.stars[a],l=1,e=d.length;l<e;l+=2)if(d[l]===b)return d[l-1];return-1};a.flip=function(b,a){var d=this.opposite(b,a),l=this.opposite(a,b);this.removeTriangle(b,a,d);this.removeTriangle(a,b,l);this.addTriangle(b,l,d);this.addTriangle(a,d,l)};a.edges=function(){for(var b=this.stars,a=[],d=0,l=b.length;d<l;++d)for(var e=b[d],q=0,n=e.length;q<n;q+=2)a.push([e[q],e[q+1]]);return a};a.cells=function(){for(var b=this.stars,a=[],d=0,l=b.length;d<l;++d)for(var e=b[d],
q=0,n=e.length;q<n;q+=2){var h=e[q],k=e[q+1];d<Math.min(h,k)&&a.push([d,h,k])}return a}},{"binary-search-bounds":18}],34:[function(a,e,g){function q(b){var a=f(b);b=c(k(a),b);return 0>b?[a,r(a,Infinity)]:0<b?[r(a,-Infinity),a]:[a,a]}function l(b,a,c){var f=[];n(c,function(c,d){var k=a[c],m=a[d];k[0]!==m[0]&&k[0]!==m[1]&&k[1]!==m[0]&&k[1]!==m[1]&&h(b[k[0]],b[k[1]],b[m[0]],b[m[1]])&&f.push([c,d])});return f}function d(b,a,c,f){var d=[];n(c,f,function(c,f){var k=a[c];if(k[0]!==f&&k[1]!==f){var m=b[f];
h(b[k[0]],b[k[1]],m,m)&&d.push([c,f])}});return d}function b(b,a,f,d,r){function h(a){if(a>=b.length)return l[a-b.length];a=b[a];return[k(a[0]),k(a[1])]}for(var l=[],p=0;p<f.length;++p){var n=f[p],t=n[0],n=n[1],e=a[t],q=a[n];if(e=z(m(b[e[0]]),m(b[e[1]]),m(b[q[0]]),m(b[q[1]])))q=l.length+b.length,l.push(e),d.push([t,q],[n,q])}d.sort(function(b,a){if(b[0]!==a[0])return b[0]-a[0];var f=h(b[1]),d=h(a[1]);return c(f[0],d[0])||c(f[1],d[1])});for(p=d.length-1;0<=p;--p){n=d[p];t=n[0];e=a[t];q=e[0];f=e[1];
var u=b[q],w=b[f];0>(u[0]-w[0]||u[1]-w[1])&&(u=q,q=f,f=u);e[0]=q;var q=e[1]=n[1],g;for(r&&(g=e[2]);0<p&&d[p-1][0]===t;)n=d[--p],n=n[1],r?a.push([q,n,g]):a.push([q,n]),q=n;r?a.push([q,f,g]):a.push([q,f])}return l}function t(b,a,c){for(var d=b.length+a.length,k=new u(d),m=0;m<a.length;++m){var r=a[m],h=q(r[0]),l=q(r[1]);c.push([h[0],l[0],h[1],l[1]]);b.push([f(r[0]),f(r[1])])}n(c,function(b,a){k.link(b,a)});a=0;c=!0;r=Array(d);for(m=0;m<d;++m)k.find(m)===m?(r[m]=a,b[a++]=b[m]):(c=!1,r[m]=-1);b.length=
a;if(c)return null;for(m=0;m<d;++m)0>r[m]&&(r[m]=r[k.find(m)]);return r}function p(b,a){return b[0]-a[0]||b[1]-a[1]}function w(b,a){var c=b[0]-a[0]||b[1]-a[1];return c?c:b[2]<a[2]?-1:b[2]>a[2]?1:0}function x(a,c,f){for(var k=Array(c.length),m=0;m<c.length;++m){var r=c[m],h=a[r[0]],r=a[r[1]];k[m]=[Math.min(h[0],r[0]),Math.min(h[1],r[1]),Math.max(h[0],r[0]),Math.max(h[1],r[1])]}m=l(a,c,k);h=Array(a.length);for(r=0;r<a.length;++r){var n=a[r];h[r]=[n[0],n[1],n[0],n[1]]}k=d(a,c,k,h);r=b(a,c,m,k,f);a=t(a,
r,h);if(0!==c.length){if(a)for(h=0;h<c.length;++h){var r=c[h],n=a[r[0]],e=a[r[1]];r[0]=Math.min(n,e);r[1]=Math.max(n,e)}else for(h=0;h<c.length;++h)r=c[h],n=r[0],e=r[1],r[0]=Math.min(n,e),r[1]=Math.max(n,e);f?c.sort(w):c.sort(p);for(h=r=1;h<c.length;++h)if(n=c[h-1],e=c[h],e[0]!==n[0]||e[1]!==n[1]||f&&e[2]!==n[2])c[r++]=e;c.length=r}return a?!0:0<m.length||0<k.length}e.exports=function(b,a,c){var f=!1,d;if(c){d=a;for(var k=Array(a.length),m=0;m<a.length;++m){var r=a[m];k[m]=[r[0],r[1],c[m]]}a=k}for(;x(b,
a,!!c);)f=!0;if(c&&f)for(d.length=0,m=c.length=0;m<a.length;++m)r=a[m],d.push([r[0],r[1]]),c.push(r[2]);return f};var u=a("union-find"),n=a("box-intersect");a("compare-cell");var h=a("robust-segment-intersect"),k=a("big-rat"),c=a("big-rat/cmp"),f=a("big-rat/to-float"),m=a("rat-vec"),r=a("nextafter"),z=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":35,"big-rat":5,"big-rat/cmp":3,"big-rat/to-float":17,"box-intersect":21,"compare-cell":38,nextafter:59,"rat-vec":68,"robust-segment-intersect":76,
"union-find":91}],35:[function(a,e,g){function q(a,d){return b(l(a[0],d[1]),l(a[1],d[0]))}e.exports=function(b,a,h,k){a=p(a,b);var c=p(k,h);k=q(a,c);if(0===t(k))return null;h=p(b,h);h=q(c,h);h=d(h,k);return w(b,x(a,h))};var l=a("big-rat/mul"),d=a("big-rat/div"),b=a("big-rat/sub"),t=a("big-rat/sign"),p=a("rat-vec/sub"),w=a("rat-vec/add"),x=a("rat-vec/muls");a("big-rat/to-float")},{"big-rat/div":4,"big-rat/mul":14,"big-rat/sign":15,"big-rat/sub":16,"big-rat/to-float":17,"rat-vec/add":67,"rat-vec/muls":69,
"rat-vec/sub":70}],36:[function(a,e,g){function q(a,d,l){var n=b(a[0],-d[0]);a=b(a[1],-d[1]);var h=b(l[0],-d[0]);d=b(l[1],-d[1]);n=p(t(n,h),t(a,d));return 0<=n[n.length-1]}e.exports=function(b,a,p,n){var h=l(a,p,n);if(0===h){var h=d(l(b,a,p)),k=d(l(b,a,n));return h===k?0===h&&(p=q(b,a,p),b=q(b,a,n),p!==b)?p?1:-1:0:0===k?0<h?-1:q(b,a,n)?-1:1:0===h?0<k?1:q(b,a,p)?1:-1:d(k-h)}k=l(b,a,p);return 0<k?0<h&&0<l(b,a,n)?1:-1:0>k?0<h||0<l(b,a,n)?1:-1:0<l(b,a,n)?1:q(b,a,p)?1:-1};var l=a("robust-orientation"),
d=a("signum"),b=a("two-sum"),t=a("robust-product"),p=a("robust-sum")},{"robust-orientation":73,"robust-product":74,"robust-sum":78,signum:37,"two-sum":89}],37:[function(a,e,g){e.exports=function(a){return 0>a?-1:0<a?1:0}},{}],38:[function(a,e,g){function q(a,b){return a-b}e.exports=function(a,b){var e=a.length,p=a.length-b.length;if(p)return p;switch(e){case 0:return 0;case 1:return a[0]-b[0];case 2:return a[0]+a[1]-b[0]-b[1]||l(a[0],a[1])-l(b[0],b[1]);case 3:var e=a[0]+a[1],g=b[0]+b[1];if(p=e+a[2]-
(g+b[2]))return p;var p=l(a[0],a[1]),x=l(b[0],b[1]);return l(p,a[2])-l(x,b[2])||l(p+a[2],e)-l(x+b[2],g);case 4:var p=a[0],e=a[1],g=a[2],x=a[3],u=b[0],n=b[1],h=b[2],k=b[3];return p+e+g+x-(u+n+h+k)||l(p,e,g,x)-l(u,n,h,k,u)||l(p+e,p+g,p+x,e+g,e+x,g+x)-l(u+n,u+h,u+k,n+h,n+k,h+k)||l(p+e+g,p+e+x,p+g+x,e+g+x)-l(u+n+h,u+n+k,u+h+k,n+h+k);default:g=a.slice().sort(q);x=b.slice().sort(q);for(u=0;u<e;++u)if(p=g[u]-x[u])return p;return 0}};var l=Math.min},{}],39:[function(a,e,g){function q(){this.argTypes=[];this.shimArgs=
[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var l=a("./lib/thunk.js");e.exports=function(a){var b=new q;b.pre=a.pre;b.body=a.body;b.post=a.post;var e=a.args.slice(0);b.argTypes=e;for(var p=0;p<e.length;++p){var g=e[p];if("array"===g||"object"===typeof g&&g.blockIndices){b.argTypes[p]="array";b.arrayArgs.push(p);b.arrayBlockIndices.push(g.blockIndices?
g.blockIndices:0);b.shimArgs.push("array"+p);if(p<b.pre.args.length&&0<b.pre.args[p].count)throw Error("cwise: pre() block may not reference array args");if(p<b.post.args.length&&0<b.post.args[p].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===g)b.scalarArgs.push(p),b.shimArgs.push("scalar"+p);else if("index"===g){b.indexArgs.push(p);if(p<b.pre.args.length&&0<b.pre.args[p].count)throw Error("cwise: pre() block may not reference array index");if(p<b.body.args.length&&
b.body.args[p].lvalue)throw Error("cwise: body() block may not write to array index");if(p<b.post.args.length&&0<b.post.args[p].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===g){b.shapeArgs.push(p);if(p<b.pre.args.length&&b.pre.args[p].lvalue)throw Error("cwise: pre() block may not write to array shape");if(p<b.body.args.length&&b.body.args[p].lvalue)throw Error("cwise: body() block may not write to array shape");if(p<b.post.args.length&&b.post.args[p].lvalue)throw Error("cwise: post() block may not write to array shape");
}else if("object"===typeof g&&g.offset)b.argTypes[p]="offset",b.offsetArgs.push({array:g.array,offset:g.offset}),b.offsetArgIndex.push(p);else throw Error("cwise: Unknown argument type "+e[p]);}if(0>=b.arrayArgs.length)throw Error("cwise: No array arguments specified");if(b.pre.args.length>e.length)throw Error("cwise: Too many arguments in pre() block");if(b.body.args.length>e.length)throw Error("cwise: Too many arguments in body() block");if(b.post.args.length>e.length)throw Error("cwise: Too many arguments in post() block");
b.debug=!!a.printCode||!!a.debug;b.funcName=a.funcName||"cwise";b.blockSize=a.blockSize||64;return l(b)}},{"./lib/thunk.js":41}],40:[function(a,e,g){function q(b,a,d){var l=b.length,e=a.arrayArgs.length;a=0<a.indexArgs.length;var h=[],k=[],c=0,f=0,m,r;for(m=0;m<l;++m)k.push(["i",m,"=0"].join(""));for(r=0;r<e;++r)for(m=0;m<l;++m)f=c,c=b[m],0===m?k.push(["d",r,"s",m,"=t",r,"p",c].join("")):k.push(["d",r,"s",m,"=(t",r,"p",c,"-s",f,"*t",r,"p",f,")"].join(""));h.push("var "+k.join(","));for(m=l-1;0<=m;--m)c=
b[m],h.push(["for(i",m,"=0;i",m,"<s",c,";++i",m,"){"].join(""));h.push(d);for(m=0;m<l;++m){f=c;c=b[m];for(r=0;r<e;++r)h.push(["p",r,"+=d",r,"s",m].join(""));a&&(0<m&&h.push(["index[",f,"]-=s",f].join("")),h.push(["++index[",c,"]"].join("")));h.push("}")}return h.join("\n")}function l(b,a,d,l){for(var e=a.length,h=d.arrayArgs.length,k=d.blockSize,c=0<d.indexArgs.length,f=[],m=0;m<h;++m)f.push(["var offset",m,"=p",m].join(""));for(m=b;m<e;++m)f.push(["for(var j"+m+"=SS[",a[m],"]|0;j",m,">0;){"].join("")),
f.push(["if(j",m,"<",k,"){"].join("")),f.push(["s",a[m],"=j",m].join("")),f.push(["j",m,"=0"].join("")),f.push(["}else{s",a[m],"=",k].join("")),f.push(["j",m,"-=",k,"}"].join("")),c&&f.push(["index[",a[m],"]=j",m].join(""));for(m=0;m<h;++m){k=["offset"+m];for(c=b;c<e;++c)k.push(["j",c,"*t",m,"p",a[c]].join(""));f.push(["p",m,"=(",k.join("+"),")"].join(""))}f.push(q(a,d,l));for(m=b;m<e;++m)f.push("}");return f.join("\n")}function d(b,a,d){for(var l=b.body,e=[],h=[],k=0;k<b.args.length;++k){var c=b.args[k];
if(!(0>=c.count)){var f=new RegExp(c.name,"g"),m="",r=a.arrayArgs.indexOf(k);switch(a.argTypes[k]){case "offset":var t=a.offsetArgIndex.indexOf(k),r=a.offsetArgs[t].array,m="+q"+t;case "array":var m="p"+r+m,q="l"+k,t="a"+r;if(0===a.arrayBlockIndices[r])1===c.count?"generic"===d[r]?c.lvalue?(e.push(["var ",q,"=",t,".get(",m,")"].join("")),l=l.replace(f,q),h.push([t,".set(",m,",",q,")"].join(""))):l=l.replace(f,[t,".get(",m,")"].join("")):l=l.replace(f,[t,"[",m,"]"].join("")):"generic"===d[r]?(e.push(["var ",
q,"=",t,".get(",m,")"].join("")),l=l.replace(f,q),c.lvalue&&h.push([t,".set(",m,",",q,")"].join(""))):(e.push(["var ",q,"=",t,"[",m,"]"].join("")),l=l.replace(f,q),c.lvalue&&h.push([t,"[",m,"]=",q].join("")));else{f=[c.name];c=[m];for(m=0;m<Math.abs(a.arrayBlockIndices[r]);m++)f.push("\\s*\\[([^\\]]+)\\]"),c.push("$"+(m+1)+"*t"+r+"b"+m);f=new RegExp(f.join(""),"g");m=c.join("+");if("generic"===d[r])throw Error("cwise: Generic arrays not supported in combination with blocks!");l=l.replace(f,[t,"[",
m,"]"].join(""))}break;case "scalar":l=l.replace(f,"Y"+a.scalarArgs.indexOf(k));break;case "index":l=l.replace(f,"index");break;case "shape":l=l.replace(f,"shape")}}}return[e.join("\n"),l,h.join("\n")].join("\n").trim()}function b(b){for(var a=Array(b.length),d=!0,l=0;l<b.length;++l){var e=b[l],h=e.match(/\d+/),h=h?h[0]:"";0===e.charAt(0)?a[l]="u"+e.charAt(1)+h:a[l]=e.charAt(0)+h;0<l&&(d=d&&a[l]===a[l-1])}return d?a[0]:a.join("")}var t=a("uniq");e.exports=function(a,e){for(var g=e[1].length-Math.abs(a.arrayBlockIndices[0])|
0,u=Array(a.arrayArgs.length),n=Array(a.arrayArgs.length),h=0;h<a.arrayArgs.length;++h)n[h]=e[2*h],u[h]=e[2*h+1];for(var k=[],c=[],f=[],m=[],r=[],h=0;h<a.arrayArgs.length;++h){0>a.arrayBlockIndices[h]?(f.push(0),m.push(g),k.push(g),c.push(g+a.arrayBlockIndices[h])):(f.push(a.arrayBlockIndices[h]),m.push(a.arrayBlockIndices[h]+g),k.push(0),c.push(a.arrayBlockIndices[h]));for(var z=[],D=0;D<u[h].length;D++)f[h]<=u[h][D]&&u[h][D]<m[h]&&z.push(u[h][D]-f[h]);r.push(z)}c=["SS"];m=["'use strict'"];z=[];
for(D=0;D<g;++D)z.push(["s",D,"=SS[",D,"]"].join(""));for(h=0;h<a.arrayArgs.length;++h){c.push("a"+h);c.push("t"+h);c.push("p"+h);for(D=0;D<g;++D)z.push(["t",h,"p",D,"=t",h,"[",f[h]+D,"]"].join(""));for(D=0;D<Math.abs(a.arrayBlockIndices[h]);++D)z.push(["t",h,"b",D,"=t",h,"[",k[h]+D,"]"].join(""))}for(h=0;h<a.scalarArgs.length;++h)c.push("Y"+h);0<a.shapeArgs.length&&z.push("shape=SS.slice(0)");if(0<a.indexArgs.length){D=Array(g);for(h=0;h<g;++h)D[h]="0";z.push(["index=[",D.join(","),"]"].join(""))}for(h=
0;h<a.offsetArgs.length;++h){k=a.offsetArgs[h];f=[];for(D=0;D<k.offset.length;++D)0!==k.offset[D]&&(1===k.offset[D]?f.push(["t",k.array,"p",D].join("")):f.push([k.offset[D],"*t",k.array,"p",D].join("")));0===f.length?z.push("q"+h+"=0"):z.push(["q",h,"=",f.join("+")].join(""))}h=t([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));z=z.concat(h);m.push("var "+z.join(","));for(h=0;h<a.arrayArgs.length;++h)m.push("p"+h+"|=0");3<a.pre.body.length&&m.push(d(a.pre,a,n));h=d(a.body,
a,n);a:for(D=0,z=r[0].length;D<z;){for(k=1;k<r.length;++k)if(r[k][D]!==r[0][D])break a;++D}D<g?m.push(l(D,r[0],a,h)):m.push(q(r[0],a,h));3<a.post.body.length&&m.push(d(a.post,a,n));a.debug&&console.log("-----Generated cwise routine for ",e,":\n"+m.join("\n")+"\n----------");g=[a.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",D,b(n)].join("");return(new Function(["function ",g,"(",c.join(","),"){",m.join("\n"),"} return ",g].join("")))()}},{uniq:92}],41:[function(a,e,g){var q=a("./compile.js");
e.exports=function(a){var d=["'use strict'","var CACHED={}"],b=[];d.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var e=[],p=[],g=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],x=[],u=[],n=0;n<a.arrayArgs.length;++n){var h=a.arrayArgs[n];b.push(["t",h,"=array",h,".dtype,r",h,"=array",h,".order"].join(""));e.push("t"+h);e.push("r"+h);p.push("t"+h);p.push("r"+
h+".join()");g.push("array"+h+".data");g.push("array"+h+".stride");g.push("array"+h+".offset|0");0<n&&(x.push("array"+a.arrayArgs[0]+".shape.length===array"+h+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[n]))),u.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+h+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[n])+"]"))}1<a.arrayArgs.length&&(d.push("if (!("+x.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
d.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),d.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),d.push("}"));for(n=0;n<a.scalarArgs.length;++n)g.push("scalar"+a.scalarArgs[n]);b.push(["type=[",p.join(","),"].join()"].join(""));b.push("proc=CACHED[type]");d.push("var "+b.join(","));d.push(["if(!proc){CACHED[type]=proc=compile([",e.join(","),"])}return proc(",g.join(","),
")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+d.join("\n")+"\n----------");return(new Function("compile",d.join("\n")))(q.bind(void 0,a))}},{"./compile.js":40}],42:[function(a,e,g){(function(a){var l=!1;if("undefined"!==typeof Float64Array){var d=new Float64Array(1),b=new Uint32Array(d.buffer);d[0]=1;l=!0;1072693248===b[1]?(e.exports=function(a){d[0]=a;return[b[0],b[1]]},e.exports.pack=function(a,l){b[0]=a;b[1]=l;return d[0]},e.exports.lo=function(a){d[0]=a;return b[0]},e.exports.hi=
function(a){d[0]=a;return b[1]}):1072693248===b[0]?(e.exports=function(a){d[0]=a;return[b[1],b[0]]},e.exports.pack=function(a,l){b[1]=a;b[0]=l;return d[0]},e.exports.lo=function(a){d[0]=a;return b[1]},e.exports.hi=function(a){d[0]=a;return b[0]}):l=!1}if(!l){var t=new a(8);e.exports=function(a){t.writeDoubleLE(a,0,!0);return[t.readUInt32LE(0,!0),t.readUInt32LE(4,!0)]};e.exports.pack=function(a,b){t.writeUInt32LE(a,0,!0);t.writeUInt32LE(b,4,!0);return t.readDoubleLE(0,!0)};e.exports.lo=function(a){t.writeDoubleLE(a,
0,!0);return t.readUInt32LE(0,!0)};e.exports.hi=function(a){t.writeDoubleLE(a,0,!0);return t.readUInt32LE(4,!0)}}e.exports.sign=function(a){return e.exports.hi(a)>>>31};e.exports.exponent=function(a){return(e.exports.hi(a)<<1>>>21)-1023};e.exports.fraction=function(a){var b=e.exports.lo(a);a=e.exports.hi(a);var d=a&1048575;a&2146435072&&(d+=1048576);return[b,d]};e.exports.denormalized=function(a){return!(e.exports.hi(a)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:28}],43:[function(a,e,g){function q(a,
d,b){var e=a[b]|0;if(0>=e)return[];var p=Array(e),g;if(b===a.length-1)for(g=0;g<e;++g)p[g]=d;else for(g=0;g<e;++g)p[g]=q(a,d,b+1);return p}e.exports=function(a,d){"undefined"===typeof d&&(d=0);switch(typeof a){case "number":if(0<a){var b=a|0,e=d,p,g;p=Array(b);for(g=0;g<b;++g)p[g]=e;return p}break;case "object":if("number"===typeof a.length)return q(a,d,0)}return[]}},{}],44:[function(a,e,g){e.exports=function(a,d){var b=a.length;if("number"!==typeof d){for(var e=d=0;e<b;++e){var p=a[e];d=Math.max(d,
p[0],p[1])}d=(d|0)+1}d|=0;for(var g=Array(d),e=0;e<d;++e)g[e]=[];for(e=0;e<b;++e)p=a[e],g[p[0]].push(p[1]),g[p[1]].push(p[0]);for(b=0;b<d;++b)q(g[b],function(a,b){return a-b});return g};var q=a("uniq")},{uniq:92}],45:[function(a,e,g){function q(a,b,f,d,r,h){this._color=a;this.key=b;this.value=f;this.left=d;this.right=r;this._count=h}function l(a){return new q(a._color,a.key,a.value,a.left,a.right,a._count)}function d(a,b){return new q(a,b.key,b.value,b.left,b.right,b._count)}function b(a){a._count=
1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function t(a,b){this._compare=a;this.root=b}function p(a,b){if(b.left){var f=p(a,b.left);if(f)return f}if(f=a(b.key,b.value))return f;if(b.right)return p(a,b.right)}function w(a,b,f,d){if(0>=b(a,d.key)){if(d.left){var r=w(a,b,f,d.left);if(r)return r}if(r=f(d.key,d.value))return r}if(d.right)return w(a,b,f,d.right)}function x(a,b,f,d,r){var h=f(a,r.key),l=f(b,r.key);if(0>=h&&(r.left&&(h=x(a,b,f,d,r.left))||0<l&&(h=d(r.key,r.value))))return h;if(0<
l&&r.right)return x(a,b,f,d,r.right)}function u(a,b){this.tree=a;this._stack=b}function n(a,b){a.key=b.key;a.value=b.value;a.left=b.left;a.right=b.right;a._color=b._color;a._count=b._count}function h(a,b){return a<b?-1:a>b?1:0}e.exports=function(a){return new t(a||h,null)};a=t.prototype;Object.defineProperty(a,"keys",{get:function(){var a=[];this.forEach(function(b,f){a.push(b)});return a}});Object.defineProperty(a,"values",{get:function(){var a=[];this.forEach(function(b,f){a.push(f)});return a}});
Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,c){for(var f=this._compare,m=this.root,r=[],h=[];m;){var l=f(a,m.key);r.push(m);h.push(l);m=0>=l?m.left:m.right}r.push(new q(0,a,c,null,null,1));for(l=r.length-2;0<=l;--l)m=r[l],r[l]=0>=h[l]?new q(m._color,m.key,m.value,r[l+1],m.right,m._count+1):new q(m._color,m.key,m.value,m.left,r[l+1],m._count+1);for(l=r.length-1;1<l;--l){h=r[l-1];m=r[l];if(1===h._color||1===m._color)break;var e=r[l-2];
if(e.left===h)if(h.left===m){var n=e.right;if(n&&0===n._color)h._color=1,e.right=d(1,n),e._color=0,--l;else{e._color=0;e.left=h.right;h._color=1;h.right=e;r[l-2]=h;r[l-1]=m;b(e);b(h);3<=l&&(l=r[l-3],l.left===e?l.left=h:l.right=h);break}}else if((n=e.right)&&0===n._color)h._color=1,e.right=d(1,n),e._color=0,--l;else{h.right=m.left;e._color=0;e.left=m.right;m._color=1;m.left=h;m.right=e;r[l-2]=m;r[l-1]=h;b(e);b(h);b(m);3<=l&&(l=r[l-3],l.left===e?l.left=m:l.right=m);break}else if(h.right===m)if((n=e.left)&&
0===n._color)h._color=1,e.left=d(1,n),e._color=0,--l;else{e._color=0;e.right=h.left;h._color=1;h.left=e;r[l-2]=h;r[l-1]=m;b(e);b(h);3<=l&&(l=r[l-3],l.right===e?l.right=h:l.left=h);break}else if((n=e.left)&&0===n._color)h._color=1,e.left=d(1,n),e._color=0,--l;else{h.left=m.right;e._color=0;e.right=m.left;m._color=1;m.right=h;m.left=e;r[l-2]=m;r[l-1]=h;b(e);b(h);b(m);3<=l&&(l=r[l-3],l.right===e?l.right=m:l.left=m);break}}r[0]._color=1;return new t(f,r[0])};a.forEach=function(a,b,f){if(this.root)switch(arguments.length){case 1:return p(a,
this.root);case 2:return w(b,this._compare,a,this.root);case 3:if(!(0<=this._compare(b,f)))return x(b,f,this._compare,a,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.left;return new u(this,a)}});Object.defineProperty(a,"end",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.right;return new u(this,a)}});a.at=function(a){if(0>a)return new u(this,[]);for(var b=this.root,f=[];;){f.push(b);if(b.left){if(a<b.left._count){b=b.left;continue}a-=
b.left._count}if(!a)return new u(this,f);--a;if(b.right){if(a>=b.right._count)break;b=b.right}else break}return new u(this,[])};a.ge=function(a){for(var b=this._compare,f=this.root,d=[],r=0;f;){var h=b(a,f.key);d.push(f);0>=h&&(r=d.length);f=0>=h?f.left:f.right}d.length=r;return new u(this,d)};a.gt=function(a){for(var b=this._compare,f=this.root,d=[],h=0;f;){var l=b(a,f.key);d.push(f);0>l&&(h=d.length);f=0>l?f.left:f.right}d.length=h;return new u(this,d)};a.lt=function(a){for(var b=this._compare,
f=this.root,d=[],h=0;f;){var l=b(a,f.key);d.push(f);0<l&&(h=d.length);f=0>=l?f.left:f.right}d.length=h;return new u(this,d)};a.le=function(a){for(var b=this._compare,f=this.root,d=[],h=0;f;){var l=b(a,f.key);d.push(f);0<=l&&(h=d.length);f=0>l?f.left:f.right}d.length=h;return new u(this,d)};a.find=function(a){for(var b=this._compare,f=this.root,d=[];f;){var h=b(a,f.key);d.push(f);if(0===h)return new u(this,d);f=0>=h?f.left:f.right}return new u(this,[])};a.remove=function(a){return(a=this.find(a))?
a.remove():this};a.get=function(a){for(var b=this._compare,f=this.root;f;){var d=b(a,f.key);if(0===d)return f.value;f=0>=d?f.left:f.right}};a=u.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=function(){return new u(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var c=
Array(a.length),f=a[a.length-1];c[c.length-1]=new q(f._color,f.key,f.value,f.left,f.right,f._count);for(var m=a.length-2;0<=m;--m)f=a[m],c[m]=f.left===a[m+1]?new q(f._color,f.key,f.value,c[m+1],f.right,f._count):new q(f._color,f.key,f.value,f.left,c[m+1],f._count);f=c[c.length-1];if(f.left&&f.right){a=c.length;for(f=f.left;f.right;)c.push(f),f=f.right;m=c[a-1];c.push(new q(f._color,m.key,m.value,f.left,f.right,f._count));c[a-1].key=f.key;c[a-1].value=f.value;for(m=c.length-2;m>=a;--m)f=c[m],c[m]=
new q(f._color,f.key,f.value,f.left,c[m+1],f._count);c[a-1].left=c[a]}f=c[c.length-1];if(0===f._color)for(m=c[c.length-2],m.left===f?m.left=null:m.right===f&&(m.right=null),c.pop(),m=0;m<c.length;++m)c[m]._count--;else if(f.left||f.right)for(f.left?n(f,f.left):f.right&&n(f,f.right),f._color=1,m=0;m<c.length-1;++m)c[m]._count--;else{if(1===c.length)return new t(this.tree._compare,null);for(m=0;m<c.length;++m)c[m]._count--;for(var m=c[c.length-2],h,e,p,g=c.length-1;0<=g;--g){a=c[g];if(0===g){a._color=
1;break}h=c[g-1];if(h.left===a){e=h.right;if(e.right&&0===e.right._color){e=h.right=l(e);p=e.right=l(e.right);h.right=e.left;e.left=h;e.right=p;e._color=h._color;a._color=1;h._color=1;p._color=1;b(h);b(e);if(1<g){var u=c[g-2];u.left===h?u.left=e:u.right=e}c[g-1]=e;break}else if(e.left&&0===e.left._color){e=h.right=l(e);p=e.left=l(e.left);h.right=p.left;e.left=p.right;p.left=h;p.right=e;p._color=h._color;h._color=1;e._color=1;a._color=1;b(h);b(e);b(p);1<g&&(u=c[g-2],u.left===h?u.left=p:u.right=p);
c[g-1]=p;break}if(1===e._color)if(0===h._color){h._color=1;h.right=d(0,e);break}else h.right=d(0,e);else e=l(e),h.right=e.left,e.left=h,e._color=h._color,h._color=0,b(h),b(e),1<g&&(u=c[g-2],u.left===h?u.left=e:u.right=e),c[g-1]=e,c[g]=h,g+1<c.length?c[g+1]=a:c.push(a),g+=2}else{e=h.left;if(e.left&&0===e.left._color){e=h.left=l(e);p=e.left=l(e.left);h.left=e.right;e.right=h;e.left=p;e._color=h._color;a._color=1;h._color=1;p._color=1;b(h);b(e);1<g&&(u=c[g-2],u.right===h?u.right=e:u.left=e);c[g-1]=e;
break}else if(e.right&&0===e.right._color){e=h.left=l(e);p=e.right=l(e.right);h.left=p.right;e.right=p.left;p.right=h;p.left=e;p._color=h._color;h._color=1;e._color=1;a._color=1;b(h);b(e);b(p);1<g&&(u=c[g-2],u.right===h?u.right=p:u.left=p);c[g-1]=p;break}if(1===e._color)if(0===h._color){h._color=1;h.left=d(0,e);break}else h.left=d(0,e);else e=l(e),h.left=e.right,e.right=h,e._color=h._color,h._color=0,b(h),b(e),1<g&&(u=c[g-2],u.right===h?u.right=e:u.left=e),c[g-1]=e,c[g]=h,g+1<c.length?c[g+1]=a:c.push(a),
g+=2}}m.left===f?m.left=null:m.right=null}return new t(this.tree._compare,c[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var a=0,b=this._stack;if(0===b.length)return(a=this.tree.root)?a._count:0;b[b.length-1].left&&(a=b[b.length-
1].left._count);for(var f=b.length-2;0<=f;--f)b[f+1]===b[f].right&&(++a,b[f].left&&(a+=b[f].left._count));return a},enumerable:!0});a.next=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.right)for(b=b.right;b;)a.push(b),b=b.left;else for(a.pop();0<a.length&&a[a.length-1].right===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].left===
a[b])return!0;return!1}});a.update=function(a){var b=this._stack;if(0===b.length)throw Error("Can't update empty node!");var f=Array(b.length),d=b[b.length-1];f[f.length-1]=new q(d._color,d.key,a,d.left,d.right,d._count);for(a=b.length-2;0<=a;--a)d=b[a],f[a]=d.left===b[a+1]?new q(d._color,d.key,d.value,f[a+1],d.right,d._count):new q(d._color,d.key,d.value,d.left,f[a+1],d._count);return new t(this.tree._compare,f[0])};a.prev=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.left)for(b=
b.left;b;)a.push(b),b=b.right;else for(a.pop();0<a.length&&a[a.length-1].left===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].right===a[b])return!0;return!1}})},{}],46:[function(a,e,g){function q(a){if(0>a)return Number("0/0");for(var e=d[0],l=d.length-1;0<l;--l)e+=d[l]/(a+l);l=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(l)-l+Math.log(e)-
Math.log(a)}var l=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],d=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
e.exports=function t(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*t(1-a));if(100<a)return Math.exp(q(a));--a;for(var d=l[0],e=1;9>e;e++)d+=l[e]/(a+e);e=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(e,a+.5)*Math.exp(-e)*d};e.exports.log=q},{}],47:[function(a,e,g){e.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],48:[function(a,e,g){var q=a("./identity");e.exports=function(a,d,b,e){var p,g,x,u,n,
h,k,c,f=d[0],m=d[1];d=d[2];x=e[0];u=e[1];g=e[2];k=b[0];e=b[1];p=b[2];if(1E-6>Math.abs(f-k)&&1E-6>Math.abs(m-e)&&1E-6>Math.abs(d-p))return q(a);b=f-k;e=m-e;k=d-p;c=1/Math.sqrt(b*b+e*e+k*k);b*=c;e*=c;k*=c;p=u*k-g*e;g=g*b-x*k;x=x*e-u*b;(c=Math.sqrt(p*p+g*g+x*x))?(c=1/c,p*=c,g*=c,x*=c):x=g=p=0;u=e*x-k*g;n=k*p-b*x;h=b*g-e*p;(c=Math.sqrt(u*u+n*n+h*h))?(c=1/c,u*=c,n*=c,h*=c):h=n=u=0;a[0]=p;a[1]=u;a[2]=b;a[3]=0;a[4]=g;a[5]=n;a[6]=e;a[7]=0;a[8]=x;a[9]=h;a[10]=k;a[11]=0;a[12]=-(p*f+g*m+x*d);a[13]=-(u*f+n*m+
h*d);a[14]=-(b*f+e*m+k*d);a[15]=1;return a}},{"./identity":47}],49:[function(a,e,g){e.exports=function(a,e,d,b,g){e=1/Math.tan(e/2);var p=1/(b-g);a[0]=e/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(g+b)*p;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*g*b*p;a[15]=0;return a}},{}],50:[function(a,e,g){g.read=function(a,e,d,b,g){var p;p=8*g-b-1;var w=(1<<p)-1,x=w>>1,u=-7;g=d?g-1:0;var n=d?-1:1,h=a[e+g];g+=n;d=h&(1<<-u)-1;h>>=-u;for(u+=p;0<u;d=256*d+a[e+g],g+=n,u-=8);p=d&(1<<-u)-1;d>>=-u;
for(u+=b;0<u;p=256*p+a[e+g],g+=n,u-=8);if(0===d)d=1-x;else{if(d===w)return p?NaN:Infinity*(h?-1:1);p+=Math.pow(2,b);d-=x}return(h?-1:1)*p*Math.pow(2,d-b)};g.write=function(a,e,d,b,g,p){var w,x=8*p-g-1,u=(1<<x)-1,n=u>>1,h=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;p=b?0:p-1;var k=b?1:-1,c=0>e||0===e&&0>1/e?1:0;e=Math.abs(e);isNaN(e)||Infinity===e?(e=isNaN(e)?1:0,b=u):(b=Math.floor(Math.log(e)/Math.LN2),1>e*(w=Math.pow(2,-b))&&(b--,w*=2),e=1<=b+n?e+h/w:e+h*Math.pow(2,1-n),2<=e*w&&(b++,w/=2),b+n>=u?(e=
0,b=u):1<=b+n?(e=(e*w-1)*Math.pow(2,g),b+=n):(e=e*Math.pow(2,n-1)*Math.pow(2,g),b=0));for(;8<=g;a[d+p]=e&255,p+=k,e/=256,g-=8);b=b<<g|e;for(x+=g;0<x;a[d+p]=b&255,p+=k,b/=256,x-=8);a[d+p-k]|=128*c}},{}],51:[function(a,e,g){function q(a,b,c,d,h){this.mid=a;this.left=b;this.right=c;this.leftPoints=d;this.rightPoints=h;this.count=(b?b.count:0)+(c?c.count:0)+d.length}function l(a,b){a.mid=b.mid;a.left=b.left;a.right=b.right;a.leftPoints=b.leftPoints;a.rightPoints=b.rightPoints;a.count=b.count}function d(a,
b){var c=h(b);a.mid=c.mid;a.left=c.left;a.right=c.right;a.leftPoints=c.leftPoints;a.rightPoints=c.rightPoints;a.count=c.count}function b(a,b){var c=a.intervals([]),h=c.indexOf(b);if(0>h)return 0;c.splice(h,1);d(a,c);return 1}function t(a,b,c){for(var d=0;d<a.length&&a[d][0]<=b;++d){var h=c(a[d]);if(h)return h}}function p(a,b,c){for(var d=a.length-1;0<=d&&a[d][1]>=b;--d){var h=c(a[d]);if(h)return h}}function w(a,b){for(var c=0;c<a.length;++c){var d=b(a[c]);if(d)return d}}function x(a,b){return a-b}
function u(a,b){var c=a[0]-b[0];return c?c:a[1]-b[1]}function n(a,b){var c=a[1]-b[1];return c?c:a[0]-b[0]}function h(a){if(0===a.length)return null;for(var b=[],c=0;c<a.length;++c)b.push(a[c][0],a[c][1]);b.sort(x);for(var b=b[b.length>>1],d=[],e=[],k=[],c=0;c<a.length;++c){var l=a[c];l[1]<b?d.push(l):b<l[0]?e.push(l):k.push(l)}a=k.slice();k.sort(u);a.sort(n);return new q(b,h(d),h(e),k,a)}function k(a){this.root=a}var c=a("binary-search-bounds");e.exports=function(a){return a&&0!==a.length?new k(h(a)):
new k(null)};a=q.prototype;a.intervals=function(a){a.push.apply(a,this.leftPoints);this.left&&this.left.intervals(a);this.right&&this.right.intervals(a);return a};a.insert=function(a){var b=this.count-this.leftPoints.length;this.count+=1;if(a[1]<this.mid)this.left?4*(this.left.count+1)>3*(b+1)?(b=this.intervals([]),b.push(a),d(this,b)):this.left.insert(a):this.left=h([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(b+1)?(b=this.intervals([]),b.push(a),d(this,b)):this.right.insert(a):
this.right=h([a]);else{var b=c.ge(this.leftPoints,a,u),e=c.ge(this.rightPoints,a,n);this.leftPoints.splice(b,0,a);this.rightPoints.splice(e,0,a)}};a.remove=function(a){var d=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(d-1))return b(this,a);d=this.left.remove(a);if(2===d)return this.left=null,--this.count,1;1===d&&--this.count;return d}if(a[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(d-1))return b(this,a);
d=this.right.remove(a);if(2===d)return this.right=null,--this.count,1;1===d&&--this.count;return d}if(1===this.count)return this.leftPoints[0]===a?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){a=this;for(var h=this.left;h.right;)a=h,h=h.right;if(a===this)h.right=this.right;else{var e=this.left,d=this.right;a.count-=h.count;a.right=h.left;h.left=e;h.right=d}l(this,h);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
l(this,this.left):l(this,this.right);return 1}for(e=c.ge(this.leftPoints,a,u);e<this.leftPoints.length&&this.leftPoints[e][0]===a[0];++e)if(this.leftPoints[e]===a)for(--this.count,this.leftPoints.splice(e,1),d=c.ge(this.rightPoints,a,n);d<this.rightPoints.length&&this.rightPoints[d][1]===a[1];++d)if(this.rightPoints[d]===a)return this.rightPoints.splice(d,1),1;return 0};a.queryPoint=function(a,b){if(a<this.mid){if(this.left){var c=this.left.queryPoint(a,b);if(c)return c}return t(this.leftPoints,a,
b)}return a>this.mid?this.right&&(c=this.right.queryPoint(a,b))?c:p(this.rightPoints,a,b):w(this.leftPoints,b)};a.queryInterval=function(a,b,c){if(a<this.mid&&this.left){var d=this.left.queryInterval(a,b,c);if(d)return d}return b>this.mid&&this.right&&(d=this.right.queryInterval(a,b,c))?d:b<this.mid?t(this.leftPoints,b,c):a>this.mid?p(this.rightPoints,a,c):w(this.leftPoints,c)};a=k.prototype;a.insert=function(a){this.root?this.root.insert(a):this.root=new q(a[0],null,null,[a],[a])};a.remove=function(a){return this.root?
(a=this.root.remove(a),2===a&&(this.root=null),0!==a):!1};a.queryPoint=function(a,b){if(this.root)return this.root.queryPoint(a,b)};a.queryInterval=function(a,b,c){if(a<=b&&this.root)return this.root.queryInterval(a,b,c)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":52}],52:[function(a,e,g){function q(a,b,e,l,g,q){a=["function ",a,"(a,l,h,",
l.join(","),"){",q?"":"var i=",e?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",g?".get(m)":"[m]"];q?0>b.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",b,"){i=m;");e?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");q?a.push("return -1};"):a.push("return i};");return a.join("")}function l(a,b,e,l){return(new Function([q("A","x"+a+"y",b,["y"],!1,l),q("B","x"+a+"y",b,["y"],!0,l),q("P","c(x,y)"+a+"0",
b,["y","c"],!1,l),q("Q","c(x,y)"+a+"0",b,["y","c"],!0,l),"function dispatchBsearch",e,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",e].join("")))()}e.exports=
{ge:l(">=",!1,"GE"),gt:l(">",!1,"GT"),lt:l("<",!0,"LT"),le:l("<=",!0,"LE"),eq:l("-",!0,"EQ",!0)}},{}],53:[function(a,e,g){e.exports=function(a,e){e=e||Array(a.length);for(var d=0;d<a.length;++d)e[a[d]]=d;return e}},{}],54:[function(a,e,g){e.exports=function(a){for(var e=Array(a),d=0;d<a;++d)e[d]=d;return e}},{}],55:[function(a,e,g){function q(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}e.exports=function(a){return null!=a&&(q(a)||"function"===typeof a.readFloatLE&&
"function"===typeof a.slice&&q(a.slice(0,0))||!!a._isBuffer)}},{}],56:[function(a,e,g){var q={}.toString;e.exports=Array.isArray||function(a){return"[object Array]"==q.call(a)}},{}],57:[function(a,e,g){function q(a,b,d){for(var c=0,f=0;f<a;++f)b&1<<f&&(c|=1<<d[f]);return c}function l(a,h,e,c,f,m){function l(a,b){A.push("for(","i"+f[a],"=",b,";","i"+f[a],"<","s"+f[a],";","++","i"+f[a],"){")}function g(a){for(var b=0;b<C;++b)A.push("p"+b,"+=","u"+b+"_"+f[a],";");A.push("}")}function D(){for(var a=1;a<
1<<G;++a)A.push(u,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",u,";")}function v(a,d){if(0>a){for(var h=0;h<C;++h)m[h]?A.push("c"+h+"_0","=","d"+h,".get(","p"+h,");"):A.push("c"+h+"_0","=","d"+h,"[","p"+h,"];");for(var e=[],h=0;h<C;++h)e.push("c"+h+"_0");for(h=0;h<c;++h)e.push("x"+h);A.push("b0","=",t,"[",x,"]=phase(",e.join(),");");for(e=1;e<1<<G;++e)A.push("b"+e,"=",t,"[",x,"+","e"+e,"];");h=[];for(e=1;e<1<<G;++e)h.push("(b0!==b"+e+")");A.push("if(",h.join("||"),"){");for(var k=[],h=0;h<G;++h)k.push("i"+
h);for(h=0;h<C;++h)for(k.push("c"+h+"_0"),e=1;e<1<<G;++e)m[h]?A.push("c"+h+"_"+e,"=","d"+h,".get(","p"+h,"+","d"+h+"_"+e,");"):A.push("c"+h+"_"+e,"=","d"+h,"[","p"+h,"+","d"+h+"_"+e,"];"),k.push("c"+h+"_"+e);for(h=0;h<1<<G;++h)k.push("b"+h);for(h=0;h<c;++h)k.push("x"+h);A.push("vertex(",k.join(),");","v0","=",b,"[",x,"]=",p,"++;");h=(1<<G)-1;k="b"+h;for(e=0;e<G;++e)if(0===(d&~(1<<e))){for(var n=h^1<<e,q="b"+n,u=[],w=n;0<w;w=w-1&n)u.push(b+"["+x+"+"+("e"+w)+"]");u.push("v0");for(w=0;w<C;++w)e&1?u.push("c"+
w+"_"+h,"c"+w+"_"+n):u.push("c"+w+"_"+n,"c"+w+"_"+h);e&1?u.push(k,q):u.push(q,k);for(w=0;w<c;++w)u.push("x"+w);A.push("if(",k,"!==",q,"){","face(",u.join(),")}")}A.push("}",x,"+=1;")}else{for(e=a-1;0<=e;--e)l(e,0);h=[];for(e=0;e<C;++e)m[e]?h.push("d"+e+".get("+("p"+e)+")"):h.push("d"+e+"["+("p"+e)+"]");for(e=0;e<c;++e)h.push("x"+e);A.push(t,"[",x,"++]=phase(",h.join(),");");for(e=0;e<a;++e)g(e);for(e=0;e<C;++e)A.push("p"+e,"+=","u"+e+"_"+f[a],";");A.push("if(","s"+f[a],">0){","i"+f[a],"=1;");v(a-
1,d|1<<f[a]);for(e=0;e<C;++e)A.push("p"+e,"+=","u"+e+"_"+f[a],";");a===G-1&&(A.push(x,"=0;"),D());l(a,2);v(a-1,d);a===G-1&&(A.push("if(","i"+f[G-1],"&1){",x,"=0;}"),D());g(a);A.push("}")}}var C=m.length,G=f.length;if(2>G)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var H="extractContour"+f.join("_"),A=[],B=[],K=[],F=0;F<C;++F)K.push("a"+F);for(F=0;F<c;++F)K.push("x"+F);for(F=0;F<G;++F)B.push("s"+F+"=a0.shape["+F+"]|0");for(F=0;F<C;++F){B.push("d"+F+"="+("a"+F)+".data",
"o"+F+"="+("a"+F)+".offset|0");for(var E=0;E<G;++E)B.push("t"+F+"_"+E+"="+("a"+F)+".stride["+E+"]|0")}for(F=0;F<C;++F)for(B.push("p"+F+"="+("o"+F)),B.push("c"+F+"_0"),E=1;E<1<<G;++E){for(var R=[],J=0;J<G;++J)E&1<<J&&R.push("-"+("t"+F+"_"+J));B.push("d"+F+"_"+E+"=("+R.join("")+")|0");B.push("c"+F+"_"+E+"=0")}for(F=0;F<C;++F)for(E=0;E<G;++E)J=["t"+F+"_"+f[E]],0<E&&J.push("t"+F+"_"+f[E-1]+"*"+("s"+f[E-1])),B.push("u"+F+"_"+f[E]+"=("+J.join("-")+")|0");for(F=0;F<G;++F)B.push("i"+F+"=0");B.push(p+"=0");
E=["2"];for(F=G-2;0<=F;--F)E.push("s"+f[F]);B.push(w+"=("+E.join("*")+")|0",t+"=mallocUint32("+w+")",b+"=mallocUint32("+w+")",x+"=0");B.push("b0=0");for(E=1;E<1<<G;++E){F=[];R=[];for(J=0;J<G;++J)E&1<<J&&(0===R.length?F.push("1"):F.unshift(R.join("*"))),R.push("s"+f[J]);J="";0>F[0].indexOf("s"+f[G-2])&&(J="-");R=q(G,E,f);B.push("e"+R+"=(-"+F.join("-")+")|0","y"+R+"=("+J+F.join("-")+")|0","b"+R+"=0")}B.push("v0=0",u+"=0");v(G-1,0);A.push("freeUint32(",b,");freeUint32(",t,");");H=["'use strict';function ",
H,"(",K.join(),"){var ",B.join(),";",A.join(""),"}return ",H].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",H))(a,h,e,d.mallocUint32,d.freeUint32)}var d=a("typedarray-pool");e.exports=function(a){function b(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&b("Must specify arguments");var d=a.order;Array.isArray(d)||b("Must specify order");var c=a.arrayArguments||1;1>c&&b("Must have at least one array argument");var f=a.scalarArguments||0;0>f&&b("Scalar arg count must be > 0");
"function"!==typeof a.vertex&&b("Must specify vertex creation function");"function"!==typeof a.cell&&b("Must specify cell creation function");"function"!==typeof a.phase&&b("Must specify phase function");for(var e=a.getters||[],r=Array(c),g=0;g<c;++g)0<=e.indexOf(g)?r[g]=!0:r[g]=!1;return l(a.vertex,a.cell,a.phase,f,d,r)};var b="V",t="P",p="N",w="Q",x="X",u="T"},{"typedarray-pool":90}],58:[function(a,e,g){function q(a,b){return a[0]-b[0]}function l(){var a=this.stride,b=Array(a.length),d;for(d=0;d<
b.length;++d)b[d]=[Math.abs(a[d]),d];b.sort(q);a=Array(b.length);for(d=0;d<a.length;++d)a[d]=b[d][1];return a}function d(a,b){var d=["View",b,"d",a].join("");0>b&&(d="View_Nil"+a);var e="generic"===a;if(-1===b){var c,d=new Function("function "+d+"(a){this.data=a;};var proto="+d+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+d+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
d+"(a){return new "+d+"(a);}");return d()}if(0===b)return d=new Function("TrivialArray","function "+d+"(a,d) {this.data = a;this.offset = d};var proto="+d+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+d+"_copy() {return new "+d+"(this.data,this.offset)};proto.pick=function "+d+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
d+"_get(){return "+(e?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+d+"_set(v){return "+(e?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+d+"(a,b,c,d){return new "+d+"(a,d)}"),d(x[a][0]);c=["'use strict'"];var f=t(b),m=f.map(function(a){return"i"+a}),r="this.offset+"+f.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),g=f.map(function(a){return"b"+a}).join(","),p=f.map(function(a){return"c"+a}).join(",");c.push("function "+
d+"(a,"+g+","+p+",d){this.data=a","this.shape=["+g+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+d+".prototype","proto.dtype='"+a+"'","proto.dimension="+b);c.push("Object.defineProperty(proto,'size',{get:function "+d+"_size(){return "+f.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===b?c.push("proto.order=[0]"):(c.push("Object.defineProperty(proto,'order',{get:"),4>b?(c.push("function "+d+"_order(){"),2===b?c.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===b&&c.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):c.push("ORDER})"));c.push("proto.set=function "+d+"_set("+m.join(",")+",v){");e?c.push("return this.data.set("+r+",v)}"):c.push("return this.data["+r+"]=v}");c.push("proto.get=function "+d+"_get("+m.join(",")+"){");e?c.push("return this.data.get("+
r+")}"):c.push("return this.data["+r+"]}");c.push("proto.index=function "+d+"_index(",m.join(),"){return "+r+"}");c.push("proto.hi=function "+d+"_hi("+m.join(",")+"){return new "+d+"(this.data,"+f.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+f.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");e=f.map(function(a){return"a"+a+"=this.shape["+a+"]"});r=f.map(function(a){return"c"+a+"=this.stride["+a+"]"});c.push("proto.lo=function "+
d+"_lo("+m.join(",")+"){var b=this.offset,d=0,"+e.join(",")+","+r.join(","));for(e=0;e<b;++e)c.push("if(typeof i"+e+"==='number'&&i"+e+">=0){d=i"+e+"|0;b+=c"+e+"*d;a"+e+"-=d}");c.push("return new "+d+"(this.data,"+f.map(function(a){return"a"+a}).join(",")+","+f.map(function(a){return"c"+a}).join(",")+",b)}");c.push("proto.step=function "+d+"_step("+m.join(",")+"){var "+f.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+f.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(e=0;e<b;++e)c.push("if(typeof i"+e+"==='number'){d=i"+e+"|0;if(d<0){c+=b"+e+"*(a"+e+"-1);a"+e+"=ceil(-a"+e+"/d)}else{a"+e+"=ceil(a"+e+"/d)}b"+e+"*=d}");c.push("return new "+d+"(this.data,"+f.map(function(a){return"a"+a}).join(",")+","+f.map(function(a){return"b"+a}).join(",")+",c)}");r=Array(b);g=Array(b);for(e=0;e<b;++e)r[e]="a[i"+e+"]",g[e]="b[i"+e+"]";c.push("proto.transpose=function "+d+"_transpose("+m+"){"+m.map(function(a,b){return a+"=("+a+"===undefined?"+
b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+d+"(this.data,"+r.join(",")+","+g.join(",")+",this.offset)}");c.push("proto.pick=function "+d+"_pick("+m+"){var a=[],b=[],c=this.offset");for(e=0;e<b;++e)c.push("if(typeof i"+e+"==='number'&&i"+e+">=0){c=(c+this.stride["+e+"]*i"+e+")|0}else{a.push(this.shape["+e+"]);b.push(this.stride["+e+"])}");c.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");c.push("return function construct_"+d+"(data,shape,stride,offset){return new "+
d+"(data,"+f.map(function(a){return"shape["+a+"]"}).join(",")+","+f.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");d=new Function("CTOR_LIST","ORDER",c.join("\n"));return d(x[a],l)}function b(a){if(p(a))return"buffer";if(w)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var t=a("iota-array"),p=a("is-buffer"),w="undefined"!==typeof Float64Array,x={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in x)x[a].push(d(a,-1))});e.exports=function(a,e,h,k){if(void 0===a){var c=x.array[0];return c([])}"number"===
typeof a&&(a=[a]);void 0===e&&(e=[a.length]);c=e.length;if(void 0===h){h=Array(c);for(var f=c-1,m=1;0<=f;--f)h[f]=m,m*=e[f]}if(void 0===k)for(f=k=0;f<c;++f)0>h[f]&&(k-=(e[f]-1)*h[f]);f=b(a);for(m=x[f];m.length<=c+1;)m.push(d(f,m.length-1));c=m[c+1];return c(a,e,h,k)}},{"iota-array":54,"is-buffer":55}],59:[function(a,e,g){var q=a("double-bits"),l=Math.pow(2,-1074);e.exports=function(a,b){if(isNaN(a)||isNaN(b))return NaN;if(a===b)return a;if(0===a)return 0>b?-l:l;var e=q.hi(a),g=q.lo(a);b>a===0<a?4294967295===
g?(e+=1,g=0):g+=1:0===g?(g=4294967295,--e):--g;return q.pack(g,e)}},{"double-bits":42}],60:[function(a,e,g){e.exports=function(a){var b=a.length;if(b<q)for(var e=1,g=0;g<b;++g)for(var w=0;w<g;++w)if(a[g]<a[w])e=-e;else{if(a[g]===a[w])return 0}else{for(var x=l.mallocUint8(b),g=0;g<b;++g)x[g]=0;e=1;for(g=0;g<b;++g)if(!x[g]){var u=1;x[g]=1;for(w=a[g];w!==g;w=a[w]){if(x[w])return l.freeUint8(x),0;u+=1;x[w]=1}u&1||(e=-e)}l.freeUint8(x)}return e};var q=32,l=a("typedarray-pool")},{"typedarray-pool":90}],
61:[function(a,e,g){var q=a("typedarray-pool"),l=a("invert-permutation");g.rank=function(a){var b=a.length;switch(b){case 0:case 1:return 0;case 2:return a[1]}var e=q.mallocUint32(b),g=q.mallocUint32(b),w=0,x;l(a,g);for(x=0;x<b;++x)e[x]=a[x];for(x=b-1;0<x;--x)b=g[x],a=e[x],e[x]=e[b],e[b]=a,g[x]=g[a],g[a]=b,w=(w+a)*x;q.freeUint32(g);q.freeUint32(e);return w};g.unrank=function(a,b,e){switch(a){case 0:return e?e:[];case 1:return e?(e[0]=0,e):[0];case 2:return e?(b?(e[0]=0,e[1]=1):(e[0]=1,e[1]=0),e):
b?[0,1]:[1,0]}e=e||Array(a);var l,g,q=1;e[0]=0;for(g=1;g<a;++g)e[g]=g,q=q*g|0;for(g=a-1;0<g;--g)a=b/q|0,b=b-a*q|0,q=q/g|0,l=e[g]|0,e[g]=e[a]|0,e[a]=l|0;return e}},{"invert-permutation":53,"typedarray-pool":90}],62:[function(a,e,g){e.exports=function(a,d){function b(a,b){var c=u[b][a[b]];c.splice(c.indexOf(a),1)}function e(a,c,h){var k,g,l;for(g=0;2>g;++g)if(0<u[g][c].length){k=u[g][c][0];l=g;break}g=k[l^1];for(var n=0;2>n;++n)for(var p=u[n][c],t=0;t<p.length;++t){var w=p[t],x=w[n^1];0<q(d[a],d[c],
d[g],d[x])&&(k=w,g=x,l=n)}if(h)return g;k&&b(k,l);return g}function g(a,c){var h=u[c][a][0],k=[a];b(h,c);for(h=h[c^1];;){for(;h!==a;)k.push(h),h=e(k[k.length-2],h,!1);if(0===u[0][a].length+u[1][a].length)break;var h=k[k.length-1],l=a,n=k[1],p=e(h,l,!0);if(0>q(d[h],d[l],d[n],d[p]))break;k.push(a);h=e(h,l)}return k}for(var w=d.length|0,x=a.length,u=[Array(w),Array(w)],n=0;n<w;++n)u[0][n]=[],u[1][n]=[];for(n=0;n<x;++n){var h=a[n];u[0][h[0]].push(h);u[1][h[1]].push(h)}x=[];for(n=0;n<w;++n)0===u[0][n].length+
u[1][n].length&&x.push([n]);for(n=0;n<w;++n)for(h=0;2>h;++h){for(var k=[];0<u[h][n].length;){var c=g(n,h);c[1]===c[c.length-1]?k.push.apply(k,c):(0<k.length&&x.push(k),k=c)}0<k.length&&x.push(k)}return x};var q=a("compare-angle")},{"compare-angle":36}],63:[function(a,e,g){e.exports=function(a,d){for(var b=q(a,d.length),e=Array(d.length),g=Array(d.length),w=[],x=0;x<d.length;++x){var u=b[x].length;g[x]=u;e[x]=!0;1>=u&&w.push(x)}for(;0<w.length;)for(u=w.pop(),e[u]=!1,u=b[u],x=0;x<u.length;++x){var n=
u[x];0===--g[n]&&w.push(n)}b=Array(d.length);g=[];for(x=0;x<d.length;++x)e[x]?(u=g.length,b[x]=u,g.push(d[x])):b[x]=-1;w=[];for(x=0;x<a.length;++x)u=a[x],e[u[0]]&&e[u[1]]&&w.push([b[u[0]],b[u[1]]]);return[w,g]};var q=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":44}],64:[function(a,e,g){function q(a,b){for(var d=Array(a),c=0;c<a;++c)d[c]=b;return d}function l(a){for(var b=Array(a),d=0;d<a;++d)b[d]=[];return b}e.exports=function(a,e){function k(a){for(var b=a.length,c=0;c<b;++c)if(!E[a[c]])return!1;
return!0}var c=u(a,e);a=c[0];e=c[1];for(var f=e.length,m=d(a,e.length),g=0;g<f;++g)if(1===m[g].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var m=b(a,e),m=m.filter(function(a){for(var b=a.length,c=[0],d=0;d<b;++d)var f=e[a[d]],k=e[a[(d+1)%b]],m=p(-f[0],f[1]),g=p(-f[0],k[1]),f=p(k[0],f[1]),k=p(k[0],k[1]),c=w(c,w(w(m,g),w(f,k)));return 0<c[c.length-1]}),c=m.length,z=Array(c),D=Array(c),g=0;g<c;++g){z[g]=g;var v=Array(c),C=m[g].map(function(a){return e[a]}),G=t([C]),H=
0,A=0;a:for(;A<c;++A)if(v[A]=0,g!==A){for(var C=m[A],B=C.length,K=0;K<B;++K){var F=G(e[C[K]]);if(0!==F){0>F&&(v[A]=1,H+=1);continue a}}v[A]=1;H+=1}D[g]=[H,g,v]}D.sort(function(a,b){return b[0]-a[0]});for(g=0;g<c;++g)for(v=D[g],C=v[1],B=v[2],A=0;A<c;++A)B[A]&&(z[A]=C);D=l(c);for(g=0;g<c;++g)D[g].push(z[g]),D[z[g]].push(g);for(var v={},E=q(f,!1),g=0;g<c;++g)for(C=m[g],B=C.length,A=0;A<B;++A)f=C[A],G=C[(A+1)%B],H=Math.min(f,G)+":"+Math.max(f,G),H in v?(H=v[H],D[H].push(g),D[g].push(H),E[f]=E[G]=!0):
v[H]=g;A=[];f=q(c,-1);for(g=0;g<c;++g)z[g]!==g||k(m[g])?f[g]=-1:(A.push(g),f[g]=0);for(c=[];0<A.length;){g=A.pop();z=D[g];x(z,function(a,b){return a-b});var B=z.length,v=f[g],R;0===v&&(C=m[g],R=[C]);for(g=0;g<B;++g)C=z[g],0<=f[C]||(f[C]=v^1,A.push(C),0===v&&(C=m[C],k(C)||(C.reverse(),R.push(C))));0===v&&c.push(R)}return c};var d=a("edges-to-adjacency-list"),b=a("planar-dual"),t=a("point-in-big-polygon"),p=a("two-product"),w=a("robust-sum"),x=a("uniq"),u=a("./lib/trim-leaves")},{"./lib/trim-leaves":63,
"edges-to-adjacency-list":44,"planar-dual":62,"point-in-big-polygon":66,"robust-sum":78,"two-product":88,uniq:92}],65:[function(a,e,g){arguments[4][52][0].apply(g,arguments)},{dup:52}],66:[function(a,e,g){function q(){return!0}function l(a){return function(b,d){var e=a[b];return e?!!e.queryPoint(d,q):!1}}function d(a){for(var b={},d=0;d<a.length;++d){var e=a[d],h=e[0][0],g=e[0][1],e=e[1][1],g=[Math.min(g,e),Math.max(g,e)];h in b?b[h].push(g):b[h]=[g]}a={};h=Object.keys(b);for(d=0;d<h.length;++d)a[h[d]]=
n(b[h[d]]);return l(a)}function b(a,b){return function(d){var e=h.le(b,d[0]);if(0>e)return 1;var g=a[e];if(!g)if(0<e&&b[e]===d[0])g=a[e-1];else return 1;for(e=1;g;){var l=g.key,n=x(d,l[0],l[1]);if(l[0][0]<l[1][0])if(0>n)g=g.left;else if(0<n)e=-1,g=g.right;else return 0;else if(0<n)g=g.left;else if(0>n)e=1,g=g.right;else return 0}return e}}function t(a){return 1}function p(a){return function(b){return a(b[0],b[1])?0:1}}function w(a,b){return function(d){return a(d[0],d[1])?0:b(d)}}e.exports=function(a){for(var c=
a.length,f=[],e=[],h=0;h<c;++h)for(var g=a[h],l=g.length,n=l-1,q=0;q<l;n=q++){var n=g[n],x=g[q];n[0]===x[0]?e.push([n,x]):f.push([n,x])}if(0===f.length)return 0===e.length?t:p(d(e));a=u(f);a=b(a.slabs,a.coordinates);return 0===e.length?a:w(d(e),a)};var x=a("robust-orientation")[3],u=a("slab-decomposition"),n=a("interval-tree-1d"),h=a("binary-search-bounds")},{"binary-search-bounds":65,"interval-tree-1d":51,"robust-orientation":73,"slab-decomposition":85}],67:[function(a,e,g){var q=a("big-rat/add");
e.exports=function(a,d){for(var b=a.length,e=Array(b),g=0;g<b;++g)e[g]=q(a[g],d[g]);return e}},{"big-rat/add":2}],68:[function(a,e,g){e.exports=function(a){for(var d=Array(a.length),b=0;b<a.length;++b)d[b]=q(a[b]);return d};var q=a("big-rat")},{"big-rat":5}],69:[function(a,e,g){var q=a("big-rat"),l=a("big-rat/mul");e.exports=function(a,b){for(var e=q(b),g=a.length,w=Array(g),x=0;x<g;++x)w[x]=l(a[x],e);return w}},{"big-rat":5,"big-rat/mul":14}],70:[function(a,e,g){var q=a("big-rat/sub");e.exports=
function(a,d){for(var b=a.length,e=Array(b),g=0;g<b;++g)e[g]=q(a[g],d[g]);return e}},{"big-rat/sub":16}],71:[function(a,e,g){(function(a,l){"object"===typeof g&&"undefined"!==typeof e?e.exports=l():"function"===typeof define&&define.amd?define(l):a.createREGL=l()})(this,function(){function a(b){return"undefined"!==typeof btoa?btoa(b):"base64:"+b}function e(a){a=Error("(regl) "+a);console.error(a);throw a;}function d(a,b){a||e(b)}function b(a){return a?": "+a:""}function g(a,c,d){0>c.indexOf(a)&&e("invalid value"+
b(d)+". must be one of: "+c)}function p(a,b){for(a+="";a.length<b;)a=" "+a;return a}function w(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function x(a,b){this.number=a;this.line=b;this.errors=[]}function u(a,b,c){this.file=a;this.line=b;this.message=c}function n(){var a=Error(),a=(a.stack||a).toString(),b=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return b?b[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function h(){var a=Error(),a=(a.stack||a).toString(),
b=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return b?b[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function k(b,c){var d=b.split("\n"),f=1,e=0,h={unknown:new w,0:new w};h.unknown.name=h[0].name=c||n();h.unknown.lines.push(new x(0,""));for(var g=0;g<d.length;++g){var k=d[g],m=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(k);if(m)switch(m[1]){case "line":if(m=/(\d+)(\s+\d+)?/.exec(m[2]))f=m[1]|0,m[2]&&(e=m[2]|0,e in h||(h[e]=new w));break;case "define":if(m=/SHADER_NAME(_B64)?\s+(.*)$/.exec(m[2]))h[e].name=
m[1]?a(m[2]):m[2]}h[e].lines.push(new x(f++,k))}Object.keys(h).forEach(function(a){var b=h[a];b.lines.forEach(function(a){b.index[a.number]=a})});return h}function c(a){var b=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var c=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(a);c?b.push(new u(c[1]|0,c[2]|0,c[3].trim())):0<a.length&&b.push(new u("unknown",0,a))}});return b}function f(a,b){b.forEach(function(b){var c=a[b.file];if(c){var d=c.index[b.line];if(d){d.errors.push(b);c.hasErrors=!0;return}}a.unknown.hasErrors=
!0;a.unknown.lines[0].errors.push(b)})}function m(a){a._commandRef=n()}function r(a,b){var c=h();e(a+" in command "+(b||n())+("unknown"===c?"":" called from "+c))}function z(a,c,d,f){typeof a!==c&&r("invalid parameter type"+b(d)+". expected "+c+", got "+typeof a,f||n())}function D(a,b){return 32820===a||32819===a||33635===a?2:34042===a?4:ja[a]*b}function v(a,b){this.id=kb++;this.type=a;this.data=b}function C(a){if(0===a.length)return[];var b=a.charAt(0),c=a.charAt(a.length-1);if(1<a.length&&b===c&&
('"'===b||"'"===b))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return C(a.substr(0,b.index)).concat(C(b[1])).concat(C(a.substr(b.index+b[0].length)));b=a.split(".");if(1===b.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(c=0;c<b.length;++c)a=a.concat(C(b[c]));return a}function G(a){return"["+C(a).join("][")+"]"}function H(){var a={"":0},b=[""];return{id:function(c){var d=a[c];
if(d)return d;d=a[c]=b.length;b.push(c);return d},str:function(a){return b[a]}}}function A(a,b,c){function d(){var b=window.innerWidth,e=window.innerHeight;a!==document.body&&(e=a.getBoundingClientRect(),b=e.right-e.left,e=e.bottom-e.top);f.width=c*b;f.height=c*e;Y(f.style,{width:b+"px",height:e+"px"})}var f=document.createElement("canvas");Y(f.style,{border:0,margin:0,padding:0,top:0,left:0});a.appendChild(f);a===document.body&&(f.style.position="absolute",Y(a.style,{margin:0,padding:0}));window.addEventListener("resize",
d,!1);d();return{canvas:f,onDestroy:function(){window.removeEventListener("resize",d);a.removeChild(f)}}}function B(a,b){function c(d){try{return a.getContext(d,b)}catch(f){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function K(a){if("string"===typeof a)return a.split();y(Array.isArray(a),"invalid extension array");return a}function F(a){return"string"===typeof a?(y("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}function E(a){var b=
a||{},c,d,f,e;a={};var h=[],g=[],k="undefined"===typeof window?1:window.devicePixelRatio,m=!1,l=function(a){a&&y.raise(a)},n=function(){};"string"===typeof b?(y("undefined"!==typeof document,"selector queries only supported in DOM enviroments"),c=document.querySelector(b),y(c,"invalid query string for element")):"object"===typeof b?"string"===typeof b.nodeName&&"function"===typeof b.appendChild&&"function"===typeof b.getBoundingClientRect?c=b:"function"===typeof b.drawArrays||"function"===typeof b.drawElements?
(e=b,f=e.canvas):(y.constructor(b),"gl"in b?e=b.gl:"canvas"in b?f=F(b.canvas):"container"in b&&(d=F(b.container)),"attributes"in b&&(a=b.attributes,y.type(a,"object","invalid context attributes")),"extensions"in b&&(h=K(b.extensions)),"optionalExtensions"in b&&(g=K(b.optionalExtensions)),"onDone"in b&&(y.type(b.onDone,"function","invalid or missing onDone callback"),l=b.onDone),"profile"in b&&(m=!!b.profile),"pixelRatio"in b&&(k=+b.pixelRatio,y(0<k,"invalid pixel ratio"))):y.raise("invalid arguments to regl");
c&&("canvas"===c.nodeName.toLowerCase()?f=c:d=c);if(!e){if(!f){y("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");c=A(d||document.body,l,k);if(!c)return null;f=c.canvas;n=c.onDestroy}e=B(f,a)}return e?{gl:e,canvas:f,container:d,extensions:h,optionalExtensions:g,pixelRatio:k,profile:m,onDone:l,onDestroy:n}:(n(),l("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function R(a,b){function c(b){y.type(b,"string",
"extension name must be string");b=b.toLowerCase();var f;try{f=d[b]=a.getExtension(b)}catch(e){}return!!f}for(var d={},f=0;f<b.extensions.length;++f){var e=b.extensions[f];if(!c(e))return b.onDestroy(),b.onDone('"'+e+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}b.optionalExtensions.forEach(c);return{extensions:d,restore:function(){Object.keys(d).forEach(function(a){if(!c(a))throw Error("(regl): error restoring extension "+a);})}}}
function J(a){return!!a&&"object"===typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"===typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||ba(a.data))}function I(a,b){for(var c=Array(a),d=0;d<a;++d)c[d]=b(d);return c}function P(a){var b,c;b=(65535<a)<<4;a>>>=b;c=(255<a)<<3;a>>>=c;b|=c;c=(15<a)<<2;a>>>=c;b|=c;c=(3<a)<<1;return b|c|a>>>c>>1}function L(a){a:{for(var b=16;268435456>=b;b*=16)if(a<=b){a=b;break a}a=0}b=Xa[P(a)>>2];return 0<b.length?b.pop():new ArrayBuffer(a)}
function M(a){Xa[P(a.byteLength)>>2].push(a)}function O(a,b,c,d,f,e){for(var h=0;h<b;++h)for(var g=a[h],k=0;k<c;++k)for(var m=g[k],l=0;l<d;++l)f[e++]=m[l]}function Q(a,b,c,d,f){for(var e=1,h=c+1;h<b.length;++h)e*=b[h];var g=b[c];if(4===b.length-c){var k=b[c+1],m=b[c+2];b=b[c+3];for(h=0;h<g;++h)O(a[h],k,m,b,d,f),f+=e}else for(h=0;h<g;++h)Q(a[h],b,c+1,d,f),f+=e}function W(a){return Ha[Object.prototype.toString.call(a)]|0}function ga(a,b){for(var c=0;c<b.length;++c)a[c]=b[c]}function ia(a,b,c,d,f,e,
h){for(var g=0,k=0;k<c;++k)for(var m=0;m<d;++m)a[g++]=b[f*k+e*m+h]}function Z(a,b,c){function d(b){this.id=g++;this.buffer=a.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;c.profile&&(this.stats={size:0})}function f(b,c,d){b.byteLength=c.byteLength;a.bufferData(b.type,c,d)}function e(a,b,c,d,h,g){a.usage=c;if(Array.isArray(b)){if(a.dtype=d||5126,0<b.length)if(Array.isArray(b[0])){h=Ya(b);for(var k=d=1;k<h.length;++k)d*=h[k];
a.dimension=d;b=Ua(b,h,a.dtype);f(a,b,c);g?a.persistentData=b:ca.freeType(b)}else"number"===typeof b[0]?(a.dimension=h,h=ca.allocType(a.dtype,b.length),ga(h,b),f(a,h,c),g?a.persistentData=h:ca.freeType(h)):ba(b[0])?(a.dimension=b[0].length,a.dtype=d||W(b[0])||5126,b=Ua(b,[b.length,b[0].length],a.dtype),f(a,b,c),g?a.persistentData=b:ca.freeType(b)):y.raise("invalid buffer data")}else if(ba(b))a.dtype=d||W(b),a.dimension=h,f(a,b,c),g&&(a.persistentData=new Uint8Array(new Uint8Array(b.buffer)));else if(J(b)){h=
b.shape;var m=b.stride,k=b.offset,l=0,n=0,r=0,p=0;1===h.length?(l=h[0],n=1,r=m[0],p=0):2===h.length?(l=h[0],n=h[1],r=m[0],p=m[1]):y.raise("invalid shape");a.dtype=d||W(b.data)||5126;a.dimension=n;h=ca.allocType(a.dtype,l*n);ia(h,b.data,l,n,r,p,k);f(a,h,c);g?a.persistentData=h:ca.freeType(h)}else y.raise("invalid buffer data")}function h(c){b.bufferCount--;var d=c.buffer;y(d,"buffer must not be deleted already");a.deleteBuffer(d);c.buffer=null;delete k[c.id]}var g=0,k={};d.prototype.bind=function(){a.bindBuffer(this.type,
this.buffer)};d.prototype.destroy=function(){h(this)};var m=[];c.profile&&(b.getTotalBufferSize=function(){var a=0;Object.keys(k).forEach(function(b){a+=k[b].stats.size});return a});return{create:function(f,g,m,l){function n(b){var d=35044,f=null,h=0,g=0,k=1;Array.isArray(b)||ba(b)||J(b)?f=b:"number"===typeof b?h=b|0:b&&(y.type(b,"object","buffer arguments must be an object, a number or an array"),"data"in b&&(y(null===f||Array.isArray(f)||ba(f)||J(f),"invalid data for buffer"),f=b.data),"usage"in
b&&(y.parameter(b.usage,Oa,"invalid buffer usage"),d=Oa[b.usage]),"type"in b&&(y.parameter(b.type,Ia,"invalid buffer type"),g=Ia[b.type]),"dimension"in b&&(y.type(b.dimension,"number","invalid dimension"),k=b.dimension|0),"length"in b&&(y.nni(h,"buffer length must be a nonnegative integer"),h=b.length|0));p.bind();f?e(p,f,d,g,k,l):(a.bufferData(p.type,h,d),p.dtype=g||5121,p.usage=d,p.dimension=k,p.byteLength=h);c.profile&&(p.stats.size=p.byteLength*ta[p.dtype]);return n}function r(b,c){y(c+b.byteLength<=
p.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+c+" to a buffer of size "+p.byteLength);a.bufferSubData(p.type,c,b)}b.bufferCount++;var p=new d(g);k[p.id]=p;m||n(f);n._reglType="buffer";n._buffer=p;n.subdata=function(a,b){var c=(b||0)|0,d;p.bind();if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var f=ca.allocType(p.dtype,a.length);ga(f,a);r(f,c);ca.freeType(f)}else Array.isArray(a[0])||ba(a[0])?(d=Ya(a),
f=Ua(a,d,p.dtype),r(f,c),ca.freeType(f)):y.raise("invalid buffer data")}else if(ba(a))r(a,c);else if(J(a)){d=a.shape;var e=a.stride,h=f=0,g=0,k=0;1===d.length?(f=d[0],h=1,g=e[0],k=0):2===d.length?(f=d[0],h=d[1],g=e[0],k=e[1]):y.raise("invalid shape");d=Array.isArray(a.data)?p.dtype:W(a.data);d=ca.allocType(d,f*h);ia(d,a.data,f,h,g,k,a.offset);r(d,c);ca.freeType(d)}else y.raise("invalid data for buffer subdata");return n};c.profile&&(n.stats=p.stats);n.destroy=function(){h(p)};return n},createStream:function(a,
b){var c=m.pop();c||(c=new d(a));c.bind();e(c,b,35040,0,1,!1);return c},destroyStream:function(a){m.push(a)},clear:function(){pa(k).forEach(h);m.forEach(h)},getBuffer:function(a){return a&&a._buffer instanceof d?a._buffer:null},restore:function(){pa(k).forEach(function(b){b.buffer=a.createBuffer();a.bindBuffer(b.type,b.buffer);a.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:e}}function aa(a,b,c,d){function f(a){this.id=k++;g[this.id]=this;this.buffer=a;this.primType=4;this.type=
this.vertCount=0}function e(d,f,h,g,k,m,l){d.buffer.bind();if(f){var n=l;l||ba(f)&&(!J(f)||ba(f.data))||(n=b.oes_element_index_uint?5125:5123);c._initBuffer(d.buffer,f,h,n,3)}else a.bufferData(34963,m,h),d.buffer.dtype=n||5121,d.buffer.usage=h,d.buffer.dimension=3,d.buffer.byteLength=m;n=l;if(!l){switch(d.buffer.dtype){case 5121:case 5120:n=5121;break;case 5123:case 5122:n=5123;break;case 5125:case 5124:n=5125;break;default:y.raise("unsupported type for element array")}d.buffer.dtype=n}d.type=n;y(5125!==
n||!!b.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");f=k;0>f&&(f=d.buffer.byteLength,5123===n?f>>=1:5125===n&&(f>>=2));d.vertCount=f;f=g;0>g&&(f=4,g=d.buffer.dimension,1===g&&(f=0),2===g&&(f=1),3===g&&(f=4));d.primType=f}function h(a){d.elementsCount--;y(null!==a.buffer,"must not double destroy elements");delete g[a.id];a.buffer.destroy();a.buffer=null}var g={},k=0,m={uint8:5121,uint16:5123};b.oes_element_index_uint&&(m.uint32=5125);f.prototype.bind=
function(){this.buffer.bind()};var l=[];return{create:function(a,b){function g(a){if(a)if("number"===typeof a)k(a),l.primType=4,l.vertCount=a|0,l.type=5121;else{var b=null,c=35044,d=-1,f=-1,h=0,n=0;if(Array.isArray(a)||ba(a)||J(a))b=a;else if(y.type(a,"object","invalid arguments for elements"),"data"in a&&(b=a.data,y(Array.isArray(b)||ba(b)||J(b),"invalid data for element buffer")),"usage"in a&&(y.parameter(a.usage,Oa,"invalid element buffer usage"),c=Oa[a.usage]),"primitive"in a&&(y.parameter(a.primitive,
Ba,"invalid element buffer primitive"),d=Ba[a.primitive]),"count"in a&&(y("number"===typeof a.count&&0<=a.count,"invalid vertex count for elements"),f=a.count|0),"type"in a&&(y.parameter(a.type,m,"invalid buffer type"),n=m[a.type]),"length"in a)h=a.length|0;else if(h=f,5123===n||5122===n)h*=2;else if(5125===n||5124===n)h*=4;e(l,b,c,d,f,h,n)}else k(),l.primType=4,l.vertCount=0,l.type=5121;return g}var k=c.create(null,34963,!0),l=new f(k._buffer);d.elementsCount++;g(a);g._reglType="elements";g._elements=
l;g.subdata=function(a,b){k.subdata(a,b);return g};g.destroy=function(){h(l)};return g},createStream:function(a){var b=l.pop();b||(b=new f(c.create(null,34963,!0,!1)._buffer));e(b,a,35040,-1,-1,0,0);return b},destroyStream:function(a){l.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof f?a._elements:null},clear:function(){pa(g).forEach(h)}}}function U(a){for(var b=ca.allocType(5123,a.length),c=0;c<a.length;++c)if(isNaN(a[c]))b[c]=65535;else if(Infinity===a[c])b[c]=
31744;else if(-Infinity===a[c])b[c]=64512;else{Za[0]=a[c];var d=lb[0],f=d>>>31<<15,e=(d<<1>>>24)-127,d=d>>13&1023;b[c]=-24>e?f:-14>e?f+(d+1024>>-14-e):15<e?f+31744:f+(e+15<<10)+d}return b}function N(a){return Array.isArray(a)||ba(a)}function X(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function S(a){return Array.isArray(a)&&0!==a.length&&N(a[0])?!0:!1}function ea(a){return Object.prototype.toString.call(a)}function la(a){if(!a)return!1;var b=ea(a);return 0<=mb.indexOf(b)?!0:
X(a)||S(a)||J(a)}function Ma(a,b){36193===a.type?(a.data=U(b),ca.freeType(b)):a.data=b}function Pa(a,b,c,d,f,e){a="undefined"!==typeof V[a]?V[a]:ma[a]*Ca[b];e&&(a*=6);if(f){for(d=0;1<=c;)d+=a*c*c,c/=2;return d}return a*c*d}function nb(a,b,c,d,f,e,h){function g(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.channels=this.height=this.width=this.colorSpace=0}function k(a,b){a.internalformat=b.internalformat;a.format=
b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function m(a,d){if("object"===typeof d&&d){"premultiplyAlpha"in d&&(y.type(d.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=d.premultiplyAlpha);"flipY"in d&&(y.type(d.flipY,"boolean","invalid texture flip"),a.flipY=d.flipY);"alignment"in d&&(y.oneOf(d.alignment,
[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=d.alignment);"colorSpace"in d&&(y.parameter(d.colorSpace,L,"invalid colorSpace"),a.colorSpace=L[d.colorSpace]);if("type"in d){var f=d.type;y(b.oes_texture_float||!("float"===f||"float32"===f),"you must enable the OES_texture_float extension in order to use floating point textures.");y(b.oes_texture_half_float||!("half float"===f||"float16"===f),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");
y(b.webgl_depth_texture||!("uint16"===f||"uint32"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");y.parameter(f,K,"invalid texture type");a.type=K[f]}var e=a.width,h=a.height,g=a.channels,f=!1;"shape"in d?(y(Array.isArray(d.shape)&&2<=d.shape.length,"shape must be an array"),e=d.shape[0],h=d.shape[1],3===d.shape.length&&(g=d.shape[2],y(0<g&&4>=g,"invalid number of channels"),f=!0),y(0<=e&&e<=c.maxTextureSize,"invalid width"),y(0<=
h&&h<=c.maxTextureSize,"invalid height")):("radius"in d&&(e=h=d.radius,y(0<=e&&e<=c.maxTextureSize,"invalid radius")),"width"in d&&(e=d.width,y(0<=e&&e<=c.maxTextureSize,"invalid width")),"height"in d&&(h=d.height,y(0<=h&&h<=c.maxTextureSize,"invalid height")),"channels"in d&&(g=d.channels,y(0<g&&4>=g,"invalid number of channels"),f=!0));a.width=e|0;a.height=h|0;a.channels=g|0;e=!1;"format"in d&&(e=d.format,y(b.webgl_depth_texture||!("depth"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),
y.parameter(e,ra,"invalid texture format"),h=a.internalformat=ra[e],a.format=ob[h],e in K&&!("type"in d)&&(a.type=K[e]),e in M&&(a.compressed=!0),e=!0);!f&&e?a.channels=ma[a.format]:f&&!e?a.channels!==Qa[a.format]&&(a.format=a.internalformat=Qa[a.channels]):e&&f&&y(a.channels===ma[a.format],"number of channels inconsistent with specified format")}}function l(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}
function n(){g.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function r(a,b){var d=null;la(b)?d=b:b&&(y.type(b,"object","invalid pixel data type"),m(a,b),"x"in b&&(a.xOffset=b.x|0),"y"in b&&(a.yOffset=b.y|0),la(b.data)&&(d=b.data));y(!a.compressed||d instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(b.copy){y(!d,"can not specify copy and data field for the same texture");var e=f.viewportWidth,h=f.viewportHeight;
a.width=a.width||e-a.xOffset;a.height=a.height||h-a.yOffset;a.needsCopy=!0;y(0<=a.xOffset&&a.xOffset<e&&0<=a.yOffset&&a.yOffset<h&&0<a.width&&a.width<=e&&0<a.height&&a.height<=h,"copy texture read out of bounds")}else if(!d)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(ba(d))a.channels=a.channels||4,a.data=d,"type"in b||5121!==a.type||(a.type=Ha[Object.prototype.toString.call(d)]|0);else if(X(d)){a.channels=a.channels||4;e=d;h=e.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:h=
ca.allocType(a.type,h);h.set(e);a.data=h;break;case 36193:a.data=U(e);break;default:y.raise("unsupported texture type, must specify a typed array")}a.alignment=1;a.needsFree=!0}else if(J(d)){e=d.data;Array.isArray(e)||5121!==a.type||(a.type=Ha[Object.prototype.toString.call(e)]|0);var h=d.shape,g=d.stride,k,l,n,p;3===h.length?(n=h[2],p=g[2]):(y(2===h.length,"invalid ndarray pixel data, must be 2 or 3D"),p=n=1);k=h[0];l=h[1];h=g[0];g=g[1];a.alignment=1;a.width=k;a.height=l;a.channels=n;a.format=a.internalformat=
Qa[n];a.needsFree=!0;k=p;d=d.offset;n=a.width;p=a.height;l=a.channels;for(var q=ca.allocType(36193===a.type?5126:a.type,n*p*l),v=0,t=0;t<p;++t)for(var u=0;u<n;++u)for(var w=0;w<l;++w)q[v++]=e[h*u+g*t+k*w+d];Ma(a,q)}else if("[object HTMLCanvasElement]"===ea(d)||"[object CanvasRenderingContext2D]"===ea(d))"[object HTMLCanvasElement]"===ea(d)?a.element=d:a.element=d.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if("[object HTMLImageElement]"===ea(d))a.element=d,a.width=d.naturalWidth,
a.height=d.naturalHeight,a.channels=4;else if("[object HTMLVideoElement]"===ea(d))a.element=d,a.width=d.videoWidth,a.height=d.videoHeight,a.channels=4;else if(S(d)){e=a.width||d[0].length;h=a.height||d.length;g=a.channels;g=N(d[0][0])?g||d[0][0].length:g||1;k=Ra.shape(d);n=1;for(p=0;p<k.length;++p)n*=k[p];n=ca.allocType(36193===a.type?5126:a.type,n);Ra.flatten(d,k,"",n);Ma(a,n);a.alignment=1;a.width=e;a.height=h;a.channels=g;a.format=a.internalformat=Qa[g];a.needsFree=!0}5126===a.type?y(0<=c.extensions.indexOf("oes_texture_float"),
"oes_texture_float extension not enabled"):36193===a.type&&y(0<=c.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function p(b,c,f,e,h){var g=b.element,k=b.data,m=b.internalformat,n=b.format,r=b.type,q=b.width,v=b.height;l(b);g?a.texSubImage2D(c,h,f,e,n,r,g):b.compressed?a.compressedTexSubImage2D(c,h,f,e,m,q,v,k):b.needsCopy?(d(),a.copyTexSubImage2D(c,h,f,e,b.xOffset,b.yOffset,q,v)):a.texSubImage2D(c,h,f,e,q,v,n,r,k)}function q(){return da.pop()||new n}
function v(a){a.needsFree&&ca.freeType(a.data);n.call(a);da.push(a)}function t(){g.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function u(a,b,c){var d=a.images[0]=q();a.mipmask=1;d.width=a.width=b;d.height=a.height=c;d.channels=a.channels=4}function w(a,b){var c=null;if(la(b))c=a.images[0]=q(),k(c,a),r(c,b),a.mipmask=1;else if(m(a,b),Array.isArray(b.mipmap))for(var d=b.mipmap,f=0;f<d.length;++f)c=a.images[f]=q(),k(c,a),c.width>>=f,c.height>>=f,r(c,d[f]),
a.mipmask|=1<<f;else c=a.images[0]=q(),k(c,a),r(c,b),a.mipmask=1;k(a,a.images[0]);(a.compressed&&33776===a.internalformat||33777===a.internalformat||33778===a.internalformat||33779===a.internalformat)&&y(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function x(b,c){for(var f=b.images,e=0;e<f.length&&f[e];++e){var h=f[e],g=c,k=e,m=h.element,n=h.data,r=h.internalformat,p=h.format,q=h.type,v=h.width,t=h.height;l(h);
m?a.texImage2D(g,k,p,p,q,m):h.compressed?a.compressedTexImage2D(g,k,r,v,t,0,n):h.needsCopy?(d(),a.copyTexImage2D(g,k,p,h.xOffset,h.yOffset,v,t,0)):a.texImage2D(g,k,p,v,t,0,p,q,n)}}function z(){var a=Z.pop()||new t;g.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function D(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&v(b[c]),b[c]=null;Z.push(a)}function E(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}
function H(a,b){if("min"in b){var d=b.min;y.parameter(d,R);a.minFilter=R[d];0<=pb.indexOf(a.minFilter)&&(a.genMipmaps=!0)}"mag"in b&&(d=b.mag,y.parameter(d,I),a.magFilter=I[d]);var d=a.wrapS,f=a.wrapT;if("wrap"in b){var e=b.wrap;"string"===typeof e?(y.parameter(e,F),d=f=F[e]):Array.isArray(e)&&(y.parameter(e[0],F),y.parameter(e[1],F),d=F[e[0]],f=F[e[1]])}else"wrapS"in b&&(d=b.wrapS,y.parameter(d,F),d=F[d]),"wrapT"in b&&(f=b.wrapT,y.parameter(f,F),f=F[f]);a.wrapS=d;a.wrapT=f;"anisotropic"in b&&(d=
b.anisotropic,y("number"===typeof d&&1<=d&&d<=c.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);if("mipmap"in b){d=!1;switch(typeof b.mipmap){case "string":y.parameter(b.mipmap,$a,"invalid mipmap hint");a.mipmapHint=$a[b.mipmap];d=a.genMipmaps=!0;break;case "boolean":d=a.genMipmaps=b.mipmap;break;case "object":y(Array.isArray(b.mipmap),"invalid mipmap type");a.genMipmaps=!1;d=!0;break;default:y.raise("invalid mipmap type")}!d||"min"in b||(a.minFilter=9984)}}function A(c,
d){a.texParameteri(d,10241,c.minFilter);a.texParameteri(d,10240,c.magFilter);a.texParameteri(d,10242,c.wrapS);a.texParameteri(d,10243,c.wrapT);b.ext_texture_filter_anisotropic&&a.texParameteri(d,34046,c.anisotropic);c.genMipmaps&&(a.hint(33170,c.mipmapHint),a.generateMipmap(d))}function B(b){g.call(this);this.mipmask=0;this.internalformat=6408;this.id=qb++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new E;h.profile&&(this.stats={size:0})}
function C(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function G(){var b=aa[0];b?a.bindTexture(b.target,b.texture):a.bindTexture(3553,null)}function ab(b){var c=b.texture;y(c,"must not double destroy texture");var d=b.unit,f=b.target;0<=d&&(a.activeTexture(33984+d),a.bindTexture(f,null),aa[d]=null);a.deleteTexture(c);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete ha[b.id];e.textureCount--}var $a={"don't care":4352,"dont care":4352,nice:4354,fast:4353},F={repeat:10497,
clamp:33071,mirror:33648},I={nearest:9728,linear:9729},R=Y({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},I),L={none:0,browser:37444},K={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ra={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},M={};b.ext_srgb&&(ra.srgb=35904,ra.srgba=35906);b.oes_texture_float&&(K.float32=K["float"]=5126);b.oes_texture_half_float&&
(K.float16=K["half float"]=36193);b.webgl_depth_texture&&(Y(ra,{depth:6402,"depth stencil":34041}),Y(K,{uint16:5123,uint32:5125,"depth stencil":34042}));b.webgl_compressed_texture_s3tc&&Y(M,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});b.webgl_compressed_texture_atc&&Y(M,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});b.webgl_compressed_texture_pvrtc&&Y(M,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,
"rgba pvrtc 2bppv1":35843});b.webgl_compressed_texture_etc1&&(M["rgb etc1"]=36196);var P=Array.prototype.slice.call(a.getParameter(34467));Object.keys(M).forEach(function(a){var b=M[a];0<=P.indexOf(b)&&(ra[a]=b)});var Q=Object.keys(ra);c.textureFormats=Q;var O=[];Object.keys(ra).forEach(function(a){O[ra[a]]=a});var W=[];Object.keys(K).forEach(function(a){W[K[a]]=a});var La=[];Object.keys(I).forEach(function(a){La[I[a]]=a});var za=[];Object.keys(R).forEach(function(a){za[R[a]]=a});var Aa=[];Object.keys(F).forEach(function(a){Aa[F[a]]=
a});var ob=Q.reduce(function(a,b){var c=ra[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c?a[c]=c:32855===c||0<=b.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{}),da=[],Z=[],qb=0,ha={},V=c.maxTextureUnits,aa=Array(V).map(function(){return null});Y(B.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var c=0;c<V;++c){var d=aa[c];if(d){if(0<d.bindCount)continue;d.unit=-1}aa[c]=this;b=c;break}b>=V&&y.raise("insufficient number of texture units");h.profile&&e.maxTextureUnits<
b+1&&(e.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ab(this)}});h.profile&&(e.getTotalTextureSize=function(){var a=0;Object.keys(ha).forEach(function(b){a+=ha[b].stats.size});return a});return{create2D:function(b,d){function f(a,b){var d=g.texInfo;E.call(d);var e=z();"number"===typeof a?"number"===typeof b?u(e,a|0,b|0):u(e,a|0,a|0):a?(y.type(a,"object","invalid arguments to regl.texture"),
H(d,a),w(e,a)):u(e,1,1);d.genMipmaps&&(e.mipmask=(e.width<<1)-1);g.mipmask=e.mipmask;k(g,e);y.texture2D(d,e,c);g.internalformat=e.internalformat;f.width=e.width;f.height=e.height;C(g);x(e,3553);A(d,3553);G();D(e);h.profile&&(g.stats.size=Pa(g.internalformat,g.type,e.width,e.height,d.genMipmaps,!1));f.format=O[g.internalformat];f.type=W[g.type];f.mag=La[d.magFilter];f.min=za[d.minFilter];f.wrapS=Aa[d.wrapS];f.wrapT=Aa[d.wrapT];return f}var g=new B(3553);ha[g.id]=g;e.textureCount++;f(b,d);f.subimage=
function(a,b,c,d){y(!!a,"must specify image data");b|=0;c|=0;d|=0;var e=q();k(e,g);e.width=0;e.height=0;r(e,a);e.width=e.width||(g.width>>d)-b;e.height=e.height||(g.height>>d)-c;y(g.type===e.type&&g.format===e.format&&g.internalformat===e.internalformat,"incompatible format for texture.subimage");y(0<=b&&0<=c&&b+e.width<=g.width&&c+e.height<=g.height,"texture.subimage write out of bounds");y(g.mipmask&1<<d,"missing mipmap data");y(e.data||e.element||e.needsCopy,"missing image data");C(g);p(e,3553,
b,c,d);G();v(e);return f};f.resize=function(b,c){var d=b|0,e=c|0||d;if(d===g.width&&e===g.height)return f;f.width=g.width=d;f.height=g.height=e;C(g);for(var k=0;g.mipmask>>k;++k)a.texImage2D(3553,k,g.format,d>>k,e>>k,0,g.format,g.type,null);G();h.profile&&(g.stats.size=Pa(g.internalformat,g.type,d,e,!1,!1));return f};f._reglType="texture2d";f._texture=g;h.profile&&(f.stats=g.stats);f.destroy=function(){g.decRef()};return f},createCube:function(b,d,f,g,l,n){function t(a,b,d,f,e,g){var l,n=T.texInfo;
E.call(n);for(l=0;6>l;++l)fa[l]=z();if("number"!==typeof a&&a)if("object"===typeof a)if(b)w(fa[0],a),w(fa[1],b),w(fa[2],d),w(fa[3],f),w(fa[4],e),w(fa[5],g);else if(H(n,a),m(T,a),"faces"in a)for(a=a.faces,y(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),l=0;6>l;++l)y("object"===typeof a[l]&&!!a[l],"invalid input for cube map face"),k(fa[l],T),w(fa[l],a[l]);else for(l=0;6>l;++l)w(fa[l],a);else y.raise("invalid arguments to cube map");else for(a=a|0||1,l=0;6>l;++l)u(fa[l],a,a);
k(T,fa[0]);T.mipmask=n.genMipmaps?(fa[0].width<<1)-1:fa[0].mipmask;y.textureCube(T,n,fa,c);T.internalformat=fa[0].internalformat;t.width=fa[0].width;t.height=fa[0].height;C(T);for(l=0;6>l;++l)x(fa[l],34069+l);A(n,34067);G();h.profile&&(T.stats.size=Pa(T.internalformat,T.type,t.width,t.height,n.genMipmaps,!0));t.format=O[T.internalformat];t.type=W[T.type];t.mag=La[n.magFilter];t.min=za[n.minFilter];t.wrapS=Aa[n.wrapS];t.wrapT=Aa[n.wrapT];for(l=0;6>l;++l)D(fa[l]);return t}var T=new B(34067);ha[T.id]=
T;e.cubeCount++;var fa=Array(6);t(b,d,f,g,l,n);t.subimage=function(a,b,c,d,f){y(!!b,"must specify image data");y("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=0;d|=0;f|=0;var e=q();k(e,T);e.width=0;e.height=0;r(e,b);e.width=e.width||(T.width>>f)-c;e.height=e.height||(T.height>>f)-d;y(T.type===e.type&&T.format===e.format&&T.internalformat===e.internalformat,"incompatible format for texture.subimage");y(0<=c&&0<=d&&c+e.width<=T.width&&d+e.height<=T.height,"texture.subimage write out of bounds");
y(T.mipmask&1<<f,"missing mipmap data");y(e.data||e.element||e.needsCopy,"missing image data");C(T);p(e,34069+a,c,d,f);G();v(e);return t};t.resize=function(b){b|=0;if(b!==T.width){t.width=T.width=b;t.height=T.height=b;C(T);for(var c=0;6>c;++c)for(var d=0;T.mipmask>>d;++d)a.texImage2D(34069+c,d,T.format,b>>d,b>>d,0,T.format,T.type,null);G();h.profile&&(T.stats.size=Pa(T.internalformat,T.type,t.width,t.height,!1,!0));return t}};t._reglType="textureCube";t._texture=T;h.profile&&(t.stats=T.stats);t.destroy=
function(){T.decRef()};return t},clear:function(){for(var b=0;b<V;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),aa[b]=null;pa(ha).forEach(ab);e.cubeCount=0;e.textureCount=0},getTexture:function(a){return null},restore:function(){pa(ha).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var c=0;32>c;++c)if(0!==(b.mipmask&1<<c))if(3553===b.target)a.texImage2D(3553,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);else for(var d=0;6>
d;++d)a.texImage2D(34069+d,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);A(b.texInfo,b.target)})}}}function rb(a,b,c,d,f,e){function h(a,b,c){this.target=a;this.texture=b;this.renderbuffer=c;var d=a=0;b?(a=b.width,d=b.height):c&&(a=c.width,d=c.height);this.width=a;this.height=d}function g(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function k(a,b,c){if(a){if(a.texture){a=a.texture._texture;var d=Math.max(1,a.height);
y(Math.max(1,a.width)===b&&d===c,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,y(a.width===b&&a.height===c,"inconsistent width/height for renderbuffer");a.refCount+=1}}function m(b,c){c&&(c.texture?a.framebufferTexture2D(36160,b,c.target,c.texture._texture.texture,0):a.framebufferRenderbuffer(36160,b,36161,c.renderbuffer._renderbuffer.renderbuffer))}function l(a){var b=3553,c=null,d=null,f=a;"object"===typeof a&&(f=a.data,"target"in a&&(b=a.target|0));y.type(f,
"function","invalid attachment data");a=f._reglType;"texture2d"===a?(c=f,y(3553===b)):"textureCube"===a?(c=f,y(34069<=b&&34075>b,"invalid cube map target")):"renderbuffer"===a?(d=f,b=36161):y.raise("invalid regl object for attachment");return new h(b,c,d)}function n(a,b,c,e,g){if(c)return a=d.create2D({width:a,height:b,format:e,type:g}),a._texture.refCount=0,new h(3553,a,null);a=f.create({width:a,height:b,format:e});a._renderbuffer.refCount=0;return new h(36161,null,a)}function r(a){return a&&(a.texture||
a.renderbuffer)}function p(a,b,c){a&&(a.texture?a.texture.resize(b,c):a.renderbuffer&&a.renderbuffer.resize(b,c))}function q(){this.id=H++;A[this.id]=this;this.framebuffer=a.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function t(a){a.colorAttachments.forEach(g);g(a.depthAttachment);g(a.stencilAttachment);g(a.depthStencilAttachment)}function v(b){var c=b.framebuffer;y(c,"must not double destroy framebuffer");
a.deleteFramebuffer(c);b.framebuffer=null;e.framebufferCount--;delete A[b.id]}function u(b){var d;a.bindFramebuffer(36160,b.framebuffer);var f=b.colorAttachments;for(d=0;d<f.length;++d)m(36064+d,f[d]);for(d=f.length;d<c.maxColorAttachments;++d)a.framebufferTexture2D(36160,36064+d,3553,null,0);a.framebufferTexture2D(36160,33306,3553,null,0);a.framebufferTexture2D(36160,36096,3553,null,0);a.framebufferTexture2D(36160,36128,3553,null,0);m(36096,b.depthAttachment);m(36128,b.stencilAttachment);m(33306,
b.depthStencilAttachment);b=a.checkFramebufferStatus(36160);36053!==b&&y.raise("framebuffer configuration not supported, status = "+sb[b]);a.bindFramebuffer(36160,x.next);x.cur=x.next;a.getError()}function w(a,d){function f(a,d){var e;y(x.next!==h,"can not update framebuffer which is currently in use");var g=b.webgl_draw_buffers,m=0,p=0,q=!0,v=!0;e=null;var w=!0,ya="rgba",H="uint8",A=1,B=null,C=null,Na=null,G=!1;if("number"===typeof a)m=a|0,p=d|0||m;else if(a){y.type(a,"object","invalid arguments for framebuffer");
"shape"in a?(p=a.shape,y(Array.isArray(p)&&2<=p.length,"invalid shape for framebuffer"),m=p[0],p=p[1]):("radius"in a&&(m=p=a.radius),"width"in a&&(m=a.width),"height"in a&&(p=a.height));if("color"in a||"colors"in a)e=a.color||a.colors,Array.isArray(e)&&y(1===e.length||g,"multiple render targets not supported");if(!e){"colorCount"in a&&(A=a.colorCount|0,y(0<A,"invalid color buffer count"));"colorTexture"in a&&(w=!!a.colorTexture,ya="rgba4");if("colorType"in a){H=a.colorType;if(w)y(b.oes_texture_float||
!("float"===H||"float32"===H),"you must enable OES_texture_float in order to use floating point framebuffer objects"),y(b.oes_texture_half_float||!("half float"===H||"float16"===H),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===H||"float16"===H)y(b.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),ya="rgba16f";else if("float"===H||"float32"===H)y(b.webgl_color_buffer_float,
"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),ya="rgba32f";y.oneOf(H,E,"invalid color type")}if("colorFormat"in a)if(ya=a.colorFormat,0<=z.indexOf(ya))w=!0;else if(0<=D.indexOf(ya))w=!1;else if(w)y.oneOf(a.colorFormat,z,"invalid color format for texture");else y.oneOf(a.colorFormat,D,"invalid color format for renderbuffer")}if("depthTexture"in a||"depthStencilTexture"in a)G=!(!a.depthTexture&&!a.depthStencilTexture),y(!G||b.webgl_depth_texture,"webgl_depth_texture extension not supported");
"depth"in a&&("boolean"===typeof a.depth?q=a.depth:(B=a.depth,v=!1));"stencil"in a&&("boolean"===typeof a.stencil?v=a.stencil:(C=a.stencil,q=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?q=v=a.depthStencil:(Na=a.depthStencil,v=q=!1))}else m=p=1;var F=g=null,I=null,J=null;if(Array.isArray(e))g=e.map(l);else if(e)g=[l(e)];else for(g=Array(A),e=0;e<A;++e)g[e]=n(m,p,w,ya,H);y(b.webgl_draw_buffers||1>=g.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");
y(g.length<=c.maxColorAttachments,"too many color attachments, not supported");m=m||g[0].width;p=p||g[0].height;B?F=l(B):q&&!v&&(F=n(m,p,G,"depth","uint32"));C?I=l(C):v&&!q&&(I=n(m,p,!1,"stencil","uint8"));Na?J=l(Na):!B&&!C&&v&&q&&(J=n(m,p,G,"depth stencil","depth stencil"));y(1>=!!B+!!C+!!Na,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");q=null;for(e=0;e<g.length;++e)k(g[e],m,p),y(!g[e]||g[e].texture&&0<=tb.indexOf(g[e].texture._texture.format)||g[e].renderbuffer&&
0<=ub.indexOf(g[e].renderbuffer._renderbuffer.format),"framebuffer color attachment "+e+" is invalid"),g[e]&&g[e].texture&&(v=bb[g[e].texture._texture.format]*Sa[g[e].texture._texture.type],null===q?q=v:y(q===v,"all color attachments much have the same number of bits per pixel."));k(F,m,p);y(!F||F.texture&&6402===F.texture._texture.format||F.renderbuffer&&33189===F.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");k(I,m,p);y(!I||I.renderbuffer&&36168===I.renderbuffer._renderbuffer.format,
"invalid stencil attachment for framebuffer object");k(J,m,p);y(!J||J.texture&&34041===J.texture._texture.format||J.renderbuffer&&34041===J.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");t(h);h.width=m;h.height=p;h.colorAttachments=g;h.depthAttachment=F;h.stencilAttachment=I;h.depthStencilAttachment=J;f.color=g.map(r);f.depth=r(F);f.stencil=r(I);f.depthStencil=r(J);f.width=h.width;f.height=h.height;u(h);return f}var h=new q;e.framebufferCount++;f(a,d);
return Y(f,{resize:function(a,b){y(x.next!==h,"can not resize a framebuffer which is currently in use");var c=a|0,d=b|0||c;if(c===h.width&&d===h.height)return f;for(var e=h.colorAttachments,g=0;g<e.length;++g)p(e[g],c,d);p(h.depthAttachment,c,d);p(h.stencilAttachment,c,d);p(h.depthStencilAttachment,c,d);h.width=f.width=c;h.height=f.height=d;u(h);return f},_reglType:"framebuffer",_framebuffer:h,destroy:function(){v(h);t(h)},use:function(a){x.setFBO({framebuffer:f},a)}})}var x={cur:null,next:null,dirty:!1,
setFBO:null},z=["rgba"],D=["rgba4","rgb565","rgb5 a1"];b.ext_srgb&&D.push("srgba");b.ext_color_buffer_half_float&&D.push("rgba16f","rgb16f");b.webgl_color_buffer_float&&D.push("rgba32f");var E=["uint8"];b.oes_texture_half_float&&E.push("half float","float16");b.oes_texture_float&&E.push("float","float32");var H=0,A={};return Y(x,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof q)?a:null},create:w,createCube:function(a){function f(a){var c;
y(0>e.indexOf(x.next),"can not update framebuffer which is currently in use");var h=b.webgl_draw_buffers,g={color:null},k=0,m=null;c="rgba";var l="uint8",n=1;if("number"===typeof a)k=a|0;else if(a){y.type(a,"object","invalid arguments for framebuffer");"shape"in a?(k=a.shape,y(Array.isArray(k)&&2<=k.length,"invalid shape for framebuffer"),y(k[0]===k[1],"cube framebuffer must be square"),k=k[0]):("radius"in a&&(k=a.radius|0),"width"in a?(k=a.width|0,"height"in a&&y(a.height===k,"must be square")):
"height"in a&&(k=a.height|0));if("color"in a||"colors"in a)m=a.color||a.colors,Array.isArray(m)&&y(1===m.length||h,"multiple render targets not supported");m||("colorCount"in a&&(n=a.colorCount|0,y(0<n,"invalid color buffer count")),"colorType"in a&&(y.oneOf(a.colorType,E,"invalid color type"),l=a.colorType),"colorFormat"in a&&(c=a.colorFormat,y.oneOf(a.colorFormat,z,"invalid color format for texture")));"depth"in a&&(g.depth=a.depth);"stencil"in a&&(g.stencil=a.stencil);"depthStencil"in a&&(g.depthStencil=
a.depthStencil)}else k=1;if(m)if(Array.isArray(m))for(a=[],c=0;c<m.length;++c)a[c]=m[c];else a=[m];else for(a=Array(n),m={radius:k,format:c,type:l},c=0;c<n;++c)a[c]=d.createCube(m);g.color=Array(a.length);for(c=0;c<a.length;++c)n=a[c],y("function"===typeof n&&"textureCube"===n._reglType,"invalid cube map"),k=k||n.width,y(n.width===k&&n.height===k,"invalid cube map shape"),g.color[c]={target:34069,data:a[c]};for(c=0;6>c;++c){for(n=0;n<a.length;++n)g.color[n].target=34069+c;0<c&&(g.depth=e[0].depth,
g.stencil=e[0].stencil,g.depthStencil=e[0].depthStencil);if(e[c])e[c](g);else e[c]=w(g)}return Y(f,{width:k,height:k,color:a})}var e=Array(6);f(a);return Y(f,{faces:e,resize:function(a){var b=a|0;y(0<b&&b<=c.maxCubeMapSize,"invalid radius for cube fbo");if(b===f.width)return f;var d=f.color;for(a=0;a<d.length;++a)d[a].resize(b);for(a=0;6>a;++a)e[a].resize(b);f.width=f.height=b;return f},_reglType:"framebufferCube",destroy:function(){e.forEach(function(a){a.destroy()})}})},clear:function(){pa(A).forEach(v)},
restore:function(){pa(A).forEach(function(b){b.framebuffer=a.createFramebuffer();u(b)})}})}function cb(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function vb(a,b,c,d,f){a=c.maxAttributes;b=Array(a);for(c=0;c<a;++c)b[c]=new cb;return{Record:cb,scope:{},state:b}}function wb(a,b,c,d){function f(a,b,c,d){this.name=a;this.id=b;this.location=c;this.info=d}function e(a,b){for(var c=0;c<a.length;++c)if(a[c].id===
b.id){a[c].location=b.location;return}a.push(b)}function h(c,d,f){var e=35632===c?m:l,g=e[d];if(!g){var k=b.str(d),g=a.createShader(c);a.shaderSource(g,k);a.compileShader(g);y.shaderError(a,g,k,c,f);e[d]=g}return g}function g(a,b){this.id=r++;this.fragId=a;this.vertId=b;this.program=null;this.uniforms=[];this.attributes=[];d.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function k(c,g){var m,l;m=h(35632,c.fragId);l=h(35633,c.vertId);var n=c.program=a.createProgram();a.attachShader(n,m);
a.attachShader(n,l);a.linkProgram(n);y.linkError(a,n,b.str(c.fragId),b.str(c.vertId),g);var p=a.getProgramParameter(n,35718);d.profile&&(c.stats.uniformsCount=p);var r=c.uniforms;for(m=0;m<p;++m)if(l=a.getActiveUniform(n,m))if(1<l.size)for(var q=0;q<l.size;++q){var t=l.name.replace("[0]","["+q+"]");e(r,new f(t,b.id(t),a.getUniformLocation(n,t),l))}else e(r,new f(l.name,b.id(l.name),a.getUniformLocation(n,l.name),l));p=a.getProgramParameter(n,35721);d.profile&&(c.stats.attributesCount=p);r=c.attributes;
for(m=0;m<p;++m)(l=a.getActiveAttrib(n,m))&&e(r,new f(l.name,b.id(l.name),a.getAttribLocation(n,l.name),l))}var m={},l={},n={},p=[],r=0;d.profile&&(c.getMaxUniformsCount=function(){var a=0;p.forEach(function(b){b.stats.uniformsCount>a&&(a=b.stats.uniformsCount)});return a},c.getMaxAttributesCount=function(){var a=0;p.forEach(function(b){b.stats.attributesCount>a&&(a=b.stats.attributesCount)});return a});return{clear:function(){var b=a.deleteShader.bind(a);pa(m).forEach(b);m={};pa(l).forEach(b);l=
{};p.forEach(function(b){a.deleteProgram(b.program)});p.length=0;n={};c.shaderCount=0},program:function(a,b,d){y.command(0<=a,"missing vertex shader",d);y.command(0<=b,"missing fragment shader",d);var f=n[b];f||(f=n[b]={});var e=f[a];e||(e=new g(b,a),c.shaderCount++,k(e,d),f[a]=e,p.push(e));return e},restore:function(){m={};l={};for(var a=0;a<p.length;++a)k(p[a])},shader:h,frag:-1,vert:-1}}function xb(a,b,c,d,f,e){function h(g){var k;null===b.next?(y(f.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
k=5121):(y(null!==b.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),k=b.next.colorAttachments[0].texture._texture.type,e.oes_texture_float?y(5121===k||5126===k,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"):y(5121===k,"Reading from a framebuffer is only allowed for the type 'uint8'"));var m=0,l=0,n=d.framebufferWidth,p=d.framebufferHeight,r=null;ba(g)?r=g:g&&(y.type(g,"object","invalid arguments to regl.read()"),m=g.x|0,l=g.y|0,y(0<=m&&m<d.framebufferWidth,
"invalid x offset for regl.read"),y(0<=l&&l<d.framebufferHeight,"invalid y offset for regl.read"),n=(g.width||d.framebufferWidth-m)|0,p=(g.height||d.framebufferHeight-l)|0,r=g.data||null);r&&(5121===k?y(r instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===k&&y(r instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));y(0<n&&n+m<=d.framebufferWidth,"invalid width for read pixels");y(0<p&&p+l<=
d.framebufferHeight,"invalid height for read pixels");c();g=n*p*4;r||(5121===k?r=new Uint8Array(g):5126===k&&(r=r||new Float32Array(g)));y.isTypedArray(r,"data buffer for regl.read() must be a typedarray");y(r.byteLength>=g,"data buffer for regl.read() too small");a.pixelStorei(3333,4);a.readPixels(m,l,n,p,6408,k,r);return r}function g(a){var c;b.setFBO({framebuffer:a.framebuffer},function(){c=h(a)});return c}return function(a){return a&&"framebuffer"in a?g(a):h(a)}}function Da(a){return Array.prototype.slice.call(a)}
function Ea(a){return Da(a).join("")}function yb(){function a(){var b=[],d=[];return Y(function(){b.push.apply(b,Da(arguments))},{def:function(){var a="v"+c++;d.push(a);0<arguments.length&&(b.push(a,"="),b.push.apply(b,Da(arguments)),b.push(";"));return a},toString:function(){return Ea([0<d.length?"var "+d+";":"",Ea(b)])}})}function b(){function c(a,b){f(a,b,"=",d.def(a,b),";")}var d=a(),f=a(),e=d.toString,h=f.toString;return Y(function(){d.apply(d,Da(arguments))},{def:d.def,entry:d,exit:f,save:c,
set:function(a,b,f){c(a,b);d(a,b,"=",f,";")},toString:function(){return e()+h()}})}var c=0,d=[],f=[],e=a(),h={};return{global:e,link:function(a){for(var b=0;b<f.length;++b)if(f[b]===a)return d[b];b="g"+c++;d.push(b);f.push(a);return b},block:a,proc:function(a,c){function d(){var a="a"+f.length;f.push(a);return a}var f=[];c=c||0;for(var e=0;e<c;++e)d();var e=b(),g=e.toString;return h[a]=Y(e,{arg:d,toString:function(){return Ea(["function(",f.join(),"){",g(),"}"])}})},scope:b,cond:function(){var a=
Ea(arguments),c=b(),d=b(),f=c.toString,e=d.toString;return Y(c,{then:function(){c.apply(c,Da(arguments));return this},"else":function(){d.apply(d,Da(arguments));return this},toString:function(){var b=e();b&&(b="else{"+b+"}");return Ea(["if(",a,"){",f(),"}",b])}})},compile:function(){var a=['"use strict";',e,"return {"];Object.keys(h).forEach(function(b){a.push('"',b,'":',h[b].toString(),",")});a.push("}");var b=Ea(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,
d.concat(b)).apply(null,f)}}}function Ta(a){return Array.isArray(a)||ba(a)||J(a)}function db(a){return a.sort(function(a,b){return"viewport"===a?-1:"viewport"===b?1:a<b?-1:1})}function na(a,b,c,d){this.thisDep=a;this.contextDep=b;this.propDep=c;this.append=d}function wa(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function da(a){return new na(!1,!1,!1,a)}function ka(a,b){var c=a.type;return 0===c?(c=a.data.length,new na(!0,1<=c,2<=c,b)):4===c?(c=a.data,new na(c.thisDep,c.contextDep,c.propDep,
b)):new na(3===c,2===c,1===c,b)}function zb(a,b,c,d,f,e,h,g,k,m,l,n,p,r,q){function t(a){return a.replace(".","_")}function v(a,b,c){var d=t(a);Ka.push(a);Ja[d]=ba[d]=!!c;ua[d]=b}function u(a,b,c){var d=t(a);Ka.push(a);Array.isArray(c)?(ba[d]=c.slice(),Ja[d]=c.slice()):ba[d]=Ja[d]=c;va[d]=b}function w(){var a=yb(),c=a.link,d=a.global;a.id=ja++;a.batchId="0";var f=c(ia),e=a.shared={props:"a0"};Object.keys(ia).forEach(function(a){e[a]=d.def(f,".",a)});y.optional(function(){a.CHECK=c(y);a.commandStr=
y.guessCommand();a.command=c(a.commandStr);a.assert=function(a,b,d){a("if(!(",b,"))",this.CHECK,".commandRaise(",c(d),",",this.command,");")};ga.invalidBlendCombinations=eb});var h=a.next={},g=a.current={};Object.keys(va).forEach(function(a){Array.isArray(ba[a])&&(h[a]=d.def(e.next,".",a),g[a]=d.def(e.current,".",a))});var k=a.constants={};Object.keys(ga).forEach(function(a){k[a]=d.def(JSON.stringify(ga[a]))});a.invoke=function(b,d){switch(d.type){case 0:var f=["this",e.context,e.props,a.batchId];
return b.def(c(d.data),".call(",f.slice(0,Math.max(d.data.length+1,4)),")");case 1:return b.def(e.props,d.data);case 2:return b.def(e.context,d.data);case 3:return b.def("this",d.data);case 4:return d.data.append(a,b),d.data.ref}};a.attribCache={};var l={};a.scopeAttrib=function(a){a=b.id(a);if(a in l)return l[a];var d=m.scope[a];d||(d=m.scope[a]=new V);return l[a]=c(d)};return a}function x(a){var b=a["static"];a=a.dynamic;var c;if("profile"in b){var d=!!b.profile;c=da(function(a,b){return d});c.enable=
d}else if("profile"in a){var f=a.profile;c=ka(f,function(a,b){return a.invoke(b,f)})}return c}function z(a,b){var c=a["static"],d=a.dynamic;if("framebuffer"in c){var f=c.framebuffer;return f?(f=g.getFramebuffer(f),y.command(f,"invalid framebuffer object"),da(function(a,b){var c=a.link(f),d=a.shared;b.set(d.framebuffer,".next",c);d=d.context;b.set(d,".framebufferWidth",c+".width");b.set(d,".framebufferHeight",c+".height");return c})):da(function(a,b){var c=a.shared;b.set(c.framebuffer,".next","null");
c=c.context;b.set(c,".framebufferWidth",c+".drawingBufferWidth");b.set(c,".framebufferHeight",c+".drawingBufferHeight");return"null"})}if("framebuffer"in d){var e=d.framebuffer;return ka(e,function(a,b){var c=a.invoke(b,e),d=a.shared,f=d.framebuffer,h=b.def(f,".getFramebuffer(",c,")");y.optional(function(){a.assert(b,"!"+c+"||"+h,"invalid framebuffer object")});b.set(f,".next",h);d=d.context;b.set(d,".framebufferWidth",h+"?"+h+".width:"+d+".drawingBufferWidth");b.set(d,".framebufferHeight",h+"?"+
h+".height:"+d+".drawingBufferHeight");return h})}return null}function D(a,b,c){function d(a){if(a in f){var h=f[a];y.commandType(h,"object","invalid "+a,c.commandStr);var g=!0,k=h.x|0,m=h.y|0,l,n;"width"in h?(l=h.width|0,y.command(0<=l,"invalid "+a,c.commandStr)):g=!1;"height"in h?(n=h.height|0,y.command(0<=n,"invalid "+a,c.commandStr)):g=!1;return new na(!g&&b&&b.thisDep,!g&&b&&b.contextDep,!g&&b&&b.propDep,function(a,b){var c=a.shared.context,d=l;"width"in h||(d=b.def(c,".","framebufferWidth",
"-",k));var f=n;"height"in h||(f=b.def(c,".","framebufferHeight","-",m));return[k,m,d,f]})}if(a in e){var p=e[a],g=ka(p,function(b,c){var d=b.invoke(c,p);y.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});var f=b.shared.context,e=c.def(d,".x|0"),h=c.def(d,".y|0"),g=c.def('"width" in ',d,"?",d,".width|0:","(",f,".","framebufferWidth","-",e,")"),k=c.def('"height" in ',d,"?",d,".height|0:","(",f,".","framebufferHeight","-",h,")");y.optional(function(){b.assert(c,g+">=0&&"+
k+">=0","invalid "+a)});return[e,h,g,k]});b&&(g.thisDep=g.thisDep||b.thisDep,g.contextDep=g.contextDep||b.contextDep,g.propDep=g.propDep||b.propDep);return g}return b?new na(b.thisDep,b.contextDep,b.propDep,function(a,b){var c=a.shared.context;return[0,0,b.def(c,".","framebufferWidth"),b.def(c,".","framebufferHeight")]}):null}var f=a["static"],e=a.dynamic;if(a=d("viewport")){var h=a;a=new na(a.thisDep,a.contextDep,a.propDep,function(a,b){var c=h.append(a,b),d=a.shared.context;b.set(d,".viewportWidth",
c[2]);b.set(d,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:d("scissor.box")}}function H(a){function c(a){if(a in d){var e=b.id(d[a]);y.optional(function(){l.shader(fb[a],e,y.guessCommand())});var h=da(function(){return e});h.id=e;return h}if(a in f){var g=f[a];return ka(g,function(b,c){var d=b.invoke(c,g),f=c.def(b.shared.strings,".id(",d,")");y.optional(function(){c(b.shared.shader,".shader(",fb[a],",",f,",",b.command,");")});return f})}return null}var d=a["static"],f=a.dynamic,
e=c("frag"),h=c("vert"),g=null;wa(e)&&wa(h)?(g=l.program(h.id,e.id),a=da(function(a,b){return a.link(g)})):a=new na(e&&e.thisDep||h&&h.thisDep,e&&e.contextDep||h&&h.contextDep,e&&e.propDep||h&&h.propDep,function(a,b){var c=a.shared.shader,d;d=e?e.append(a,b):b.def(c,".","frag");var f;f=h?h.append(a,b):b.def(c,".","vert");var g=c+".program("+f+","+d;y.optional(function(){g+=","+a.command});return b.def(g+")")});return{frag:e,vert:h,progVar:a,program:g}}function E(a,b){function c(a,e){if(a in d){var g=
d[a]|0;y.command(!e||0<=g,"invalid "+a,b.commandStr);return da(function(a,b){e&&(a.OFFSET=g);return g})}if(a in f){var k=f[a];return ka(k,function(b,c){var d=b.invoke(c,k);e&&(b.OFFSET=d,y.optional(function(){b.assert(c,d+">=0","invalid "+a)}));return d})}return e&&h?da(function(a,b){a.OFFSET="0";return 0}):null}var d=a["static"],f=a.dynamic,h=function(){if("elements"in d){var a=d.elements;Ta(a)?a=e.getElements(e.create(a,!0)):a&&(a=e.getElements(a),y.command(a,"invalid elements",b.commandStr));var c=
da(function(b,c){if(a){var d=b.link(a);return b.ELEMENTS=d}return b.ELEMENTS=null});c.value=a;return c}if("elements"in f){var h=f.elements;return ka(h,function(a,b){var c=a.shared,d=c.isBufferArgs,c=c.elements,f=a.invoke(b,h),e=b.def("null"),d=b.def(d,"(",f,")"),g=a.cond(d).then(e,"=",c,".createStream(",f,");")["else"](e,"=",c,".getElements(",f,");");y.optional(function(){a.assert(g["else"],"!"+f+"||"+e,"invalid elements")});b.entry(g);b.exit(a.cond(d).then(c,".destroyStream(",e,");"));return a.ELEMENTS=
e})}return null}(),g=c("offset",!0);return{elements:h,primitive:function(){if("primitive"in d){var a=d.primitive;y.commandParameter(a,Ba,"invalid primitve",b.commandStr);return da(function(b,c){return Ba[a]})}if("primitive"in f){var c=f.primitive;return ka(c,function(a,b){var d=a.constants.primTypes,f=a.invoke(b,c);y.optional(function(){a.assert(b,f+" in "+d,"invalid primitive, must be one of "+Object.keys(Ba))});return b.def(d,"[",f,"]")})}return h?wa(h)?h.value?da(function(a,b){return b.def(a.ELEMENTS,
".primType")}):da(function(){return 4}):new na(h.thisDep,h.contextDep,h.propDep,function(a,b){var c=a.ELEMENTS;return b.def(c,"?",c,".primType:",4)}):null}(),count:function(){if("count"in d){var a=d.count|0;y.command("number"===typeof a&&0<=a,"invalid vertex count",b.commandStr);return da(function(){return a})}if("count"in f){var c=f.count;return ka(c,function(a,b){var d=a.invoke(b,c);y.optional(function(){a.assert(b,"typeof "+d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")});
return d})}if(h){if(wa(h)){if(h)return g?new na(g.thisDep,g.contextDep,g.propDep,function(a,b){var c=b.def(a.ELEMENTS,".vertCount-",a.OFFSET);y.optional(function(){a.assert(b,c+">=0","invalid vertex offset/element buffer too small")});return c}):da(function(a,b){return b.def(a.ELEMENTS,".vertCount")});var e=da(function(){return-1});y.optional(function(){e.MISSING=!0});return e}var k=new na(h.thisDep||g.thisDep,h.contextDep||g.contextDep,h.propDep||g.propDep,function(a,b){var c=a.ELEMENTS;return a.OFFSET?
b.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):b.def(c,"?",c,".vertCount:-1")});y.optional(function(){k.DYNAMIC=!0});return k}return null}(),instances:c("instances",!1),offset:g}}function A(a,b){var c=a["static"],f=a.dynamic,e={};Ka.forEach(function(a){function h(b,d){if(a in c){var k=b(c[a]);e[g]=da(function(){return k})}else if(a in f){var m=f[a];e[g]=ka(m,function(a,b){return d(a,b,a.invoke(b,m))})}}var g=t(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return h(function(c){y.commandType(c,
"boolean",a,b.commandStr);return c},function(b,c,d){y.optional(function(){b.assert(c,"typeof "+d+'==="boolean"',"invalid flag "+a,b.commandStr)});return d});case "depth.func":return h(function(c){y.commandParameter(c,Fa,"invalid "+a,b.commandStr);return Fa[c]},function(b,c,d){var f=b.constants.compareFuncs;y.optional(function(){b.assert(c,d+" in "+f,"invalid "+a+", must be one of "+Object.keys(Fa))});return c.def(f,"[",d,"]")});case "depth.range":return h(function(a){y.command(N(a)&&2===a.length&&
"number"===typeof a[0]&&"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",b.commandStr);return a},function(a,b,c){y.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var d=b.def("+",c,"[0]"),f=b.def("+",c,"[1]");return[d,f]});case "blend.func":return h(function(a){y.commandType(a,"object","blend.func",b.commandStr);var c="srcRGB"in a?a.srcRGB:a.src,
d="srcAlpha"in a?a.srcAlpha:a.src,f="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;y.commandParameter(c,sa,g+".srcRGB",b.commandStr);y.commandParameter(d,sa,g+".srcAlpha",b.commandStr);y.commandParameter(f,sa,g+".dstRGB",b.commandStr);y.commandParameter(a,sa,g+".dstAlpha",b.commandStr);y.command(-1===eb.indexOf(c+", "+f),"unallowed blending combination (srcRGB, dstRGB) = ("+c+", "+f+")",b.commandStr);return[sa[c],sa[f],sa[d],sa[a]]},function(b,c,d){function f(h,g){var k=c.def('"',h,
g,'" in ',d,"?",d,".",h,g,":",d,".",h);y.optional(function(){b.assert(c,k+" in "+e,"invalid "+a+"."+h+g+", must be one of "+Object.keys(sa))});return k}var e=b.constants.blendFuncs;y.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var h=f("src","RGB"),g=f("dst","RGB");y.optional(function(){b.assert(c,b.constants.invalidBlendCombinations+".indexOf("+h+'+", "+'+g+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var k=c.def(e,
"[",h,"]"),m=c.def(e,"[",f("src","Alpha"),"]"),l=c.def(e,"[",g,"]"),n=c.def(e,"[",f("dst","Alpha"),"]");return[k,l,m,n]});case "blend.equation":return h(function(c){if("string"===typeof c)return y.commandParameter(c,ha,"invalid "+a,b.commandStr),[ha[c],ha[c]];if("object"===typeof c)return y.commandParameter(c.rgb,ha,a+".rgb",b.commandStr),y.commandParameter(c.alpha,ha,a+".alpha",b.commandStr),[ha[c.rgb],ha[c.alpha]];y.commandRaise("invalid blend.equation",b.commandStr)},function(b,c,d){var f=b.constants.blendEquations,
e=c.def(),h=c.def(),g=b.cond("typeof ",d,'==="string"');y.optional(function(){function c(a,d,e){b.assert(a,e+" in "+f,"invalid "+d+", must be one of "+Object.keys(ha))}c(g.then,a,d);b.assert(g["else"],d+"&&typeof "+d+'==="object"',"invalid "+a);c(g["else"],a+".rgb",d+".rgb");c(g["else"],a+".alpha",d+".alpha")});g.then(e,"=",h,"=",f,"[",d,"];");g["else"](e,"=",f,"[",d,".rgb];",h,"=",f,"[",d,".alpha];");c(g);return[e,h]});case "blend.color":return h(function(a){y.command(N(a)&&4===a.length,"blend.color must be a 4d array",
b.commandStr);return I(4,function(b){return+a[b]})},function(a,b,c){y.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","blend.color must be a 4d array")});return I(4,function(a){return b.def("+",c,"[",a,"]")})});case "stencil.mask":return h(function(a){y.commandType(a,"number",g,b.commandStr);return a|0},function(a,b,c){y.optional(function(){a.assert(b,"typeof "+c+'==="number"',"invalid stencil.mask")});return b.def(c,"|0")});case "stencil.func":return h(function(c){y.commandType(c,
"object",g,b.commandStr);var d=c.cmp||"keep",f=c.ref||0;c="mask"in c?c.mask:-1;y.commandParameter(d,Fa,a+".cmp",b.commandStr);y.commandType(f,"number",a+".ref",b.commandStr);y.commandType(c,"number",a+".mask",b.commandStr);return[Fa[d],f,c]},function(a,b,c){var d=a.constants.compareFuncs;y.optional(function(){function f(){a.assert(b,Array.prototype.join.call(arguments,""),"invalid stencil.func")}f(c+"&&typeof ",c,'==="object"');f('!("cmp" in ',c,")||(",c,".cmp in ",d,")")});var f=b.def('"cmp" in ',
c,"?",d,"[",c,".cmp]",":",7680),e=b.def(c,".ref|0"),h=b.def('"mask" in ',c,"?",c,".mask|0:-1");return[f,e,h]});case "stencil.opFront":case "stencil.opBack":return h(function(c){y.commandType(c,"object",g,b.commandStr);var d=c.fail||"keep",f=c.zfail||"keep";c=c.zpass||"keep";y.commandParameter(d,xa,a+".fail",b.commandStr);y.commandParameter(f,xa,a+".zfail",b.commandStr);y.commandParameter(c,xa,a+".zpass",b.commandStr);return["stencil.opBack"===a?1029:1028,xa[d],xa[f],xa[c]]},function(b,c,d){function f(h){y.optional(function(){b.assert(c,
'!("'+h+'" in '+d+")||("+d+"."+h+" in "+e+")","invalid "+a+"."+h+", must be one of "+Object.keys(xa))});return c.def('"',h,'" in ',d,"?",e,"[",d,".",h,"]:",7680)}var e=b.constants.stencilOps;y.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,f("fail"),f("zfail"),f("zpass")]});case "polygonOffset.offset":return h(function(a){y.commandType(a,"object",g,b.commandStr);var c=a.factor|0;a=a.units|0;y.commandType(c,"number",g+".factor",b.commandStr);
y.commandType(a,"number",g+".units",b.commandStr);return[c,a]},function(b,c,d){y.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});var f=c.def(d,".factor|0"),e=c.def(d,".units|0");return[f,e]});case "cull.face":return h(function(a){var c=0;"front"===a?c=1028:"back"===a&&(c=1029);y.command(!!c,g,b.commandStr);return c},function(a,b,c){y.optional(function(){a.assert(b,c+'==="front"||'+c+'==="back"',"invalid cull.face")});return b.def(c,'==="front"?',1028,":",1029)});case "lineWidth":return h(function(a){y.command("number"===
typeof a&&a>=d.lineWidthDims[0]&&a<=d.lineWidthDims[1],"invalid line width, must positive number between "+d.lineWidthDims[0]+" and "+d.lineWidthDims[1],b.commandStr);return a},function(a,b,c){y.optional(function(){a.assert(b,"typeof "+c+'==="number"&&'+c+">="+d.lineWidthDims[0]+"&&"+c+"<="+d.lineWidthDims[1],"invalid line width")});return c});case "frontFace":return h(function(a){y.commandParameter(a,Va,g,b.commandStr);return Va[a]},function(a,b,c){y.optional(function(){a.assert(b,c+'==="cw"||'+
c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return b.def(c+'==="cw"?2304:2305')});case "colorMask":return h(function(a){y.command(N(a)&&4===a.length,"color.mask must be length 4 array",b.commandStr);return a.map(function(a){return!!a})},function(a,b,c){y.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")});return I(4,function(a){return"!!"+c+"["+a+"]"})});case "sample.coverage":return h(function(a){y.command("object"===typeof a&&a,
g,b.commandStr);var c="value"in a?a.value:1;a=!!a.invert;y.command("number"===typeof c&&0<=c&&1>=c,"sample.coverage.value must be a number between 0 and 1",b.commandStr);return[c,a]},function(a,b,c){y.optional(function(){a.assert(b,c+"&&typeof "+c+'==="object"',"invalid sample.coverage")});var d=b.def('"value" in ',c,"?+",c,".value:1"),f=b.def("!!",c,".invert");return[d,f]})}});return e}function B(a,b){var c=a["static"],d=a.dynamic,f={};Object.keys(c).forEach(function(a){var d=c[a],e;if("number"===
typeof d||"boolean"===typeof d)e=da(function(){return d});else if("function"===typeof d){var h=d._reglType;"texture2d"===h||"textureCube"===h?e=da(function(a){return a.link(d)}):"framebuffer"===h||"framebufferCube"===h?(y.command(0<d.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',b.commandStr),e=da(function(a){return a.link(d.color[0])})):y.commandRaise('invalid data for uniform "'+a+'"',b.commandStr)}else N(d)?e=da(function(b){return b.global.def("[",I(d.length,function(c){y.command("number"===
typeof d[c]||"boolean"===typeof d[c],"invalid uniform "+a,b.commandStr);return d[c]}),"]")}):y.commandRaise('invalid or missing data for uniform "'+a+'"',b.commandStr);e.value=d;f[a]=e});Object.keys(d).forEach(function(a){var b=d[a];f[a]=ka(b,function(a,c){return a.invoke(c,b)})});return f}function C(a,c){var d=a["static"],e=a.dynamic,h={};Object.keys(d).forEach(function(a){var e=d[a],g=b.id(a),k=new V;if(Ta(e))k.state=1,k.buffer=f.getBuffer(f.create(e,34962,!1,!0)),k.type=0;else{var m=f.getBuffer(e);
if(m)k.state=1,k.buffer=m,k.type=0;else if(y.command("object"===typeof e&&e,"invalid data for attribute "+a,c.commandStr),e.constant){var l=e.constant;k.buffer="null";k.state=2;"number"===typeof l?k.x=l:(y.command(N(l)&&0<l.length&&4>=l.length,"invalid constant for attribute "+a,c.commandStr),Ga.forEach(function(a,b){b<l.length&&(k[a]=l[b])}))}else{m=Ta(e.buffer)?f.getBuffer(f.create(e.buffer,34962,!1,!0)):f.getBuffer(e.buffer);y.command(!!m,'missing buffer for attribute "'+a+'"',c.commandStr);var n=
e.offset|0;y.command(0<=n,'invalid offset for attribute "'+a+'"',c.commandStr);var p=e.stride|0;y.command(0<=p&&256>p,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',c.commandStr);var r=e.size|0;y.command(!("size"in e)||0<r&&4>=r,'invalid size for attribute "'+a+'", must be 1,2,3,4',c.commandStr);var q=!!e.normalized,t=0;"type"in e&&(y.commandParameter(e.type,Ia,"invalid type for attribute "+a,c.commandStr),t=Ia[e.type]);var v=e.divisor|0;"divisor"in e&&(y.command(0===v||
ca,'cannot specify divisor for attribute "'+a+'", instancing not supported',c.commandStr),y.command(0<=v,'invalid divisor for attribute "'+a+'"',c.commandStr));y.optional(function(){var b=c.commandStr,d="buffer offset divisor normalized type size stride".split(" ");Object.keys(e).forEach(function(c){y.command(0<=d.indexOf(c),'unknown parameter "'+c+'" for attribute pointer "'+a+'" (valid parameters are '+d+")",b)})});k.buffer=m;k.state=1;k.size=r;k.normalized=q;k.type=t||m.dtype;k.offset=n;k.stride=
p;k.divisor=v}}h[a]=da(function(a,b){var c=a.attribCache;if(g in c)return c[g];var d={isStream:!1};Object.keys(k).forEach(function(a){d[a]=k[a]});k.buffer&&(d.buffer=a.link(k.buffer),d.type=d.type||d.buffer+".dtype");return c[g]=d})});Object.keys(e).forEach(function(a){var b=e[a];h[a]=ka(b,function(c,d){function f(a){d(m[a],"=",e,".",a,"|0;")}var e=c.invoke(d,b),h=c.shared,g=h.isBufferArgs,k=h.buffer;y.optional(function(){c.assert(d,e+"&&(typeof "+e+'==="object"||typeof '+e+'==="function")&&('+g+
"("+e+")||"+k+".getBuffer("+e+")||"+k+".getBuffer("+e+".buffer)||"+g+"("+e+'.buffer)||("constant" in '+e+"&&(typeof "+e+'.constant==="number"||'+h.isArrayLike+"("+e+".constant))))",'invalid dynamic attribute "'+a+'"')});var m={isStream:d.def(!1)},l=new V;l.state=1;Object.keys(l).forEach(function(a){m[a]=d.def(""+l[a])});var n=m.buffer,p=m.type;d("if(",g,"(",e,")){",m.isStream,"=true;",n,"=",k,".createStream(",34962,",",e,");",p,"=",n,".dtype;","}else{",n,"=",k,".getBuffer(",e,");","if(",n,"){",p,
"=",n,".dtype;",'}else if("constant" in ',e,"){",m.state,"=",2,";","if(typeof "+e+'.constant === "number"){',m[Ga[0]],"=",e,".constant;",Ga.slice(1).map(function(a){return m[a]}).join("="),"=0;","}else{",Ga.map(function(a,b){return m[a]+"="+e+".constant.length>="+b+"?"+e+".constant["+b+"]:0;"}).join(""),"}}else{","if(",g,"(",e,".buffer)){",n,"=",k,".createStream(",34962,",",e,".buffer);","}else{",n,"=",k,".getBuffer(",e,".buffer);","}",p,'="type" in ',e,"?",h.glTypes,"[",e,".type]:",n,".dtype;",m.normalized,
"=!!",e,".normalized;");f("size");f("offset");f("stride");f("divisor");d("}}");d.exit("if(",m.isStream,"){",k,".destroyStream(",n,");","}");return m})});return h}function F(a){var b=a["static"],c=a.dynamic,d={};Object.keys(b).forEach(function(a){var c=b[a];d[a]=da(function(a,b){return"number"===typeof c||"boolean"===typeof c?""+c:a.link(c)})});Object.keys(c).forEach(function(a){var b=c[a];d[a]=ka(b,function(a,c){return a.invoke(c,b)})});return d}function G(a,b,c,d,f){function e(a){var b=m[a];b&&(n[a]=
b)}var h=a["static"],g=a.dynamic;y.optional(function(){function a(c){Object.keys(c).forEach(function(a){y.command(0<=b.indexOf(a),'unknown parameter "'+a+'"',f.commandStr)})}var b="framebuffer vert frag elements primitive offset count instances profile".split(" ").concat(Ka);a(h);a(g)});var k=z(a,f),m=D(a,k,f),l=E(a,f),n=A(a,f),p=H(a,f);e("viewport");e(t("scissor.box"));var r=0<Object.keys(n).length,k={framebuffer:k,draw:l,shader:p,state:n,dirty:r};k.profile=x(a,f);k.uniforms=B(c,f);k.attributes=
C(b,f);k.context=F(d,f);return k}function J(a,b,c){var d=a.shared.context,f=a.scope();Object.keys(c).forEach(function(e){b.save(d,"."+e);f(d,".",e,"=",c[e].append(a,b),";")});b(f)}function R(a,b,c,d){var f=a.shared,e=f.gl,h=f.framebuffer,g;ea&&(g=b.def(f.extensions,".webgl_draw_buffers"));var k=a.constants,f=k.drawBuffer,k=k.backBuffer;a=c?c.append(a,b):b.def(h,".next");d||b("if(",a,"!==",h,".cur){");b("if(",a,"){",e,".bindFramebuffer(",36160,",",a,".framebuffer);");ea&&b(g,".drawBuffersWEBGL(",f,
"[",a,".colorAttachments.length]);");b("}else{",e,".bindFramebuffer(",36160,",null);");ea&&b(g,".drawBuffersWEBGL(",k,");");b("}",h,".cur=",a,";");d||b("}")}function K(a,b,c){var d=a.shared,f=d.gl,e=a.current,h=a.next,g=d.current,k=d.next,m=a.cond(g,".dirty");Ka.forEach(function(b){b=t(b);if(!(b in c.state)){var d,l;if(b in h){d=h[b];l=e[b];var n=I(ba[b].length,function(a){return m.def(d,"[",a,"]")});m(a.cond(n.map(function(a,b){return a+"!=="+l+"["+b+"]"}).join("||")).then(f,".",va[b],"(",n,");",
n.map(function(a,b){return l+"["+b+"]="+a}).join(";"),";"))}else d=m.def(k,".",b),n=a.cond(d,"!==",g,".",b),m(n),b in ua?n(a.cond(d).then(f,".enable(",ua[b],");")["else"](f,".disable(",ua[b],");"),g,".",b,"=",d,";"):n(f,".",va[b],"(",d,");",g,".",b,"=",d,";")}});0===Object.keys(c.state).length&&m(g,".dirty=false;");b(m)}function L(a,b,c,d){var f=a.shared,e=a.current,h=f.current,g=f.gl;db(Object.keys(c)).forEach(function(f){var k=c[f];if(!d||d(k)){var m=k.append(a,b);if(ua[f]){var l=ua[f];wa(k)?m?
b(g,".enable(",l,");"):b(g,".disable(",l,");"):b(a.cond(m).then(g,".enable(",l,");")["else"](g,".disable(",l,");"));b(h,".",f,"=",m,";")}else if(N(m)){var n=e[f];b(g,".",va[f],"(",m,");",m.map(function(a,b){return n+"["+b+"]="+a}).join(";"),";")}else b(g,".",va[f],"(",m,");",h,".",f,"=",m,";")}})}function M(a,b){ca&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function P(a,b,c,d,f){function e(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function h(a){q=
b.def();a(q,"=",e(),";");"string"===typeof f?a(l,".count+=",f,";"):a(l,".count++;");r&&(d?(t=b.def(),a(t,"=",p,".getNumPendingQueries();")):a(p,".beginQuery(",l,");"))}function g(a){a(l,".cpuTime+=",e(),"-",q,";");r&&(d?a(p,".pushScopeStats(",t,",",p,".getNumPendingQueries(),",l,");"):a(p,".endQuery();"))}function k(a){var c=b.def(n,".profile");b(n,".profile=",a,";");b.exit(n,".profile=",c,";")}var m=a.shared,l=a.stats,n=m.current,p=m.timer;c=c.profile;var q,t;if(c){if(wa(c)){c.enable?(h(b),g(b.exit),
k("true")):k("false");return}c=c.append(a,b);k(c)}else c=b.def(n,".profile");m=a.block();h(m);b("if(",c,"){",m,"}");a=a.block();g(a);b.exit("if(",c,"){",a,"}")}function Q(a,b,c,d,f){function e(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function h(c,d,f){function e(){b("if(!",n,".buffer){",m,".enableVertexAttribArray(",l,");}");var c=f.type,h;h=f.size?b.def(f.size,"||",d):d;b("if(",n,".type!==",
c,"||",n,".size!==",h,"||",q.map(function(a){return n+"."+a+"!=="+f[a]}).join("||"),"){",m,".bindBuffer(",34962,",",p,".buffer);",m,".vertexAttribPointer(",[l,h,c,f.normalized,f.stride,f.offset],");",n,".type=",c,";",n,".size=",h,";",q.map(function(a){return n+"."+a+"="+f[a]+";"}).join(""),"}");ca&&(c=f.divisor,b("if(",n,".divisor!==",c,"){",a.instancing,".vertexAttribDivisorANGLE(",[l,c],");",n,".divisor=",c,";}"))}function k(){b("if(",n,".buffer){",m,".disableVertexAttribArray(",l,");","}if(",Ga.map(function(a,
b){return n+"."+a+"!=="+r[b]}).join("||"),"){",m,".vertexAttrib4f(",l,",",r,");",Ga.map(function(a,b){return n+"."+a+"="+r[b]+";"}).join(""),"}")}var m=g.gl,l=b.def(c,".location"),n=b.def(g.attributes,"[",l,"]");c=f.state;var p=f.buffer,r=[f.x,f.y,f.z,f.w],q=["buffer","normalized","offset","stride"];1===c?e():2===c?k():(b("if(",c,"===",1,"){"),e(),b("}else{"),k(),b("}"))}var g=a.shared;d.forEach(function(d){var g=d.name,k=c.attributes[g],m;if(k){if(!f(k))return;m=k.append(a,b)}else{if(!f(gb))return;
var l=a.scopeAttrib(g);y.optional(function(){a.assert(b,l+".state","missing attribute "+g)});m={};Object.keys(new V).forEach(function(a){m[a]=b.def(l,".",a)})}h(a.link(d),e(d.info.type),m)})}function O(a,c,d,f,e){for(var h=a.shared,g=h.gl,k,m=0;m<f.length;++m){var l=f[m],n=l.name,p=l.info.type,r=d.uniforms[n],l=a.link(l)+".location",q;if(r){if(!e(r))continue;if(wa(r)){var t=r.value;y.command(null!==t&&"undefined"!==typeof t,'missing uniform "'+n+'"',a.commandStr);if(35678===p||35680===p)y.command("function"===
typeof t&&(35678===p&&("texture2d"===t._reglType||"framebuffer"===t._reglType)||35680===p&&("textureCube"===t._reglType||"framebufferCube"===t._reglType)),"invalid texture for uniform "+n,a.commandStr),r=a.link(t._texture||t.color[0]._texture),c(g,".uniform1i(",l,",",r+".bind());"),c.exit(r,".unbind();");else if(35674===p||35675===p||35676===p){y.optional(function(){y.command(N(t),"invalid matrix for uniform "+n,a.commandStr);y.command(35674===p&&4===t.length||35675===p&&9===t.length||35676===p&&
16===t.length,"invalid length for matrix uniform "+n,a.commandStr)});var r=a.global.def("new Float32Array(["+Array.prototype.slice.call(t)+"])"),v=2;35675===p?v=3:35676===p&&(v=4);c(g,".uniformMatrix",v,"fv(",l,",false,",r,");")}else{switch(p){case 5126:y.commandType(t,"number","uniform "+n,a.commandStr);k="1f";break;case 35664:y.command(N(t)&&2===t.length,"uniform "+n,a.commandStr);k="2f";break;case 35665:y.command(N(t)&&3===t.length,"uniform "+n,a.commandStr);k="3f";break;case 35666:y.command(N(t)&&
4===t.length,"uniform "+n,a.commandStr);k="4f";break;case 35670:y.commandType(t,"boolean","uniform "+n,a.commandStr);k="1i";break;case 5124:y.commandType(t,"number","uniform "+n,a.commandStr);k="1i";break;case 35671:y.command(N(t)&&2===t.length,"uniform "+n,a.commandStr);k="2i";break;case 35667:y.command(N(t)&&2===t.length,"uniform "+n,a.commandStr);k="2i";break;case 35672:y.command(N(t)&&3===t.length,"uniform "+n,a.commandStr);k="3i";break;case 35668:y.command(N(t)&&3===t.length,"uniform "+n,a.commandStr);
k="3i";break;case 35673:y.command(N(t)&&4===t.length,"uniform "+n,a.commandStr);k="4i";break;case 35669:y.command(N(t)&&4===t.length,"uniform "+n,a.commandStr),k="4i"}c(g,".uniform",k,"(",l,",",N(t)?Array.prototype.slice.call(t):t,");")}continue}else q=r.append(a,c)}else{if(!e(gb))continue;q=c.def(h.uniforms,"[",b.id(n),"]")}35678===p?c("if(",q,"&&",q,'._reglType==="framebuffer"){',q,"=",q,".color[0];","}"):35680===p&&c("if(",q,"&&",q,'._reglType==="framebufferCube"){',q,"=",q,".color[0];","}");y.optional(function(){function b(d,
f){a.assert(c,d,'bad data or missing for uniform "'+n+'".  '+f)}function d(a){b("typeof "+q+'==="'+a+'"',"invalid type, expected "+a)}function f(c,d){b(h.isArrayLike+"("+q+")&&"+q+".length==="+c,"invalid vector, should have length "+c,a.commandStr)}function e(c){b("typeof "+q+'==="function"&&'+q+'._reglType==="texture'+(3553===c?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(p){case 5124:d("number");break;case 35667:f(2,"number");break;case 35668:f(3,"number");break;case 35669:f(4,"number");
break;case 5126:d("number");break;case 35664:f(2,"number");break;case 35665:f(3,"number");break;case 35666:f(4,"number");break;case 35670:d("boolean");break;case 35671:f(2,"boolean");break;case 35672:f(3,"boolean");break;case 35673:f(4,"boolean");break;case 35674:f(4,"number");break;case 35675:f(9,"number");break;case 35676:f(16,"number");break;case 35678:e(3553);break;case 35680:e(34067)}});r=1;switch(p){case 35678:case 35680:r=c.def(q,"._texture");c(g,".uniform1i(",l,",",r,".bind());");c.exit(r,
".unbind();");continue;case 5124:case 35670:k="1i";break;case 35667:case 35671:k="2i";r=2;break;case 35668:case 35672:k="3i";r=3;break;case 35669:case 35673:k="4i";r=4;break;case 5126:k="1f";break;case 35664:k="2f";r=2;break;case 35665:k="3f";r=3;break;case 35666:k="4f";r=4;break;case 35674:k="Matrix2fv";break;case 35675:k="Matrix3fv";break;case 35676:k="Matrix4fv"}c(g,".uniform",k,"(",l,",");if("M"===k.charAt(0)){var l=Math.pow(p-35674+2,2),u=a.global.def("new Float32Array(",l,")");c("false,(Array.isArray(",
q,")||",q," instanceof Float32Array)?",q,":(",I(l,function(a){return u+"["+a+"]="+q+"["+a+"]"}),",",u,")")}else 1<r?c(I(r,function(a){return q+"["+a+"]"})):c(q);c(");")}}function S(a,b,c,d){function f(e){var h=l[e];return h?h.contextDep&&d.contextDynamic||h.propDep?h.append(a,c):h.append(a,b):b.def(m,".",e)}function e(){function a(){c(v,".drawElementsInstancedANGLE(",[p,q,u,r+"<<(("+u+"-5121)>>1)",t],");")}function b(){c(v,".drawArraysInstancedANGLE(",[p,r,q,t],");")}n?w?a():(c("if(",n,"){"),a(),
c("}else{"),b(),c("}")):b()}function h(){function a(){c(k+".drawElements("+[p,q,u,r+"<<(("+u+"-5121)>>1)"]+");")}function b(){c(k+".drawArrays("+[p,r,q]+");")}n?w?a():(c("if(",n,"){"),a(),c("}else{"),b(),c("}")):b()}var g=a.shared,k=g.gl,m=g.draw,l=d.draw,n=function(){var f=l.elements,e=b;if(f){if(f.contextDep&&d.contextDynamic||f.propDep)e=c;f=f.append(a,e)}else f=e.def(m,".","elements");f&&e("if("+f+")"+k+".bindBuffer(34963,"+f+".buffer.buffer);");return f}(),p=f("primitive"),r=f("offset"),q=function(){var f=
l.count,e,h=b;if(f){if(f.contextDep&&d.contextDynamic||f.propDep)h=c;e=f.append(a,h);y.optional(function(){f.MISSING&&a.assert(b,"false","missing vertex count");f.DYNAMIC&&a.assert(h,e+">=0","missing vertex count")})}else e=h.def(m,".","count"),y.optional(function(){a.assert(h,e+">=0","missing vertex count")});return e}();if("number"===typeof q){if(0===q)return}else c("if(",q,"){"),c.exit("}");var t,v;ca&&(t=f("instances"),v=a.instancing);var u=n+".type",w=l.elements&&wa(l.elements);ca&&("number"!==
typeof t||0<=t)?"string"===typeof t?(c("if(",t,">0){"),e(),c("}else if(",t,"<0){"),h(),c("}")):e():h()}function U(a,b,c,d,f){var e=w();f=e.proc("body",f);y.optional(function(){e.commandStr=b.commandStr;e.command=e.link(b.commandStr)});ca&&(e.instancing=f.def(e.shared.extensions,".angle_instanced_arrays"));a(e,f,c,d);return e.compile().body}function W(a,b,c,d){M(a,b);Q(a,b,c,d.attributes,function(){return!0});O(a,b,c,d.uniforms,function(){return!0});S(a,b,b,c)}function Z(a,b){var c=a.proc("draw",1);
M(a,c);J(a,c,b.context);R(a,c,b.framebuffer);K(a,c,b);L(a,c,b.state);P(a,c,b,!1,!0);var d=b.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",d,".program);");if(b.shader.program)W(a,c,b,b.shader.program);else{var f=a.global.def("{}"),e=c.def(d,".id"),h=c.def(f,"[",e,"]");c(a.cond(h).then(h,".call(this,a0);")["else"](h,"=",f,"[",e,"]=",a.link(function(c){return U(W,a,b,c,1)}),"(",d,");",h,".call(this,a0);"))}0<Object.keys(b.state).length&&c(a.shared.current,".dirty=true;")}function La(a,b,c,
d){function f(){return!0}a.batchId="a1";M(a,b);Q(a,b,c,d.attributes,f);O(a,b,c,d.uniforms,f);S(a,b,b,c)}function za(a,b,c,d){function f(a){return a.contextDep&&h||a.propDep}function e(a){return!f(a)}M(a,b);var h=c.contextDep,g=b.def(),k=b.def();a.shared.props=k;a.batchId=g;var m=a.scope(),l=a.scope();b(m.entry,"for(",g,"=0;",g,"<","a1",";++",g,"){",k,"=","a0","[",g,"];",l,"}",m.exit);c.needsContext&&J(a,l,c.context);c.needsFramebuffer&&R(a,l,c.framebuffer);L(a,l,c.state,f);c.profile&&f(c.profile)&&
P(a,l,c,!1,!0);d?(Q(a,m,c,d.attributes,e),Q(a,l,c,d.attributes,f),O(a,m,c,d.uniforms,e),O(a,l,c,d.uniforms,f),S(a,m,l,c)):(b=a.global.def("{}"),d=c.shader.progVar.append(a,l),k=l.def(d,".id"),m=l.def(b,"[",k,"]"),l(a.shared.gl,".useProgram(",d,".program);","if(!",m,"){",m,"=",b,"[",k,"]=",a.link(function(b){return U(La,a,c,b,2)}),"(",d,");}",m,".call(this,a0[",g,"],",g,");"))}function Aa(a,b){function c(a){return a.contextDep&&f||a.propDep}var d=a.proc("batch",2);a.batchId="0";M(a,d);var f=!1,e=!0;
Object.keys(b.context).forEach(function(a){f=f||b.context[a].propDep});f||(J(a,d,b.context),e=!1);var h=b.framebuffer,g=!1;h?(h.propDep?f=g=!0:h.contextDep&&f&&(g=!0),g||R(a,d,h)):R(a,d,null);b.state.viewport&&b.state.viewport.propDep&&(f=!0);K(a,d,b);L(a,d,b.state,function(a){return!c(a)});b.profile&&c(b.profile)||P(a,d,b,!1,"a1");b.contextDep=f;b.needsContext=e;b.needsFramebuffer=g;e=b.shader.progVar;if(e.contextDep&&f||e.propDep)za(a,d,b,null);else if(e=e.append(a,d),d(a.shared.gl,".useProgram(",
e,".program);"),b.shader.program)za(a,d,b,b.shader.program);else{var h=a.global.def("{}"),g=d.def(e,".id"),k=d.def(h,"[",g,"]");d(a.cond(k).then(k,".call(this,a0,a1);")["else"](k,"=",h,"[",g,"]=",a.link(function(c){return U(za,a,b,c,2)}),"(",e,");",k,".call(this,a0,a1);"))}0<Object.keys(b.state).length&&d(a.shared.current,".dirty=true;")}function aa(a,c){function d(b){var h=c.shader[b];h&&f.set(e.shader,"."+b,h.append(a,f))}var f=a.proc("scope",3);a.batchId="a2";var e=a.shared,h=e.current;J(a,f,c.context);
c.framebuffer&&c.framebuffer.append(a,f);db(Object.keys(c.state)).forEach(function(b){var d=c.state[b].append(a,f);N(d)?d.forEach(function(c,d){f.set(a.next[b],"["+d+"]",c)}):f.set(e.next,"."+b,d)});P(a,f,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var d=c.draw[b];d&&f.set(e.draw,"."+b,""+d.append(a,f))});Object.keys(c.uniforms).forEach(function(d){f.set(e.uniforms,"["+b.id(d)+"]",c.uniforms[d].append(a,f))});Object.keys(c.attributes).forEach(function(b){var d=
c.attributes[b].append(a,f),e=a.scopeAttrib(b);Object.keys(new V).forEach(function(a){f.set(e,"."+a,d[a])})});d("vert");d("frag");0<Object.keys(c.state).length&&(f(h,".dirty=true;"),f.exit(h,".dirty=true;"));f("a1(",a.shared.context,",a0,",a.batchId,");")}function X(a){if("object"===typeof a&&!N(a)){for(var b=Object.keys(a),c=0;c<b.length;++c)if(qa.isDynamic(a[b[c]]))return!0;return!1}}function Y(a,b,c){function d(a,b){h.forEach(function(c){var d=f[c];qa.isDynamic(d)&&(d=a.invoke(b,d),b(l,".",c,"=",
d,";"))})}var f=b["static"][c];if(f&&X(f)){var e=a.global,h=Object.keys(f),g=!1,k=!1,m=!1,l=a.global.def("{}");h.forEach(function(b){var c=f[b];if(qa.isDynamic(c))"function"===typeof c&&(c=f[b]=qa.unbox(c)),b=ka(c,null),g=g||b.thisDep,m=m||b.propDep,k=k||b.contextDep;else{e(l,".",b,"=");switch(typeof c){case "number":e(c);break;case "string":e('"',c,'"');break;case "object":Array.isArray(c)&&e("[",c.join(),"]");break;default:e(a.link(c))}e(";")}});b.dynamic[c]=new qa.DynamicVariable(4,{thisDep:g,
contextDep:k,propDep:m,ref:l,append:d});delete b["static"][c]}}var V=m.Record,ha={add:32774,subtract:32778,"reverse subtract":32779};c.ext_blend_minmax&&(ha.min=32775,ha.max=32776);var ca=c.angle_instanced_arrays,ea=c.webgl_draw_buffers,ba={dirty:!0,profile:q.profile},Ja={},Ka=[],ua={},va={};v("dither",3024);v("blend.enable",3042);u("blend.color","blendColor",[0,0,0,0]);u("blend.equation","blendEquationSeparate",[32774,32774]);u("blend.func","blendFuncSeparate",[1,0,1,0]);v("depth.enable",2929,!0);
u("depth.func","depthFunc",513);u("depth.range","depthRange",[0,1]);u("depth.mask","depthMask",!0);u("colorMask","colorMask",[!0,!0,!0,!0]);v("cull.enable",2884);u("cull.face","cullFace",1029);u("frontFace","frontFace",2305);u("lineWidth","lineWidth",1);v("polygonOffset.enable",32823);u("polygonOffset.offset","polygonOffset",[0,0]);v("sample.alpha",32926);v("sample.enable",32928);u("sample.coverage","sampleCoverage",[1,!1]);v("stencil.enable",2960);u("stencil.mask","stencilMask",-1);u("stencil.func",
"stencilFunc",[519,0,-1]);u("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);u("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);v("scissor.enable",3089);u("scissor.box","scissor",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);u("viewport","viewport",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);var ia={gl:a,context:p,strings:b,next:Ja,current:ba,draw:n,elements:e,buffer:f,shader:l,attributes:m.state,uniforms:k,framebuffer:g,extensions:c,timer:r,isBufferArgs:Ta},ga={primTypes:Ba,
compareFuncs:Fa,blendFuncs:sa,blendEquations:ha,stencilOps:xa,glTypes:Ia,orientationType:Va};y.optional(function(){ia.isArrayLike=N});ea&&(ga.backBuffer=[1029],ga.drawBuffer=I(d.maxDrawbuffers,function(a){return 0===a?[0]:I(a,function(a){return 36064+a})}));var ja=0;return{next:Ja,current:ba,procs:function(){var b=w(),c=b.proc("poll"),f=b.proc("refresh"),e=b.block();c(e);f(e);var h=b.shared,g=h.gl,k=h.next,m=h.current;e(m,".dirty=false;");R(b,c);R(b,f,null,!0);var l=a.getExtension("angle_instanced_arrays"),
n;l&&(n=b.link(l));for(var p=0;p<d.maxAttributes;++p){var r=f.def(h.attributes,"[",p,"]"),q=b.cond(r,".buffer");q.then(g,".enableVertexAttribArray(",p,");",g,".bindBuffer(",34962,",",r,".buffer.buffer);",g,".vertexAttribPointer(",p,",",r,".size,",r,".type,",r,".normalized,",r,".stride,",r,".offset);")["else"](g,".disableVertexAttribArray(",p,");",g,".vertexAttrib4f(",p,",",r,".x,",r,".y,",r,".z,",r,".w);",r,".buffer=null;");f(q);l&&f(n,".vertexAttribDivisorANGLE(",p,",",r,".divisor);")}Object.keys(ua).forEach(function(a){var d=
ua[a],h=e.def(k,".",a),l=b.block();l("if(",h,"){",g,".enable(",d,")}else{",g,".disable(",d,")}",m,".",a,"=",h,";");f(l);c("if(",h,"!==",m,".",a,"){",l,"}")});Object.keys(va).forEach(function(a){var d=va[a],h=ba[a],l,n,p=b.block();p(g,".",d,"(");N(h)?(d=h.length,l=b.global.def(k,".",a),n=b.global.def(m,".",a),p(I(d,function(a){return l+"["+a+"]"}),");",I(d,function(a){return n+"["+a+"]="+l+"["+a+"];"}).join("")),c("if(",I(d,function(a){return l+"["+a+"]!=="+n+"["+a+"]"}).join("||"),"){",p,"}")):(l=
e.def(k,".",a),n=e.def(m,".",a),p(l,");",m,".",a,"=",l,";"),c("if(",l,"!==",n,"){",p,"}"));f(p)});return b.compile()}(),compile:function(a,b,c,d,f){var e=w();e.stats=e.link(f);Object.keys(b["static"]).forEach(function(a){Y(e,b,a)});Ab.forEach(function(b){Y(e,a,b)});c=G(a,b,c,d,e);Z(e,c);aa(e,c);Aa(e,c);return e.compile()}}}function hb(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var Ha={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,
"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ba=function(a){return Object.prototype.toString.call(a)in Ha},Y=function(a,b){for(var c=Object.keys(b),d=0;d<c.length;++d)a[c[d]]=b[c[d]];return a},ib="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),ja={};ja[5120]=ja[5121]=1;ja[5122]=ja[5123]=ja[36193]=ja[33635]=ja[32819]=
ja[32820]=2;ja[5124]=ja[5125]=ja[5126]=ja[34042]=4;var y=Y(d,{optional:function(a){a()},raise:e,commandRaise:r,command:function(a,b,c){a||r(b,c||n())},parameter:function(a,c,d){a in c||e("unknown parameter ("+a+")"+b(d)+". possible values: "+Object.keys(c).join())},commandParameter:function(a,c,d,f){a in c||r("unknown parameter ("+a+")"+b(d)+". possible values: "+Object.keys(c).join(),f||n())},constructor:function(a){Object.keys(a).forEach(function(a){0>ib.indexOf(a)&&e('invalid regl constructor argument "'+
a+'". must be one of '+ib)})},type:function(a,c,d){typeof a!==c&&e("invalid parameter type"+b(d)+". expected "+c+", got "+typeof a)},commandType:z,isTypedArray:function(a,c){ba(a)||e("invalid parameter type"+b(c)+". must be a typed array")},nni:function(a,c){0<=a&&(a|0)===a||e("invalid parameter type, ("+a+")"+b(c)+". must be a nonnegative integer")},oneOf:g,shaderError:function(a,b,e,h,g){if(!a.getShaderParameter(b,a.COMPILE_STATUS)){b=a.getShaderInfoLog(b);a=h===a.FRAGMENT_SHADER?"fragment":"vertex";
z(e,"string",a+" shader source must be a string",g);var m=k(e,g);e=c(b);f(m,e);Object.keys(m).forEach(function(a){function b(a,c){d.push(a);f.push(c||"")}var c=m[a];if(c.hasErrors){var d=[""],f=[""];b("file number "+a+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(a){if(0<a.errors.length){b(p(a.number,4)+"|  ","background-color:yellow; font-weight:bold");b(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var c=0;a.errors.forEach(function(d){d=
d.message;var f=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(d);if(f){var e=f[1];d=f[2];switch(e){case "assign":e="="}c=Math.max(a.line.indexOf(e,c),0)}else c=0;b(p("| ",6));b(p("^^^",c+3)+"\n","font-weight:bold");b(p("| ",6));b(d+"\n","font-weight:bold")});b(p("| ",6)+"\n")}else b(p(a.number,4)+"|  "),b(a.line+"\n","color:red")});"undefined"!==typeof document?(f[0]=d.join("%c"),console.log.apply(console,f)):console.log(d.join(""))}});d.raise("Error compiling "+a+" shader, "+m[0].name)}},linkError:function(a,
b,c,f,e){a.getProgramParameter(b,a.LINK_STATUS)||(a=a.getProgramInfoLog(b),c=k(c,e),f='Error linking program with vertex shader, "'+k(f,e)[0].name+'", and fragment shader "'+c[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+a),d.raise(f))},callSite:h,saveCommandRef:m,saveDrawInfo:function(a,b,c,d){function f(a){return a?d.id(a):0}function e(a,b){Object.keys(b).forEach(function(b){a[d.id(b)]=
!0})}m(a);a._fragId=f(a["static"].frag);a._vertId=f(a["static"].vert);var h=a._uniformSet={};e(h,b["static"]);e(h,b.dynamic);b=a._attributeSet={};e(b,c["static"]);e(b,c.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,b,c){a.texture?g(a.texture._texture.internalformat,b,"unsupported texture format for attachment"):g(a.renderbuffer._renderbuffer.format,c,"unsupported renderbuffer format for attachment")},
guessCommand:n,texture2D:function(a,b,c){var f=b.width,e=b.height,h=b.channels;d(0<f&&f<=c.maxTextureSize&&0<e&&e<=c.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||d(!(f&f-1)&&!!f&&!(e&e-1)&&!!e,"incompatible wrap mode for texture, both width and height must be power of 2");1===b.mipmask?1!==f&&1!==e&&d(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(d(!(f&f-1)&&!!f&&!(e&e-1)&&!!e,"texture must be a square power of 2 to support mipmapping"),
d(b.mipmask===(f<<1)-1,"missing or incomplete mipmap data"));5126===b.type&&(0>c.extensions.indexOf("oes_texture_float_linear")&&d(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),d(!a.genMipmaps,"mipmap generation not supported with float textures"));var g=b.images;for(c=0;16>c;++c)if(g[c]){var k=f>>c,m=e>>c;d(b.mipmask&1<<c,"missing mipmap data");var l=g[c];d(l.width===k&&l.height===m,"invalid shape for mip images");d(l.format===b.format&&l.internalformat===
b.internalformat&&l.type===b.type,"incompatible type for mip image");!l.compressed&&l.data&&(k=Math.ceil(D(l.type,h)*k/l.unpackAlignment)*l.unpackAlignment,d(l.data.byteLength===k*m,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||d(0===(b.mipmask&1<<c),"extra mipmap data");b.compressed&&d(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,b,c,f){var e=a.width,h=a.height,g=a.channels;d(0<e&&e<=f.maxTextureSize&&
0<h&&h<=f.maxTextureSize,"invalid texture shape");d(e===h,"cube map must be square");d(33071===b.wrapS&&33071===b.wrapT,"wrap mode not supported by cube map");for(f=0;f<c.length;++f){var k=c[f];d(k.width===e&&k.height===h,"inconsistent cube map face shape");b.genMipmaps&&(d(!k.compressed,"can not generate mipmap for compressed textures"),d(1===k.mipmask,"can not specify mipmaps and generate mipmaps"));for(var m=k.images,l=0;16>l;++l){var n=m[l];if(n){var p=e>>l,r=h>>l;d(k.mipmask&1<<l,"missing mipmap data");
d(n.width===p&&n.height===r,"invalid shape for mip images");d(n.format===a.format&&n.internalformat===a.internalformat&&n.type===a.type,"incompatible type for mip image");n.compressed||n.data&&d(n.data.byteLength===p*r*Math.max(D(n.type,g),n.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}}),kb=0,qa={DynamicVariable:v,define:function(a,b){return new v(a,G(b+""))},isDynamic:function(a){return"function"===typeof a&&!a._reglType||a instanceof v},unbox:function(a,
b){return"function"===typeof a?new v(0,a):a},accessor:G},Wa={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout},jb="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Bb=function(a,b){var c=1;b.ext_texture_filter_anisotropic&&(c=a.getParameter(34047));var d=
1,f=1;b.webgl_draw_buffers&&(d=a.getParameter(34852),f=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(b).filter(function(a){return!!b[a]}),maxAnisotropic:c,maxDrawbuffers:d,maxColorAttachments:f,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),
maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938)}},
pa=function(a){return Object.keys(a).map(function(b){return a[b]})},Xa=I(8,function(){return[]}),ca={alloc:L,free:M,allocType:function(a,b){var c=null;switch(a){case 5120:c=new Int8Array(L(b),0,b);break;case 5121:c=new Uint8Array(L(b),0,b);break;case 5122:c=new Int16Array(L(2*b),0,b);break;case 5123:c=new Uint16Array(L(2*b),0,b);break;case 5124:c=new Int32Array(L(4*b),0,b);break;case 5125:c=new Uint32Array(L(4*b),0,b);break;case 5126:c=new Float32Array(L(4*b),0,b);break;default:return null}return c.length!==
b?c.subarray(0,b):c},freeType:function(a){M(a.buffer)}},Ra={shape:function(a){for(var b=[];a.length;a=a[0])b.push(a.length);return b},flatten:function(a,b,c,d){var f=1;if(b.length)for(var e=0;e<b.length;++e)f*=b[e];else f=0;c=d||ca.allocType(c,f);switch(b.length){case 0:break;case 1:d=b[0];for(b=0;b<d;++b)c[b]=a[b];break;case 2:d=b[0];b=b[1];for(e=f=0;e<d;++e)for(var h=a[e],g=0;g<b;++g)c[f++]=h[g];break;case 3:O(a,b[0],b[1],b[2],c,0);break;default:Q(a,b,0,c,0)}return c}},Ia={int8:5120,int16:5122,
int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},Oa={dynamic:35048,stream:35040,"static":35044},Ua=Ra.flatten,Ya=Ra.shape,ta=[];ta[5120]=1;ta[5122]=2;ta[5124]=4;ta[5121]=1;ta[5123]=2;ta[5125]=4;ta[5126]=4;var Ba={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Za=new Float32Array(1),lb=new Uint32Array(Za.buffer),pb=[9984,9986,9985,9987],Qa=[0,6409,6410,6407,6408],ma={};ma[6409]=ma[6406]=ma[6402]=1;ma[34041]=
ma[6410]=2;ma[6407]=ma[35904]=3;ma[6408]=ma[35906]=4;var mb=Object.keys(Ha).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]),Ca=[];Ca[5121]=1;Ca[5126]=4;Ca[36193]=2;Ca[5123]=2;Ca[5125]=4;var V=[];V[32854]=2;V[32855]=2;V[36194]=2;V[34041]=4;V[33776]=.5;V[33777]=.5;V[33778]=1;V[33779]=1;V[35986]=.5;V[35987]=1;V[34798]=1;V[35840]=.5;V[35841]=.25;V[35842]=.5;V[35843]=.25;V[36196]=.5;var oa=[];oa[32854]=2;oa[32855]=2;oa[36194]=
2;oa[33189]=2;oa[36168]=1;oa[34041]=4;oa[35907]=4;oa[34836]=16;oa[34842]=8;oa[34843]=6;var Cb=function(a,b,c,d,f){function e(a){this.id=m++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;f.profile&&(this.stats={size:0})}function h(b){var c=b.renderbuffer;y(c,"must not double destroy renderbuffer");a.bindRenderbuffer(36161,null);a.deleteRenderbuffer(c);b.renderbuffer=null;b.refCount=0;delete l[b.id];d.renderbufferCount--}var g={rgba4:32854,rgb565:36194,"rgb5 a1":32855,
depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(g.srgba=35907);b.ext_color_buffer_half_float&&(g.rgba16f=34842,g.rgb16f=34843);b.webgl_color_buffer_float&&(g.rgba32f=34836);var k=[];Object.keys(g).forEach(function(a){k[g[a]]=a});var m=0,l={};e.prototype.decRef=function(){0>=--this.refCount&&h(this)};f.profile&&(d.getTotalRenderbufferSize=function(){var a=0;Object.keys(l).forEach(function(b){a+=l[b].stats.size});return a});return{create:function(b,h){function m(b,d){var e=0,h=0,l=32854;
"object"===typeof b&&b?("shape"in b?(h=b.shape,y(Array.isArray(h)&&2<=h.length,"invalid renderbuffer shape"),e=h[0]|0,h=h[1]|0):("radius"in b&&(e=h=b.radius|0),"width"in b&&(e=b.width|0),"height"in b&&(h=b.height|0)),"format"in b&&(y.parameter(b.format,g,"invalid renderbuffer format"),l=g[b.format])):"number"===typeof b?(e=b|0,h="number"===typeof d?d|0:e):b?y.raise("invalid arguments to renderbuffer constructor"):e=h=1;y(0<e&&0<h&&e<=c.maxRenderbufferSize&&h<=c.maxRenderbufferSize,"invalid renderbuffer size");
if(e!==n.width||h!==n.height||l!==n.format)return m.width=n.width=e,m.height=n.height=h,n.format=l,a.bindRenderbuffer(36161,n.renderbuffer),a.renderbufferStorage(36161,l,e,h),f.profile&&(n.stats.size=oa[n.format]*n.width*n.height),m.format=k[n.format],m}var n=new e(a.createRenderbuffer());l[n.id]=n;d.renderbufferCount++;m(b,h);m.resize=function(b,d){var e=b|0,h=d|0||e;if(e===n.width&&h===n.height)return m;y(0<e&&0<h&&e<=c.maxRenderbufferSize&&h<=c.maxRenderbufferSize,"invalid renderbuffer size");
m.width=n.width=e;m.height=n.height=h;a.bindRenderbuffer(36161,n.renderbuffer);a.renderbufferStorage(36161,n.format,e,h);f.profile&&(n.stats.size=oa[n.format]*n.width*n.height);return m};m._reglType="renderbuffer";m._renderbuffer=n;f.profile&&(m.stats=n.stats);m.destroy=function(){n.decRef()};return m},clear:function(){pa(l).forEach(h)},restore:function(){pa(l).forEach(function(b){b.renderbuffer=a.createRenderbuffer();a.bindRenderbuffer(36161,b.renderbuffer);a.renderbufferStorage(36161,b.format,b.width,
b.height)});a.bindRenderbuffer(36161,null)}}},tb=[6408],bb=[];bb[6408]=4;var Sa=[];Sa[5121]=1;Sa[5126]=4;Sa[36193]=2;var ub=[32854,32855,36194,35907,34842,34843,34836],sb={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"},Ga=["x","y","z","w"],Ab="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),sa={0:0,1:1,zero:0,one:1,"src color":768,
"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},eb="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
Fa={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},xa={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},fb={frag:35632,vert:35633},Va={cw:2304,ccw:2305},gb=new na(!1,!1,!1,function(){}),Db=function(a,b){function c(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function d(a,b,f){var e=
g.pop()||new c;e.startQueryIndex=a;e.endQueryIndex=b;e.sum=0;e.stats=f;k.push(e)}var f=b.ext_disjoint_timer_query;if(!f)return null;var e=[],h=[],g=[],k=[],m=[],l=[];return{beginQuery:function(a){var b=e.pop()||f.createQueryEXT();f.beginQueryEXT(35007,b);h.push(b);d(h.length-1,h.length,a)},endQuery:function(){f.endQueryEXT(35007)},pushScopeStats:d,update:function(){var a,b;a=h.length;if(0!==a){l.length=Math.max(l.length,a+1);m.length=Math.max(m.length,a+1);m[0]=0;var c=l[0]=0;for(b=a=0;b<h.length;++b){var d=
h[b];f.getQueryObjectEXT(d,34919)?(c+=f.getQueryObjectEXT(d,34918),e.push(d)):h[a++]=d;m[b+1]=c;l[b+1]=a}h.length=a;for(b=a=0;b<k.length;++b){var c=k[b],n=c.startQueryIndex,d=c.endQueryIndex;c.sum+=m[d]-m[n];n=l[n];d=l[d];d===n?(c.stats.gpuTime+=c.sum/1E6,g.push(c)):(c.startQueryIndex=n,c.endQueryIndex=d,k[a++]=c)}k.length=a}},getNumPendingQueries:function(){return h.length},clear:function(){e.push.apply(e,h);for(var a=0;a<e.length;a++)f.deleteQueryEXT(e[a]);h.length=0;e.length=0},restore:function(){h.length=
0;e.length=0}}};return function(a){function b(){if(0===N.length)z&&z.update(),V=null;else{V=Wa.next(b);l();for(var a=N.length-1;0<=a;--a){var c=N[a];c&&c(C,null,0)}r.flush();z&&z.update()}}function c(){!V&&0<N.length&&(V=Wa.next(b))}function d(){V&&(Wa.cancel(b),V=null)}function f(a){a.preventDefault();t=!0;d();S.forEach(function(a){a()})}function e(a){r.getError();t=!1;v.restore();I.restore();G.restore();K.restore();L.restore();M.restore();z&&z.restore();P.procs.refresh();c();U.forEach(function(a){a()})}
function h(a){function b(a){var c={},d={};Object.keys(a).forEach(function(b){var f=a[b];qa.isDynamic(f)?d[b]=qa.unbox(f,b):c[b]=f});return{dynamic:d,"static":c}}function c(a){for(;n.length<a;)n.push(null);return n}y(!!a,"invalid args to regl({...})");y.type(a,"object","invalid args to regl({...})");var d=b(a.context||{}),f=b(a.uniforms||{}),e=b(a.attributes||{}),g=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=Y({},a);delete c.uniforms;
delete c.attributes;delete c.context;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));a={gpuTime:0,cpuTime:0,count:0};var d=P.compile(g,e,f,d,a),k=d.draw,m=d.batch,l=d.scope,n=[];return Y(function(a,b){var d;t&&y.raise("context lost");if("function"===typeof a)return l.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)l.call(this,
null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)l.call(this,a[d],b,d);else return l.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return k.call(this,a)},{stats:a})}function g(a,b){var c=0;P.procs.poll();var d=b.color;d&&(r.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(r.clearDepth(+b.depth),c|=256);"stencil"in b&&(r.clearStencil(b.stencil|0),c|=1024);
y(!!c,"called regl.clear with no buffer specified");r.clear(c)}function k(a){y.type(a,"function","regl.frame() callback must be a function");N.push(a);c();return{cancel:function(){function b(){var a=hb(N,b);N[a]=N[N.length-1];--N.length;0>=N.length&&d()}var c=hb(N,a);y(0<=c,"cannot cancel a frame twice");N[c]=b}}}function m(){var a=Q.viewport,b=Q.scissor_box;a[0]=a[1]=b[0]=b[1]=0;C.viewportWidth=C.framebufferWidth=C.drawingBufferWidth=a[2]=b[2]=r.drawingBufferWidth;C.viewportHeight=C.framebufferHeight=
C.drawingBufferHeight=a[3]=b[3]=r.drawingBufferHeight}function l(){C.tick+=1;C.time=p();m();P.procs.poll()}function n(){m();P.procs.refresh();z&&z.update()}function p(){return(jb()-D)/1E3}a=E(a);if(!a)return null;var r=a.gl,q=r.getContextAttributes(),t=r.isContextLost(),v=R(r,a);if(!v)return null;var u=H(),w={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},x=v.extensions,z=Db(r,x),D=jb(),A=r.drawingBufferWidth,B=r.drawingBufferHeight,
C={tick:0,time:0,viewportWidth:A,viewportHeight:B,framebufferWidth:A,framebufferHeight:B,drawingBufferWidth:A,drawingBufferHeight:B,pixelRatio:a.pixelRatio},F=Bb(r,x),G=Z(r,w,a),J=aa(r,x,G,w),A=vb(r,x,F,G,u),I=wb(r,u,w,a),K=nb(r,x,F,function(){P.procs.poll()},C,w,a),L=Cb(r,x,F,w,a),M=rb(r,x,F,K,L,w),P=zb(r,u,x,F,G,J,K,M,{},A,I,{elements:null,primitive:4,count:-1,offset:0,instances:-1},C,z,a),u=xb(r,M,P.procs.poll,C,q,x),Q=P.next,O=r.canvas,N=[],S=[],U=[],W=[a.onDestroy],V=null;O&&(O.addEventListener("webglcontextlost",
f,!1),O.addEventListener("webglcontextrestored",e,!1));var X=M.setFBO=h({framebuffer:qa.define.call(null,1,"framebuffer")});n();q=Y(h,{clear:function(a){y("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)X(Y({framebuffer:a.framebuffer.faces[b]},a),g);else X(a,g);else g(null,a)},prop:qa.define.bind(null,1),context:qa.define.bind(null,2),"this":qa.define.bind(null,3),draw:h({}),buffer:function(a){return G.create(a,
34962,!1,!1)},elements:function(a){return J.create(a,!1)},texture:K.create2D,cube:K.createCube,renderbuffer:L.create,framebuffer:M.create,framebufferCube:M.createCube,attributes:q,frame:k,on:function(a,b){y.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return k(b);case "lost":c=S;break;case "restore":c=U;break;case "destroy":c=W;break;default:y.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<
c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:F,hasExtension:function(a){return 0<=F.extensions.indexOf(a.toLowerCase())},read:u,destroy:function(){N.length=0;d();O&&(O.removeEventListener("webglcontextlost",f),O.removeEventListener("webglcontextrestored",e));I.clear();M.clear();L.clear();K.clear();J.clear();G.clear();z&&z.clear();W.forEach(function(a){a()})},_gl:r,_refresh:n,poll:function(){l();z&&z.update()},now:p,stats:w});a.onDone(null,q);return q}})},{}],72:[function(a,
e,g){function q(a,b){for(var d=Array(a.length-1),e=1;e<a.length;++e)for(var h=d[e-1]=Array(a.length-1),g=0,k=0;g<a.length;++g)g!==b&&(h[k++]=a[e][g]);return d}function l(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",l(a.slice(0,b)),",",l(a.slice(b)),")"].join("")}function d(a,b){if("m"===a.charAt(0)){if("w"===b.charAt(0)){var e=a.split("[");return["w",b.substr(1),"m",e[0].substr(1)].join("")}return["prod(",a,",",b,")"].join("")}return d(b,
a)}function b(a){if(2===a.length)return[["diff(",d(a[0][0],a[1][1]),",",d(a[1][0],a[0][1]),")"].join("")];for(var f=[],e=0;e<a.length;++e)f.push(["scale(",l(b(q(a,e))),",",e&1?"-":"",a[0][e],")"].join(""));return f}function t(a,b){for(var d=[],e=0;e<b-2;++e)d.push(["prod(m",a,"[",e,"],m",a,"[",e,"])"].join(""));return l(d)}function p(a){for(var d=[],e=[],g=Array(a),k=0;k<a;++k){g[k]=Array(a);for(var p=0;p<a;++p)g[k][p]=["m",p,"[",a-k-2,"]"].join("")}for(k=0;k<a;++k)g[0][k]="1",g[a-1][k]="w"+k;for(k=
0;k<a;++k)0===(k&1)?d.push.apply(d,b(q(g,k))):e.push.apply(e,b(q(g,k)));d=l(d);e=l(e);g="exactInSphere"+a;p=[];for(k=0;k<a;++k)p.push("m"+k);p=["function ",g,"(",p.join(),"){"];for(k=0;k<a;++k){p.push("var w",k,"=",t(k,a),";");for(var v=0;v<a;++v)v!==k&&p.push("var w",k,"m",v,"=scale(w",k,",m",v,"[0]);")}p.push("var p=",d,",n=",e,",d=diff(p,n);return d[d.length-1];}return ",g);return(new Function("sum","diff","prod","scale",p.join("")))(u,n,x,h)}function w(a){var b=k[a.length];b||(b=k[a.length]=p(a.length));
return b.apply(void 0,a)}var x=a("two-product"),u=a("robust-sum"),n=a("robust-subtract"),h=a("robust-scale"),k=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=k.length;)k.push(p(k.length));for(var a=[],b=["slow"],d=0;6>=d;++d)a.push("a"+d),b.push("o"+d);for(var h=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;6>=d;++d)h.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");h.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");
b.push(h.join(""));a=Function.apply(void 0,b);e.exports=a.apply(void 0,[w].concat(k));for(d=0;6>=d;++d)e.exports[d]=k[d]})()},{"robust-scale":75,"robust-subtract":77,"robust-sum":78,"two-product":88}],73:[function(a,e,g){function q(a,b){for(var d=Array(a.length-1),e=1;e<a.length;++e)for(var h=d[e-1]=Array(a.length-1),g=0,k=0;g<a.length;++g)g!==b&&(h[k++]=a[e][g]);return d}function l(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",
l(a.slice(0,b)),",",l(a.slice(b)),")"].join("")}function d(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var b=[],e=0;e<a.length;++e)b.push(["scale(",l(d(q(a,e))),",",e&1?"-":"",a[0][e],")"].join(""));return b}function b(a){for(var b=[],e=[],h=Array(a),g=0;g<a;++g){h[g]=Array(a);for(var k=0;k<a;++k)h[g][k]=["m",k,"[",a-g-1,"]"].join("")}g=[];for(k=0;k<a;++k)0===(k&1)?b.push.apply(b,d(q(h,k))):e.push.apply(e,d(q(h,k))),g.push("m"+k);b=
l(b);e=l(e);a="orientation"+a+"Exact";a=["function ",a,"(",g.join(),"){var p=",b,",n=",e,",d=sub(p,n);return d[d.length-1];};return ",a].join("");return(new Function("sum","prod","scale","sub",a))(w,p,x,u)}function t(a){var d=k[a.length];d||(d=k[a.length]=b(a.length));return d.apply(void 0,a)}var p=a("two-product"),w=a("robust-sum"),x=a("robust-scale"),u=a("robust-subtract"),n=b(3),h=b(4),k=[function(){return 0},function(){return 0},function(a,b){return b[0]-a[0]},function(a,b,d){var e=(a[1]-d[1])*
(b[0]-d[0]),h=(a[0]-d[0])*(b[1]-d[1]),g=e-h;if(0<e){if(0>=h)return g;e+=h}else if(0>e){if(0<=h)return g;e=-(e+h)}else return g;e*=3.3306690738754716E-16;return g>=e||g<=-e?g:n(a,b,d)},function(a,b,d,e){var g=a[0]-e[0],k=b[0]-e[0],l=d[0]-e[0],n=a[1]-e[1],p=b[1]-e[1],q=d[1]-e[1],t=a[2]-e[2],u=b[2]-e[2],w=d[2]-e[2],x=k*q,E=l*p,l=l*n,q=g*q,g=g*p,n=k*n,k=t*(x-E)+u*(l-q)+w*(g-n),t=7.771561172376103E-16*((Math.abs(x)+Math.abs(E))*Math.abs(t)+(Math.abs(l)+Math.abs(q))*Math.abs(u)+(Math.abs(g)+Math.abs(n))*
Math.abs(w));return k>t||-k>t?k:h(a,b,d,e)}];(function(){for(;5>=k.length;)k.push(b(k.length));for(var a=[],d=["slow"],h=0;5>=h;++h)a.push("a"+h),d.push("o"+h);for(var g=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],h=2;5>=h;++h)g.push("case ",h,":return o",h,"(",a.slice(0,h).join(),");");g.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");d.push(g.join(""));a=Function.apply(void 0,
d);e.exports=a.apply(void 0,[t].concat(k));for(h=0;5>=h;++h)e.exports[h]=k[h]})()},{"robust-scale":75,"robust-subtract":77,"robust-sum":78,"two-product":88}],74:[function(a,e,g){var q=a("robust-sum"),l=a("robust-scale");e.exports=function(a,b){if(1===a.length)return l(b,a[0]);if(1===b.length)return l(a,b[0]);if(0===a.length||0===b.length)return[0];var e=[0];if(a.length<b.length)for(var g=0;g<a.length;++g)e=q(e,l(b,a[g]));else for(g=0;g<b.length;++g)e=q(e,l(a,b[g]));return e}},{"robust-scale":75,"robust-sum":78}],
75:[function(a,e,g){var q=a("two-product"),l=a("two-sum");e.exports=function(a,b){var e=a.length;if(1===e)return e=q(a[0],b),e[0]?e:[e[1]];var g=Array(2*e),w=[.1,.1],x=[.1,.1],u=0;q(a[0],b,w);w[0]&&(g[u++]=w[0]);for(var n=1;n<e;++n){q(a[n],b,x);l(w[1],x[0],w);w[0]&&(g[u++]=w[0]);var h=x[1],k=w[1],c=h+k,h=k-(c-h);w[1]=c;h&&(g[u++]=h)}w[1]&&(g[u++]=w[1]);0===u&&(g[u++]=0);g.length=u;return g}},{"two-product":88,"two-sum":89}],76:[function(a,e,g){e.exports=function(a,d,b,e){var g=q(a,b,e),w=q(d,b,e);
if(0<g&&0<w||0>g&&0>w)return!1;var x=q(b,a,d),u=q(e,a,d);if(0<x&&0<u||0>x&&0>u)return!1;if(0===g&&0===w&&0===x&&0===u){a:{for(g=0;2>g;++g){var w=a[g],x=d[g],u=Math.max(w,x),n=b[g],h=e[g],k=Math.min(n,h);if(Math.max(n,h)<Math.min(w,x)||u<k){a=!1;break a}}a=!0}return a}return!0};var q=a("robust-orientation")[3]},{"robust-orientation":73}],77:[function(a,e,g){e.exports=function(a,e){var d=a.length|0,b=e.length|0;if(1===d&&1===b){var b=a[0],g=-e[0],d=b+g,p=d-b,d=(b=b-(d-p)+(g-p))?[b,d]:[d];return d}var g=
Array(d+b),w=p=0,x=0,u=Math.abs,n=a[w],h=u(n),k=-e[x],c=u(k),f,m;h<c?(m=n,w+=1,w<d&&(n=a[w],h=u(n))):(m=k,x+=1,x<b&&(k=-e[x],c=u(k)));w<d&&h<c||x>=b?(f=n,w+=1,w<d&&(n=a[w],h=u(n))):(f=k,x+=1,x<b&&(k=-e[x],c=u(k)));var r=f+m;m-=r-f;for(var z=r,D;w<d&&x<b;)h<c?(f=n,w+=1,w<d&&(n=a[w],h=u(n))):(f=k,x+=1,x<b&&(k=-e[x],c=u(k))),r=f+m,f=r-f,(f=m-f)&&(g[p++]=f),f=z+r,D=f-z,m=f-D,r-=D,z-=m,m=z+r,z=f;for(;w<d;)f=n,r=f+m,f=r-f,(f=m-f)&&(g[p++]=f),f=z+r,D=f-z,m=f-D,r-=D,z-=m,m=z+r,z=f,w+=1,w<d&&(n=a[w]);for(;x<
b;)f=k,r=f+m,f=r-f,(f=m-f)&&(g[p++]=f),f=z+r,D=f-z,m=f-D,r-=D,z-=m,m=z+r,z=f,x+=1,x<b&&(k=-e[x]);m&&(g[p++]=m);z&&(g[p++]=z);p||(g[p++]=0);g.length=p;return g}},{}],78:[function(a,e,g){e.exports=function(a,e){var d=a.length|0,b=e.length|0;if(1===d&&1===b){var b=a[0],g=e[0],d=b+g,p=d-b,d=(b=b-(d-p)+(g-p))?[b,d]:[d];return d}var g=Array(d+b),w=p=0,x=0,u=Math.abs,n=a[w],h=u(n),k=e[x],c=u(k),f,m;h<c?(m=n,w+=1,w<d&&(n=a[w],h=u(n))):(m=k,x+=1,x<b&&(k=e[x],c=u(k)));w<d&&h<c||x>=b?(f=n,w+=1,w<d&&(n=a[w],
h=u(n))):(f=k,x+=1,x<b&&(k=e[x],c=u(k)));var r=f+m;m-=r-f;for(var z=r,D;w<d&&x<b;)h<c?(f=n,w+=1,w<d&&(n=a[w],h=u(n))):(f=k,x+=1,x<b&&(k=e[x],c=u(k))),r=f+m,f=r-f,(f=m-f)&&(g[p++]=f),f=z+r,D=f-z,m=f-D,r-=D,z-=m,m=z+r,z=f;for(;w<d;)f=n,r=f+m,f=r-f,(f=m-f)&&(g[p++]=f),f=z+r,D=f-z,m=f-D,r-=D,z-=m,m=z+r,z=f,w+=1,w<d&&(n=a[w]);for(;x<b;)f=k,r=f+m,f=r-f,(f=m-f)&&(g[p++]=f),f=z+r,D=f-z,m=f-D,r-=D,z-=m,m=z+r,z=f,x+=1,x<b&&(k=e[x]);m&&(g[p++]=m);z&&(g[p++]=z);p||(g[p++]=0);g.length=p;return g}},{}],79:[function(a,
e,g){arguments[4][19][0].apply(g,arguments)},{dup:19}],80:[function(a,e,g){function q(a){this.roots=Array(a);this.ranks=Array(a);for(var d=0;d<a;++d)this.roots[d]=d,this.ranks[d]=0}"use restrict";e.exports=q;q.prototype.length=function(){return this.roots.length};q.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};q.prototype.find=function(a){for(var d=this.roots;d[a]!==a;){var b=d[a];d[a]=d[b];a=b}return a};q.prototype.link=function(a,d){var b=this.find(a),
e=this.find(d);if(b!==e){var g=this.ranks,q=this.roots,x=g[b],u=g[e];x<u?q[b]=e:u<x?q[e]=b:(q[e]=b,++g[b])}}},{}],81:[function(a,e,g){function q(a,b){var d=a.length,c=a.length-b.length,f=Math.min;if(c)return c;switch(d){case 0:return 0;case 1:return a[0]-b[0];case 2:return(d=a[0]+a[1]-b[0]-b[1])?d:f(a[0],a[1])-f(b[0],b[1]);case 3:var c=a[0]+a[1],e=b[0]+b[1];if(d=c+a[2]-(e+b[2]))return d;var g=f(a[0],a[1]),l=f(b[0],b[1]);return(d=f(g,a[2])-f(l,b[2]))?d:f(g+a[2],c)-f(l+b[2],e);default:f=a.slice(0);
f.sort();e=b.slice(0);e.sort();for(g=0;g<d;++g)if(c=f[g]-e[g])return c;return 0}}function l(a,b){return q(a[0],b[0])}function d(a,b){if(b){for(var d=a.length,c=Array(d),f=0;f<d;++f)c[f]=[a[f],b[f]];c.sort(l);for(f=0;f<d;++f)a[f]=c[f][0],b[f]=c[f][1]}else a.sort(q);return a}function b(a){if(0===a.length)return[];for(var b=1,d=a.length,c=1;c<d;++c){var f=a[c];q(f,a[c-1])&&(c===b?b++:a[b++]=f)}a.length=b;return a}function t(a,b){for(var d=0,c=a.length-1,f=-1;d<=c;){var e=d+c>>1,g=q(a[e],b);0>=g?(0===
g&&(f=e),d=e+1):0<g&&(c=e-1)}return f}function p(a,b){for(var d=Array(a.length),c=0,f=d.length;c<f;++c)d[c]=[];for(var f=[],c=0,e=b.length;c<e;++c)for(var g=b[c],l=g.length,p=1,v=1<<l;p<v;++p){f.length=x.popCount(p);for(var u=0,w=0;w<l;++w)p&1<<w&&(f[u++]=g[w]);u=t(a,f);if(!(0>u))for(;!(d[u++].push(c),u>=a.length||0!==q(a[u],f)););}return d}function w(a,b){if(0>b)return[];for(var e=[],c=(1<<b+1)-1,f=0;f<a.length;++f)for(var g=a[f],l=c;l<1<<g.length;l=x.nextCombination(l)){for(var p=Array(b+1),q=0,
t=0;t<g.length;++t)l&1<<t&&(p[q++]=g[t]);e.push(p)}return d(e)}"use restrict";var x=a("bit-twiddle"),u=a("union-find");g.dimension=function(a){for(var b=0,d=Math.max,c=0,f=a.length;c<f;++c)b=d(b,a[c].length);return b-1};g.countVertices=function(a){for(var b=-1,d=Math.max,c=0,f=a.length;c<f;++c)for(var e=a[c],g=0,l=e.length;g<l;++g)b=d(b,e[g]);return b+1};g.cloneCells=function(a){for(var b=Array(a.length),d=0,c=a.length;d<c;++d)b[d]=a[d].slice(0);return b};g.compareCells=q;g.normalize=d;g.unique=b;
g.findCell=t;g.incidence=p;g.dual=function(a,d){if(!d)return p(b(w(a,0)),a,0);for(var e=Array(d),c=0;c<d;++c)e[c]=[];for(var c=0,f=a.length;c<f;++c)for(var g=a[c],l=0,q=g.length;l<q;++l)e[g[l]].push(c);return e};g.explode=function(a){for(var b=[],e=0,c=a.length;e<c;++e)for(var f=a[e],g=f.length|0,l=1,p=1<<g;l<p;++l){for(var q=[],t=0;t<g;++t)l>>>t&1&&q.push(f[t]);b.push(q)}return d(b)};g.skeleton=w;g.boundary=function(a){for(var b=[],e=0,c=a.length;e<c;++e)for(var f=a[e],g=0,l=f.length;g<l;++g){for(var p=
Array(f.length-1),q=0,t=0;q<l;++q)q!==g&&(p[t++]=f[q]);b.push(p)}return d(b)};g.connectedComponents=function(a,e){if(e){for(var g=new u(e),c=0;c<a.length;++c)for(var f=a[c],l=0;l<f.length;++l)for(var p=l+1;p<f.length;++p)g.link(f[l],f[p]);f=[];l=g.ranks;for(c=0;c<l.length;++c)l[c]=-1;for(c=0;c<a.length;++c)p=g.find(a[c][0]),0>l[p]?(l[p]=f.length,f.push([a[c].slice(0)])):f[l[p]].push(a[c].slice(0));return f}g=b(d(w(a,0)));c=new u(g.length);for(f=0;f<a.length;++f)for(l=a[f],p=0;p<l.length;++p)for(var q=
t(g,[l[p]]),x=p+1;x<l.length;++x)c.link(q,t(g,[l[x]]));l=[];p=c.ranks;for(f=0;f<p.length;++f)p[f]=-1;for(f=0;f<a.length;++f)q=c.find(t(g,[a[f][0]])),0>p[q]?(p[q]=l.length,l.push([a[f].slice(0)])):l[p[q]].push(a[f].slice(0));return l}},{"bit-twiddle":79,"union-find":80}],82:[function(a,e,g){e.exports=function(a,b,e){function g(a){if(v[a])return Infinity;var c=r[a],d=z[a];if(0>c||0>d)return Infinity;c=b[c];d=b[d];return Math.abs(q(b[a],c,d))/Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2))}function w(a,
b){var c=A[a],d=A[b];A[a]=d;A[b]=c;B[c]=b;B[d]=a}function x(a){for(var b=D[A[a]];;){var c=b,d=2*a+1,f=2*(a+1),e=a;if(d<K){var g=D[A[d]];g<c&&(e=d,c=g)}f<K&&D[A[f]]<c&&(e=f);if(e===a)return a;w(a,e);a=e}}function u(a){for(var b=D[A[a]];0<a;){var c;c=a&1?a-1>>1:(a>>1)-1;if(0<=c&&b<D[A[c]])w(a,c),a=c;else return a}}function n(){if(0<K){var a=A[0];w(0,K-1);--K;x(0);return a}return-1}function h(a,b){var c=A[a];if(D[c]===b)return a;D[c]=-Infinity;u(a);n();D[c]=b;K+=1;return u(K-1)}function k(a){if(!v[a]){v[a]=
!0;var b=r[a];a=z[a];0<=r[a]&&(r[a]=b);0<=z[b]&&(z[b]=a);0<=B[b]&&h(B[b],g(b));0<=B[a]&&h(B[a],g(a))}}function c(a,b){if(0>a[b])return b;var c=b,d=b;do{var f=a[d];if(!v[d]||0>f||f===d)break;d=f;f=a[d];if(!v[d]||0>f||f===d)break;d=f;c=a[c]}while(c!==d);for(c=b;c!==d;c=a[c])a[c]=d;return d}for(var f=b.length,m=a.length,r=Array(f),z=Array(f),D=Array(f),v=Array(f),C=0;C<f;++C)r[C]=z[C]=-1,D[C]=Infinity,v[C]=!1;for(C=0;C<m;++C){var G=a[C];if(2!==G.length)throw Error("Input must be a graph");var H=G[1],
G=G[0];z[G]=-1!==z[G]?-2:H;r[H]=-1!==r[H]?-2:G}for(var A=[],B=Array(f),C=0;C<f;++C)Infinity>(D[C]=g(C))?(B[C]=A.length,A.push(C)):B[C]=-1;for(var K=A.length,C=K>>1;0<=C;--C)x(C);for(;;){C=n();if(0>C||D[C]>e)break;k(C)}e=[];for(C=0;C<f;++C)v[C]||(B[C]=e.length,e.push(b[C].slice()));var F=[];a.forEach(function(a){var b=c(r,a[0]);a=c(z,a[1]);0<=b&&0<=a&&b!==a&&(b=B[b],a=B[a],b!==a&&F.push([b,a]))});l.unique(l.normalize(F));return{positions:e,edges:F}};var q=a("robust-orientation"),l=a("simplicial-complex")},
{"robust-orientation":73,"simplicial-complex":81}],83:[function(a,e,g){function q(a,b){var e,g;if(b[0][0]<b[1][0])e=b[0],g=b[1];else if(b[0][0]>b[1][0])e=b[1],g=b[0];else{e=Math.min(a[0][1],a[1][1]);g=Math.max(a[0][1],a[1][1]);var q=Math.min(b[0][1],b[1][1]),x=Math.max(b[0][1],b[1][1]);return g<q?g-q:e>x?e-x:g-x}a[0][1]<a[1][1]?(x=a[0],q=a[1]):(x=a[1],q=a[0]);return(x=l(g,e,x))?x:(x=l(g,e,q))?x:q-g}e.exports=function(a,b){var e,g;if(b[0][0]<b[1][0])e=b[0],g=b[1];else if(b[0][0]>b[1][0])e=b[1],g=b[0];
else return q(b,a);var w,x;if(a[0][0]<a[1][0])w=a[0],x=a[1];else if(a[0][0]>a[1][0])w=a[1],x=a[0];else return-q(a,b);var u=l(e,g,x),n=l(e,g,w);if(0>u){if(0>=n)return u}else if(0<u){if(0<=n)return u}else if(n)return n;u=l(x,w,g);n=l(x,w,e);if(0>u){if(0>=n)return u}else if(0<u){if(0<=n)return u}else if(n)return n;return g[0]-x[0]};var l=a("robust-orientation")},{"robust-orientation":73}],84:[function(a,e,g){arguments[4][52][0].apply(g,arguments)},{dup:52}],85:[function(a,e,g){function q(a,b,d){this.slabs=
a;this.coordinates=b;this.horizontal=d}function l(a,b){return a.y-b}function d(a,b){for(var e=null;a;){var c=a.key,f,g;c[0][0]<c[1][0]?(f=c[0],g=c[1]):(f=c[1],g=c[0]);f=x(f,g,b);if(0>f)a=a.left;else if(0<f)if(b[0]!==c[1][0])e=a,a=a.right;else{if(c=d(a.right,b))return c;a=a.left}else{if(b[0]!==c[1][0])return a;if(c=d(a.right,b))return c;a=a.left}}return e}function b(a,b,d,c){this.y=a;this.index=b;this.start=d;this.closed=c}function t(a,b,d,c){this.x=a;this.segment=b;this.create=d;this.index=c}e.exports=
function(a){for(var d=a.length,e=2*d,c=Array(e),f=0;f<d;++f){var g=a[f],l=g[0][0]<g[1][0];c[2*f]=new t(g[0][0],g,l,f);c[2*f+1]=new t(g[1][0],g,!l,f)}c.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create)?c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1])});a=w(u);d=[];g=[];l=[];for(f=0;f<e;){for(var p=c[f].x,x=[];f<e;){var v=c[f];if(v.x!==p)break;f+=1;v.segment[0][0]===v.x&&v.segment[1][0]===v.x?v.create&&(v.segment[0][1]<v.segment[1][1]?(x.push(new b(v.segment[0][1],
v.index,!0,!0)),x.push(new b(v.segment[1][1],v.index,!1,!1))):(x.push(new b(v.segment[1][1],v.index,!0,!1)),x.push(new b(v.segment[0][1],v.index,!1,!0)))):a=v.create?a.insert(v.segment,v.index):a.remove(v.segment)}d.push(a.root);g.push(p);l.push(x)}return new q(d,g,l)};var p=a("binary-search-bounds"),w=a("functional-red-black-tree"),x=a("robust-orientation"),u=a("./lib/order-segments");q.prototype.castUp=function(a){var b=p.le(this.coordinates,a[0]);if(0>b)return-1;var e=d(this.slabs[b],a),c=-1;e&&
(c=e.value);if(this.coordinates[b]===a[0]){var f=null;e&&(f=e.key);0<b&&(e=d(this.slabs[b-1],a))&&(f?0<u(e.key,f)&&(f=e.key,c=e.value):(c=e.value,f=e.key));e=this.horizontal[b];if(0<e.length){var g=p.ge(e,a[1],l);if(g<e.length){b=e[g];if(a[1]===b.y){if(b.closed)return b.index;for(;g<e.length-1&&e[g+1].y===a[1];)if(g+=1,b=e[g],b.closed)return b.index;if(b.y===a[1]&&!b.start){g+=1;if(g>=e.length)return c;b=e[g]}}b.start?f?(a=x(f[0],f[1],[a[0],b.y]),f[0][0]>f[1][0]&&(a=-a),0<a&&(c=b.index)):c=b.index:
b.y!==a[1]&&(c=b.index)}}}return c}},{"./lib/order-segments":83,"binary-search-bounds":84,"functional-red-black-tree":45,"robust-orientation":73}],86:[function(a,e,g){function q(a,b){var e=a.length,g=["'use strict';"],n="surfaceNets"+a.join("_")+"d"+b;g.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===b&&g.push("getters:[0],");for(var h=[],k=[],c=0;c<e;++c)h.push("d"+c),k.push("d"+c);for(c=0;c<1<<e;++c)h.push("v"+
c),k.push("v"+c);for(c=0;c<1<<e;++c)h.push("p"+c),k.push("p"+c);h.push("a","b","c");k.push("a","c");g.push("vertex:function vertexFunc(",h.join(),"){");h=[];for(c=0;c<1<<e;++c)h.push("(p"+c+"<<"+c+")");g.push("var m=(",h.join("+"),")|0;if(m===0||m===",(1<<(1<<e))-1,"){return}");var h=[],f=[];128>=1<<(1<<e)?(g.push("switch(m){"),f=g):g.push("switch(m>>>7){");for(c=0;c<1<<(1<<e);++c){128<1<<(1<<e)&&0===c%128&&(0<h.length&&f.push("}}"),f="vExtra"+h.length,g.push("case ",c>>>7,":",f,"(m&0x7f,",k.join(),
");break;"),f=["function ",f,"(m,",k.join(),"){switch(m){"],h.push(f));f.push("case ",c&127,":");for(var m=Array(e),q=Array(e),t=Array(e),D=Array(e),v=0,C=0;C<e;++C)m[C]=[],q[C]=[],t[C]=0,D[C]=0;for(C=0;C<1<<e;++C)for(var G=0;G<e;++G){var H=C^1<<G;if(!(H>C)&&!(c&1<<H)!==!(c&1<<C)){var A=1;c&1<<H?q[G].push("v"+H+"-v"+C):(q[G].push("v"+C+"-v"+H),A=-A);0>A?(m[G].push("-v"+C+"-v"+H),t[G]+=2):(m[G].push("v"+C+"+v"+H),t[G]-=2);v+=1;for(A=0;A<e;++A)A!==G&&(H&1<<A?D[A]+=1:--D[A])}}C=[];for(G=0;G<e;++G)0===
m[G].length?C.push("d"+G+"-0.5"):(H="",0>t[G]?H=t[G]+"*c":0<t[G]&&(H="+"+t[G]+"*c"),C.push("d"+G+"-"+(.5+D[G]/v*.5)+"-"+m[G].length/v*.5+"*("+m[G].join("+")+H+")/("+q[G].join("+")+")"));f.push("a.push([",C.join(),"]);","break;")}g.push("}},");0<h.length&&f.push("}}");k=[];for(c=0;c<1<<e-1;++c)k.push("v"+c);k.push("c0","c1","p0","p1","a","b","c");g.push("cell:function cellFunc(",k.join(),"){");e=d(e-1);g.push("if(p0){b.push(",e.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),
")}else{b.push(",e.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",n,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",n,";");for(c=0;c<h.length;++c)g.push(h[c].join(""));return(new Function("genContour",g.join("")))(l)}e.exports=function(a,d){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var e=b(a,d),g=e.length,l=Array(g),h=Array(g),k=0;k<
g;++k)l[k]=[e[k]],h[k]=[k];return{positions:l,cells:h}}e=a.order.join()+"-"+a.dtype;g=t[e];d=+d||0;g||(g=t[e]=q(a.order,a.dtype));return g(a,d)};var l=a("ndarray-extract-contour"),d=a("triangulate-hypercube"),b=a("zero-crossings"),t={}},{"ndarray-extract-contour":57,"triangulate-hypercube":87,"zero-crossings":96}],87:[function(a,e,g){e.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var e=Math.round(d(a+1))|0,g=[],w=0;w<e;++w){for(var x=q.unrank(a,w),u=[0],n=0,h=0;h<x.length;++h)n+=1<<
x[h],u.push(n);1>l(x)&&(u[0]=n,u[a]=0);g.push(u)}return g};var q=a("permutation-rank"),l=a("permutation-parity"),d=a("gamma")},{gamma:46,"permutation-parity":60,"permutation-rank":61}],88:[function(a,e,g){e.exports=function(a,d,b){var e=a*d,g=q*a,g=g-(g-a);a-=g;var w=q*d,w=w-(w-d);d-=w;d=a*d-(e-g*w-a*w-g*d);return b?(b[0]=d,b[1]=e,b):[d,e]};var q=+(Math.pow(2,27)+1)},{}],89:[function(a,e,g){e.exports=function(a,e,d){var b=a+e,g=b-a;e-=g;a-=b-g;return d?(d[0]=a+e,d[1]=b,d):[a+e,b]}},{}],90:[function(a,
e,g){(function(e,l){function d(a){if(a){var b=r.log2(a.length||a.byteLength);C[b].push(a)}}function b(a){a=r.nextPow2(a);var b=r.log2(a),b=C[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function t(a){return new Uint8Array(b(a),0,a)}function p(a){return new Uint16Array(b(2*a),0,a)}function w(a){return new Uint32Array(b(4*a),0,a)}function x(a){return new Int8Array(b(a),0,a)}function u(a){return new Int16Array(b(2*a),0,a)}function n(a){return new Int32Array(b(4*a),0,a)}function h(a){return new Float32Array(b(4*
a),0,a)}function k(a){return new Float64Array(b(8*a),0,a)}function c(a){return D?new Uint8ClampedArray(b(a),0,a):t(a)}function f(a){return new DataView(b(a),0,a)}function m(a){a=r.nextPow2(a);var b=r.log2(a),b=G[b];return 0<b.length?b.pop():new l(a)}var r=a("bit-twiddle"),z=a("dup");e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,
0])});var D="undefined"!==typeof Uint8ClampedArray,v=e.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=z([32,0]));v.BUFFER||(v.BUFFER=z([32,0]));var C=v.DATA,G=v.BUFFER;g.free=function(a){if(l.isBuffer(a))G[r.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=r.log2(a.length||a.byteLength)|0;C[b].push(a)}};g.freeUint8=g.freeUint16=g.freeUint32=g.freeInt8=g.freeInt16=g.freeInt32=g.freeFloat32=g.freeFloat=g.freeFloat64=g.freeDouble=g.freeUint8Clamped=
g.freeDataView=function(a){d(a.buffer)};g.freeArrayBuffer=d;g.freeBuffer=function(a){G[r.log2(a.length)].push(a)};g.malloc=function(a,d){if(void 0===d||"arraybuffer"===d)return b(a);switch(d){case "uint8":return t(a);case "uint16":return p(a);case "uint32":return w(a);case "int8":return x(a);case "int16":return u(a);case "int32":return n(a);case "float":case "float32":return h(a);case "double":case "float64":return k(a);case "uint8_clamped":return c(a);case "buffer":return m(a);case "data":case "dataview":return f(a);
default:return null}};g.mallocArrayBuffer=b;g.mallocUint8=t;g.mallocUint16=p;g.mallocUint32=w;g.mallocInt8=x;g.mallocInt16=u;g.mallocInt32=n;g.mallocFloat32=g.mallocFloat=h;g.mallocFloat64=g.mallocDouble=k;g.mallocUint8Clamped=c;g.mallocDataView=f;g.mallocBuffer=m;g.clearCache=function(){for(var a=0;32>a;++a)v.UINT8[a].length=0,v.UINT16[a].length=0,v.UINT32[a].length=0,v.INT8[a].length=0,v.INT16[a].length=0,v.INT32[a].length=0,v.FLOAT[a].length=0,v.DOUBLE[a].length=0,v.UINT8C[a].length=0,C[a].length=
0,G[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":19,buffer:28,dup:43}],91:[function(a,e,g){function q(a){this.roots=Array(a);this.ranks=Array(a);for(var d=0;d<a;++d)this.roots[d]=d,this.ranks[d]=0}"use restrict";e.exports=q;a=q.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);
return a};a.find=function(a){for(var d=a,b=this.roots;b[a]!==a;)a=b[a];for(;b[d]!==a;){var e=b[d];b[d]=a;d=e}return a};a.link=function(a,d){var b=this.find(a),e=this.find(d);if(b!==e){var g=this.ranks,q=this.roots,x=g[b],u=g[e];x<u?q[b]=e:u<x?q[e]=b:(q[e]=b,++g[b])}}},{}],92:[function(a,e,g){e.exports=function(a,e,d){if(0===a.length)return a;if(e){d||a.sort(e);d=1;for(var b=a.length,g=a[0],p=a[0],w=1;w<b;++w)p=g,g=a[w],e(g,p)&&(w===d?d++:a[d++]=g);a.length=d;return a}d||a.sort();e=1;d=a.length;b=
a[0];g=a[0];for(p=1;p<d;++p)g=b,b=a[p],b!==g&&(p===e?e++:a[e++]=b);a.length=e;return a}},{}],93:[function(a,e,g){e.exports=function(a,e){if("object"!==typeof e||null===e)e={};return q(a,e.canvas||l,e.context||d,e)};var q=a("./lib/vtext"),l=null,d=null;"undefined"!==typeof document&&(l=document.createElement("canvas"),l.width=8192,l.height=1024,d=l.getContext("2d"))},{"./lib/vtext":94}],94:[function(a,e,g){function q(a,b,d){for(var c=b.textAlign||"start",e=b.textBaseline||"alphabetic",g=[1073741824,
1073741824],l=[0,0],p=a.length,q=0;q<p;++q)for(var t=a[q],u=0;2>u;++u)g[u]=Math.min(g[u],t[u])|0,l[u]=Math.max(l[u],t[u])|0;var w=0;switch(c){case "center":w=-.5*(g[0]+l[0]);break;case "right":case "end":w=-l[0];break;case "left":case "start":w=-g[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+c+"'");}var x=0;switch(e){case "hanging":case "top":x=-g[1];break;case "middle":x=-.5*(g[1]+l[1]);break;case "alphabetic":case "ideographic":x=-3*d;break;case "bottom":x=-l[1];break;
default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+e+"'");}var A=1/d;"lineHeight"in b?A*=+b.lineHeight:"width"in b?A=b.width/(l[0]-g[0]):"height"in b&&(A=b.height/(l[1]-g[1]));return a.map(function(a){return[A*(a[0]+w),A*(a[1]+x)]})}function l(a,d,e,c){a=b(a,128);c=c?p(a.cells,a.positions,.25):{edges:a.cells,positions:a.positions};e=q(c.positions,d,e);a=c.edges;c="ccw"===d.orientation;w(e,a);if(d.polygons||d.polygon||d.polyline){d=u(a,e);a=Array(d.length);for(var f=0;f<d.length;++f){for(var g=
d[f],l=Array(g.length),t=0;t<g.length;++t){for(var D=g[t],v=Array(D.length),C=0;C<D.length;++C)v[C]=e[D[C]].slice();c&&v.reverse();l[t]=v}a[f]=l}return a}return d.triangles||d.triangulate||d.triangle?{cells:x(e,a,{delaunay:!1,exterior:!1,interior:!0}),positions:e}:{edges:a,positions:e}}function d(a,b,d){try{return l(a,b,d,!0)}catch(c){}try{return l(a,b,d,!1)}catch(c){}return b.polygons||b.polyline||b.polygon?[]:b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}
e.exports=function(a,b,e,c){var f=c.size||64;e.font=f+"px "+(c.font||"normal");e.textAlign="start";e.textBaseline="alphabetic";e.direction="ltr";var g;g=Math.ceil(e.measureText(a).width+2*f)|0;if(8192<g)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var l=3*f;b.height<l&&(b.height=l);e.fillStyle="#000";e.fillRect(0,0,b.width,b.height);e.fillStyle="#fff";e.fillText(a,f,2*f);a=e.getImageData(0,0,g,l);g=t(a.data,[l,g,4]).pick(-1,-1,0).transpose(1,0);return d(g,c,f)};
e.exports.processPixels=d;var b=a("surface-nets"),t=a("ndarray"),p=a("simplify-planar-graph"),w=a("clean-pslg"),x=a("cdt2d"),u=a("planar-graph-to-polyline")},{cdt2d:29,"clean-pslg":34,ndarray:58,"planar-graph-to-polyline":64,"simplify-planar-graph":82,"surface-nets":86}],95:[function(a,e,g){e.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":39}],96:[function(a,e,g){e.exports=function(a,d){var b=[];d=+d||0;q(a.hi(a.shape[0]-1),b,d);return b};var q=a("./lib/zc-core")},
{"./lib/zc-core":95}],97:[function(a,e,g){e=a("regl")();g=a("vectorize-text");var q=a("gl-mat4/perspective"),l=a("gl-mat4/lookAt");a=g("hello regl!",{textAlign:"center",textBaseline:"middle"});var d=e.texture({copy:!0,min:"linear",mag:"linear"}),b=e({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",
vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:d,t:function(a){return.001*a.tick}},depth:{enable:!1},count:3}),t=e({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",
vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",attributes:{position:a.positions},elements:a.edges,uniforms:{t:function(a){return.01*a.tick},view:function(a){a=.01*a.tick;return l([],[5*Math.sin(a),0,-5*Math.cos(a)],[0,0,0],[0,-1,0])},projection:function(a){return q([],Math.PI/4,a.viewportWidth/a.viewportHeight,.01,1E3)}},depth:{enable:!1}});e.frame(function(){b();t();d({copy:!0,min:"linear",
mag:"linear"})})},{"gl-mat4/lookAt":48,"gl-mat4/perspective":49,regl:71,"vectorize-text":93}]},{},[97]);
